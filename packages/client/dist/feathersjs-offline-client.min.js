/*! For license information please see feathersjs-offline-client.min.js.LICENSE.txt */
var feathersjsOfflineClient;feathersjsOfflineClient=(()=>{var e={943:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},9677:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?r.push(t.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return r}},e.exports=r},8479:(e,t,r)=>{const{Service:n}=r(2521),o=[];class i extends n{constructor(e={}){if(super(e),this._storageKey=e.name||"feathers",this._storage=e.storage||"undefined"!=typeof window&&window.localStorage,this._throttle=e.throttle||200,this._reuseKeys=e.reuseKeys||!1,this.store=null,!this._storage)throw new Error("The `storage` option needs to be provided");if(-1===o.indexOf(this._storageKey))o.push(this._storageKey);else if(!this._reuseKeys)throw new Error(`The storage name '${this._storageKey}' is already in use by another instance.`);this.ready()}ready(){return this.store?Promise.resolve(this.store):Promise.resolve(this._storage.getItem(this._storageKey)).then((e=>JSON.parse(e||"{}"))).then((e=>{const t=Object.keys(e),r=e[t[t.length-1]];return this._uId=t.length&&void 0!==r[this.id]?r[this.id]+1:this._uId,this.store=e}))}flush(e){return this._timeout||(this._timeout=setTimeout((()=>{this._storage.setItem(this._storageKey,JSON.stringify(this.store)),delete this._timeout}),this._throttle)),e}execute(e,...t){return this.ready().then((()=>super[e](...t)))}find(...e){return this.execute("find",...e)}get(...e){return this.execute("get",...e)}create(...e){return this.execute("create",...e).then((e=>this.flush(e)))}patch(...e){return this.execute("patch",...e).then((e=>this.flush(e)))}update(...e){return this.execute("update",...e).then((e=>this.flush(e)))}remove(...e){return this.execute("remove",...e).then((e=>this.flush(e)))}}e.exports=function(e){return new i(e)},e.exports.Service=n},2521:(e,t,r)=>{const n=r(3870),{_:o}=r(3827),{sorter:i,select:a,AdapterService:s}=r(4120),c=r(7507).ZP,u=(e,...t)=>a(...t)(JSON.parse(JSON.stringify(e)));class f extends s{constructor(e={}){super(o.extend({id:"id",matcher:c,sorter:i},e)),this._uId=e.startId||0,this.store=e.store||{}}async getEntries(e={}){const{query:t}=this.filterQuery(e);return this._find(Object.assign({},e,{paginate:!1,query:t}))}async _find(e={}){const{query:t,filters:r,paginate:n}=this.filterQuery(e);let i=o.values(this.store).filter(this.options.matcher(t));const a=i.length;void 0!==r.$sort&&i.sort(this.options.sorter(r.$sort)),void 0!==r.$skip&&(i=i.slice(r.$skip)),void 0!==r.$limit&&(i=i.slice(0,r.$limit));const s={total:a,limit:r.$limit,skip:r.$skip||0,data:i.map((t=>u(t,e)))};return n&&n.default?s:s.data}async _get(e,t={}){if(e in this.store){const{query:r}=this.filterQuery(t),n=this.store[e];if(this.options.matcher(r)(n))return u(n,t,this.id)}throw new n.NotFound(`No record found for id '${e}'`)}async _create(e,t={}){if(Array.isArray(e))return Promise.all(e.map((e=>this._create(e,t))));const r=e[this.id]||this._uId++,n=o.extend({},e,{[this.id]:r}),i=this.store[r]=n;return u(i,t,this.id)}async _update(e,t,r={}){const n=(await this._get(e))[this.id];return e=n==e?n:e,this.store[e]=o.extend({},t,{[this.id]:e}),this._get(e,r)}async _patch(e,t,r={}){const n=e=>{const n=e[this.id];return this.store[n]=o.extend(this.store[n],o.omit(t,this.id)),u(this.store[n],r,this.id)};return null===e?(await this.getEntries(r)).map(n):n(await this._get(e,r))}async _remove(e,t={}){if(null===e){const e=await this.getEntries(t);return Promise.all(e.map((e=>this._remove(e[this.id],t))))}const r=await this._get(e,t);return delete this.store[e],r}}e.exports=e=>new f(e),e.exports.Service=f},7507:(e,t,r)=>{"use strict";function n(e){var t="[object "+e+"]";return function(e){return Object.prototype.toString.call(e)===t}}r.d(t,{ZP:()=>S});var o=n("Array"),i=n("Object"),a=n("Function");function s(e,t){return a(e.get)?e.get(t):e[t]}const c=(u=e=>function(t,r,n,i,a){if(!o(r)||!r.length)return e(t,r);for(var c=0,u=r.length;c<u;c++)if(e(t,s(r,c)))return!0;return!1},(e,t,r,n,o)=>o?Boolean(o.find((([t,r,n])=>u(e)))):u(e));var u;function f(e){return function(t,r,n,i){if(!o(r)||!r.length)return e(t,r,n,i);for(var a=0,c=r.length;a<c;a++)if(!e(t,s(r,a),r,i))return!1;return!0}}function l(e,t,r,n,o){return e.validate(e.options,t,r,n,o)}var p={$eq:c((function(e,t){return e(t)})),$ne:f((function(e,t){return e(t)})),$gt:c((function(e,t){return e(t)})),$gte:c((function(e,t){return e(t)})),$lt:c((function(e,t){return e(t)})),$lte:c((function(e,t){return e(t)})),$mod:c((function(e,t){return e(t)})),$in:(e,t)=>e(t),$nin:function(e,t){return e(t)},$not:function(e,t,r,n){return e(t,r,n)},$type:function(e,t){return e(t)},$all:function(e,t,r,n,o){return p.$and(e,t,r,n,o)},$size:function(e,t){return!!t&&e===t.length},$or:function(e,t,r,n){for(var o=0,i=e.length;o<i;o++)if(l(s(e,o),t,r,n))return!0;return!1},$nor:function(e,t,r,n){return!p.$or(e,t,r,n)},$and:function(e,t,r,n,o){if(o){for(var i=0,a=e.length;i<a;i++)if(!l(s(e,i),t,r,n,o))return!1}else for(i=0,a=e.length;i<a;i++)if(!l(s(e,i),t,r,n,o))return!1;return!0},$regex:c((function(e,t){return"string"==typeof t&&e.test(t)})),$where:function(e,t,r,n){return e.call(t,t,r,n)},$elemMatch:function(e,t,r,n){return o(t)?!!~function(e,t){for(var r=0;r<e.length;r++)if(s(e,r),l(t,s(e,r)))return r;return-1}(t,e):l(e,t,r,n)},$exists:function(e,t,r,n){return n.hasOwnProperty(r)===e}},h={$eq:function(e,t,{comparable:r,compare:n}){return e instanceof RegExp?c((function(t){return"string"==typeof t&&e.test(t)})):e instanceof Function?c(e):o(e)&&!e.length?c((function(e){return o(e)&&!e.length})):c(null===e?function(e){return null==e}:function(t){return 0===n(r(t),r(e))})},$gt:function(e,t,{comparable:r,compare:n}){return function(t){return n(r(t),r(e))>0}},$gte:function(e,t,{comparable:r,compare:n}){return function(t){return n(r(t),r(e))>=0}},$lt:function(e,t,{comparable:r,compare:n}){return function(t){return n(r(t),r(e))<0}},$lte:function(e,t,{comparable:r,compare:n}){return function(t){return n(r(t),r(e))<=0}},$in:function(e,t,r){const{comparable:n}=r;return function(t){if(!(t instanceof Array)){var o=n(t);if(o===t&&"object"==typeof t)for(a=e.length;a--;)if(String(e[a])===String(t)&&"[object Object]"!==String(t))return!0;if(void 0===o)for(a=e.length;a--;)if(null==e[a])return!0;for(a=e.length;a--;){var i=l(_(s(e,a),r),o,a,e);if(i&&"[object Object]"!==String(i)&&"[object Object]"!==String(o))return!0}return!!~e.indexOf(o)}for(var a=t.length;a--;)if(~e.indexOf(n(s(t,a))))return!0;return!1}},$nin:function(e,t,r){const n=h.$in(e,t,r);return function(e,t,r,o){return!n(e,t,r,o)}},$mod:function(e){return function(t){return t%e[0]==e[1]}},$ne:function(e,t,r){const n=h.$eq(e,t,r);return f((function(e,t,r,o){return!n(e,t,r,o)}))},$and:function(e,t,r){return e.map(g(r))},$all:function(e,t,r){return h.$and(e,t,r)},$or:function(e,t,r){return e.map(g(r))},$nor:function(e,t,r){return e.map(g(r))},$not:function(e,t,r){const n=g(r)(e);return function(e,t,r){return!l(n,e,t,r)}},$type:function(e){return function(t,r,n){return null!=t&&(t instanceof e||t.constructor==e)}},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e,t,r){return g(r)(e)},$exists:function(e){return!!e}};function d(e,t){return{options:e,validate:t}}function v({keyPath:e,child:t,query:r},n){const o=[];if(y(n,e,0,n,o),1===o.length){const[e,r,n]=o[0];return l(t,e,r,n)}return r&&r.$ne,o.map((([e])=>e)),l(t,void 0,void 0,void 0,o)}function y(e,t,r,n,i){if(r!==t.length&&null!=e){var a=s(t,r);if(o(e)&&isNaN(Number(a)))for(var c=0,u=e.length;c<u;c++)y(s(e,c),t,r,e,i);else y(s(e,a),t,r+1,e,i)}else i.push([e,t[r-1],n])}function m(e,t,r){return d({keyPath:e,child:t,query:r},v)}function g(e){const{comparable:t,expressions:r}=e;var n=function(e){var t;return e&&(t=e)&&(t.constructor===Object||t.constructor===Array||"function Object() { [native code] }"===t.constructor.toString()||"function Array() { [native code] }"===t.constructor.toString())||(e={$eq:e}),e},o=function(n){n=t(n);var o=[];for(var a in n){var s=n[a];if("$options"!==a){var c=p[a]||e&&r&&r[a];if(c)h[a]&&(s=h[a](s,n,e)),o.push(d(t(s),c));else{if(36===a.charCodeAt(0))throw new Error("Unknown operation "+a);var u=a.split(".");o.push(m(u,i(s),s))}}}return 1===o.length?o[0]:d(o,p.$and)},i=function(e){return-1===w(e=n(e),[]).join(",").search(/[$.]/)?d(e,b):o(e)};return function(e){return o(n(e))}}function b(e,t){if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(t))return!1;if(i(e)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!b(e[r],t[r]))return!1;return!0}if(o(e)){if(e.length!==t.length)return!1;for(var n=0,a=e.length;n<a;n++)if(!b(e[n],t[n]))return!1;return!0}return e===t}function w(e,t){if(!i(e))return t;for(var r in e)t.push(r),w(e[r],t);return t}function _(e,t){var r=g(t)(e);return t&&t.select&&(r={options:r,validate:function(e,r,n,o){return l(e,r&&t.select(r),n,o)}}),r}function S(e,t){var r=_(e,t=Object.assign({compare:x,comparable:O},t));return function(e,t,n){return l(r,e,t,n)}}function x(e,t){if(b(e,t))return 0;if(typeof e==typeof t){if(e>t)return 1;if(e<t)return-1}}function O(e){return e instanceof Date?e.getTime():o(e)?e.map(O):e&&"function"==typeof e.toJSON?e.toJSON():e}},8809:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},927:(e,t,r)=>{e.exports=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,r,n)}return r[a].exports}for(var i=void 0,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,n){(function(e){"use strict";var r,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(f),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var c=new e.MessageChannel;c.port1.onmessage=f,r=function(){c.port2.postMessage(0)}}var u=[];function f(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||r()}}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function f(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function l(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return i.reject(e,t)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}var a=d((function(){t(o,n)}));"error"===a.status&&n(a.value)}function d(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);return this.state!==c?l(r,this.state===s?e:t,this.outcome):this.queue.push(new f(r,e,t)),r},f.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){i.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=d(p,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},u.reject=function(e){var t=new this(o);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,c=-1,u=new this(o);++c<r;)f(e[c],c);return u;function f(e,o){t.resolve(e).then((function(e){a[o]=e,++s!==r||n||(n=!0,i.resolve(u,a))}),(function(e){n||(n=!0,i.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r,n=e.length,a=!1;if(!n)return this.resolve([]);for(var s=-1,c=new this(o);++s<n;)r=e[s],t.resolve(r).then((function(e){a||(a=!0,i.resolve(c,e))}),(function(e){a||(a=!0,i.reject(c,e))}));return c}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var l="local-forage-detect-blob-support",p=void 0,h={},d=Object.prototype.toString,v="readonly",y="readwrite";function m(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}function g(e){return"boolean"==typeof p?a.resolve(p):function(e){return new a((function(t){var r=e.transaction(l,y),n=i([""]);r.objectStore(l).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return p=e}))}function b(e){var t=h[e.name],r={};r.promise=new a((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function w(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _(e,t){var r=h[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function S(e,t){return new a((function(r,n){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);b(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(l)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},r(t),w(e)}}))}function x(e){return S(e,!1)}function O(e){return S(e,!0)}function j(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function A(e){return i([m(atob(e.data))],{type:e.type})}function k(e){return e&&e.__local_forage_encoded_blob}function C(e){var t=this,r=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(r,e,e),r}function E(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(n>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),O(e)})).then((function(){return function(e){b(e);for(var t=h[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,x(e).then((function(t){return e.db=t,j(e)?O(e):t})).then((function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(t){throw _(e,t),t}))}(e).then((function(){E(e,t,r,n-1)}))})).catch(r);r(o)}}var N={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=h[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},h[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=C);var i=[];function s(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==t&&i.push(u._initReady().catch(s))}var f=o.forages.slice(0);return a.all(i).then((function(){return r.db=o.db,x(r)})).then((function(e){return r.db=e,j(r,t._defaultConfig.version)?O(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<f.length;n++){var i=f[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){E(r._dbInfo,v,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;k(n)&&(n=A(n));var o=e(n,r.key,s++);void 0!==o?t(o):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){E(r._dbInfo,v,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),k(e)&&(e=A(e)),t(e)},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},setItem:function(e,t,r){var n=this;e=u(e);var o=new a((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===d.call(t)?g(i.db).then((function(e){return e?t:(r=t,new a((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){E(n._dbInfo,y,(function(i,a){if(i)return o(i);try{var s=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return s(o,r),o},removeItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){E(r._dbInfo,y,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},clear:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){E(t._dbInfo,y,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,e),r},length:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){E(t._dbInfo,v,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,e),r},key:function(e,t){var r=this,n=new a((function(t,n){e<0?t(null):r.ready().then((function(){E(r._dbInfo,v,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||s?t(r.key):(s=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,t),n},keys:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){E(t._dbInfo,v,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,e),r},dropInstance:function(e,t){t=f.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;if(e.name){var c=e.name===r.name&&i._dbInfo.db?a.resolve(i._dbInfo.db):x(e).then((function(t){var r=h[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t}));n=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;b(e);var n=h[e.name],i=n.forages;t.close();for(var s=0;s<i.length;s++){var c=i[s];c._dbInfo.db=null,c._dbInfo.version=r}return new a((function(t,n){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,w(r._dbInfo)}})).catch((function(t){throw(_(e,t)||a.resolve()).catch((function(){})),t}))}})):c.then((function(t){b(e);var r=h[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new a((function(t,r){var n=o.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)w(n[t]._dbInfo)})).catch((function(t){throw(_(e,t)||a.resolve()).catch((function(){})),t}))}))}else n=a.reject("Invalid arguments");return s(n,t),n}};var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",F=P.length,T="arbf",$="blob",M="si08",D="ui08",J="uic8",B="si16",Q="si32",q="ur16",U="ui32",L="fl32",z="fl64",K=F+T.length,W=Object.prototype.toString;function G(e){var t,r,n,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),f=new Uint8Array(u);for(t=0;t<s;t+=4)r=R.indexOf(e[t]),n=R.indexOf(e[t+1]),o=R.indexOf(e[t+2]),i=R.indexOf(e[t+3]),f[c++]=r<<2|n>>4,f[c++]=(15&n)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return u}function H(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=R[r[t]>>2],n+=R[(3&r[t])<<4|r[t+1]>>4],n+=R[(15&r[t+1])<<2|r[t+2]>>6],n+=R[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var V={serialize:function(e,t){var r="";if(e&&(r=W.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===W.call(e.buffer))){var n,o=P;e instanceof ArrayBuffer?(n=e,o+=T):(n=e.buffer,"[object Int8Array]"===r?o+=M:"[object Uint8Array]"===r?o+=D:"[object Uint8ClampedArray]"===r?o+=J:"[object Int16Array]"===r?o+=B:"[object Uint16Array]"===r?o+=q:"[object Int32Array]"===r?o+=Q:"[object Uint32Array]"===r?o+=U:"[object Float32Array]"===r?o+=L:"[object Float64Array]"===r?o+=z:t(new Error("Failed to get type for BinaryArray"))),t(o+H(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r="~~local_forage_type~"+e.type+"~"+H(this.result);t("__lfsc__:blob"+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,F)!==P)return JSON.parse(e);var t,r=e.substring(K),n=e.substring(F,K);if(n===$&&I.test(r)){var o=r.match(I);t=o[1],r=r.substring(o[0].length)}var a=G(r);switch(n){case T:return a;case $:return i([a],{type:t});case M:return new Int8Array(a);case D:return new Uint8Array(a);case J:return new Uint8ClampedArray(a);case B:return new Int16Array(a);case q:return new Uint16Array(a);case Q:return new Int32Array(a);case U:return new Uint32Array(a);case L:return new Float32Array(a);case z:return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:G,bufferToString:H};function Y(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function X(e,t,r,n,o,i){e.executeSql(r,n,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):Y(e,t,(function(){e.executeSql(r,n,o,i)}),i)}),i):i(e,a)}),i)}function Z(e,t,r,n){var o=this;e=u(e);var i=new a((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(r){X(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void i(Z.apply(o,[e,s,r,n-1]));a(t)}}))}))})).catch(a)}));return s(i,r),i}function ee(e){return new a((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}var te={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new a((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(o){Y(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=V,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){X(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){X(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},setItem:function(e,t,r){return Z.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=u(e);var n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){X(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},clear:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){X(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,e),r},length:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){X(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,e),r},key:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){X(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,t),n},keys:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){X(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,e),r},dropInstance:function(e,t){t=f.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return s(n=e.name?new a((function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(ee(n))})).then((function(e){return new a((function(t,r){e.db.transaction((function(n){function o(e){return new a((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var i=[],s=0,c=e.storeNames.length;s<c;s++)i.push(o(e.storeNames[s]));a.all(i).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):a.reject("Invalid arguments"),t),n}};function re(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function ne(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0}var oe={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=re(e,this._defaultConfig),ne()?(this._dbInfo=t,t.serializer=V,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(n)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),a++)))return u}}}));return s(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return s(n,t),n},setItem:function(e,t,r){var n=this;e=u(e);var o=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new a((function(o,i){var a=n._dbInfo;a.serializer.serialize(t,(function(t,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+e,t),o(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return s(o,r),o},removeItem:function(e,t){var r=this;e=u(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return s(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return s(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n}));return s(r,e),r},dropInstance:function(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return s(n=e.name?new a((function(t){e.storeName?t(re(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):a.reject("Invalid arguments"),t),n}},ie=function(e,t){for(var r=e.length,n=0;n<r;){if((o=e[n])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;n++}var o,i;return!1},ae=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},se={},ce={},ue={INDEXEDDB:N,WEBSQL:te,LOCALSTORAGE:oe},fe=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],le=["dropInstance"],pe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),he={description:"",driver:fe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function de(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function ve(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(ae(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var ye=new(function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ue)if(ue.hasOwnProperty(r)){var n=ue[r],o=n._driver;this[r]=o,se[o]||this.defineDriver(n)}this._defaultConfig=ve({},he),this._config=ve({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new a((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=pe.concat("_initStorage"),c=0,u=i.length;c<u;c++){var f=i[c];if((!ie(le,f)||e[f])&&"function"!=typeof e[f])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=a.reject(t);return s(r,arguments[arguments.length-1]),r}},r=0,n=le.length;r<n;r++){var o=le[r];e[o]||(e[o]=t(o))}}();var l=function(r){se[n]&&console.info("Redefining LocalForage driver: "+n),se[n]=e,ce[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,r):l(!!e._support):l(!0)}catch(e){r(e)}}));return c(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=se[e]?a.resolve(se[e]):a.reject(new Error("Driver not found."));return c(n,t,r),n},e.prototype.getSerializer=function(e){var t=a.resolve(V);return c(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;ae(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){n._config.driver=n.driver()}function s(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(s).catch(r)}i();var c=new Error("No available storage method found.");return n._driverSet=a.reject(c),n._driverSet}()}}(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return n._driverSet=a.reject(e),n._driverSet})),c(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!ce[e]},e.prototype._extend=function(e){ve(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=pe.length;e<t;e++)de(this,pe[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ye},{3:3}]},{},[4])(4)},1586:(e,t,r)=>{var n,o,i,a,s;n=r(9677),o=r(943).utf8,i=r(8809),a=r(943).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):o.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),c=8*e.length,u=1732584193,f=-271733879,l=-1732584194,p=271733878,h=0;h<r.length;h++)r[h]=16711935&(r[h]<<8|r[h]>>>24)|4278255360&(r[h]<<24|r[h]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var d=s._ff,v=s._gg,y=s._hh,m=s._ii;for(h=0;h<r.length;h+=16){var g=u,b=f,w=l,_=p;u=d(u,f,l,p,r[h+0],7,-680876936),p=d(p,u,f,l,r[h+1],12,-389564586),l=d(l,p,u,f,r[h+2],17,606105819),f=d(f,l,p,u,r[h+3],22,-1044525330),u=d(u,f,l,p,r[h+4],7,-176418897),p=d(p,u,f,l,r[h+5],12,1200080426),l=d(l,p,u,f,r[h+6],17,-1473231341),f=d(f,l,p,u,r[h+7],22,-45705983),u=d(u,f,l,p,r[h+8],7,1770035416),p=d(p,u,f,l,r[h+9],12,-1958414417),l=d(l,p,u,f,r[h+10],17,-42063),f=d(f,l,p,u,r[h+11],22,-1990404162),u=d(u,f,l,p,r[h+12],7,1804603682),p=d(p,u,f,l,r[h+13],12,-40341101),l=d(l,p,u,f,r[h+14],17,-1502002290),u=v(u,f=d(f,l,p,u,r[h+15],22,1236535329),l,p,r[h+1],5,-165796510),p=v(p,u,f,l,r[h+6],9,-1069501632),l=v(l,p,u,f,r[h+11],14,643717713),f=v(f,l,p,u,r[h+0],20,-373897302),u=v(u,f,l,p,r[h+5],5,-701558691),p=v(p,u,f,l,r[h+10],9,38016083),l=v(l,p,u,f,r[h+15],14,-660478335),f=v(f,l,p,u,r[h+4],20,-405537848),u=v(u,f,l,p,r[h+9],5,568446438),p=v(p,u,f,l,r[h+14],9,-1019803690),l=v(l,p,u,f,r[h+3],14,-187363961),f=v(f,l,p,u,r[h+8],20,1163531501),u=v(u,f,l,p,r[h+13],5,-1444681467),p=v(p,u,f,l,r[h+2],9,-51403784),l=v(l,p,u,f,r[h+7],14,1735328473),u=y(u,f=v(f,l,p,u,r[h+12],20,-1926607734),l,p,r[h+5],4,-378558),p=y(p,u,f,l,r[h+8],11,-2022574463),l=y(l,p,u,f,r[h+11],16,1839030562),f=y(f,l,p,u,r[h+14],23,-35309556),u=y(u,f,l,p,r[h+1],4,-1530992060),p=y(p,u,f,l,r[h+4],11,1272893353),l=y(l,p,u,f,r[h+7],16,-155497632),f=y(f,l,p,u,r[h+10],23,-1094730640),u=y(u,f,l,p,r[h+13],4,681279174),p=y(p,u,f,l,r[h+0],11,-358537222),l=y(l,p,u,f,r[h+3],16,-722521979),f=y(f,l,p,u,r[h+6],23,76029189),u=y(u,f,l,p,r[h+9],4,-640364487),p=y(p,u,f,l,r[h+12],11,-421815835),l=y(l,p,u,f,r[h+15],16,530742520),u=m(u,f=y(f,l,p,u,r[h+2],23,-995338651),l,p,r[h+0],6,-198630844),p=m(p,u,f,l,r[h+7],10,1126891415),l=m(l,p,u,f,r[h+14],15,-1416354905),f=m(f,l,p,u,r[h+5],21,-57434055),u=m(u,f,l,p,r[h+12],6,1700485571),p=m(p,u,f,l,r[h+3],10,-1894986606),l=m(l,p,u,f,r[h+10],15,-1051523),f=m(f,l,p,u,r[h+1],21,-2054922799),u=m(u,f,l,p,r[h+8],6,1873313359),p=m(p,u,f,l,r[h+15],10,-30611744),l=m(l,p,u,f,r[h+6],15,-1560198380),f=m(f,l,p,u,r[h+13],21,1309151649),u=m(u,f,l,p,r[h+4],6,-145523070),p=m(p,u,f,l,r[h+11],10,-1120210379),l=m(l,p,u,f,r[h+2],15,718787259),f=m(f,l,p,u,r[h+9],21,-343485551),u=u+g>>>0,f=f+b>>>0,l=l+w>>>0,p=p+_>>>0}return n.endian([u,f,l,p])})._ff=function(e,t,r,n,o,i,a){var s=e+(t&r|~t&n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._gg=function(e,t,r,n,o,i,a){var s=e+(t&n|r&~n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._hh=function(e,t,r,n,o,i,a){var s=e+(t^r^n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._ii=function(e,t,r,n,o,i,a){var s=e+(r^(t|~n))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?a.bytesToString(r):n.bytesToHex(r)}},8628:e=>{var t=1e3,r=60*t,n=60*r,o=24*n;function i(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,a){a=a||{};var s,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(s=e,(c=Math.abs(s))>=o?i(s,c,o,"day"):c>=n?i(s,c,n,"hour"):c>=r?i(s,c,r,"minute"):c>=t?i(s,c,t,"second"):s+" ms"):function(e){var i=Math.abs(e);return i>=o?Math.round(e/o)+"d":i>=n?Math.round(e/n)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2044:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>a,customRandom:()=>i,nanoid:()=>s,random:()=>o,urlAlphabet:()=>n});let n="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",o=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*n*t/e.length);return()=>{let i="";for(;;){let a=r(o),s=o;for(;s--;)if(i+=e[a[s]&n]||"",i.length===t)return i}}},a=(e,t)=>i(e,t,o),s=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let n=63&r[e];t+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return t}},2740:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>pe,$Size:()=>F,$all:()=>ae,$and:()=>ie,$elemMatch:()=>K,$eq:()=>q,$exists:()=>ee,$gt:()=>Y,$gte:()=>X,$in:()=>G,$lt:()=>H,$lte:()=>V,$mod:()=>Z,$ne:()=>U,$nin:()=>W,$nor:()=>z,$not:()=>re,$options:()=>ce,$or:()=>L,$regex:()=>te,$size:()=>se,$type:()=>oe,$where:()=>ue,EqualsOperation:()=>w,createDefaultQueryOperation:()=>le,createEqualsOperation:()=>_,createOperationTester:()=>E,createQueryOperation:()=>k,createQueryTester:()=>N});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(e){var t="[object "+e+"]";return function(e){return a(e)===t}},a=function(e){return Object.prototype.toString.call(e)},s=function(e){return e instanceof Date?e.getTime():c(e)?e.map(s):e&&"function"==typeof e.toJSON?e.toJSON():e},c=i("Array"),u=i("Object"),f=i("Function"),l=function(e,t){if(null==e&&e==t)return!0;if(e===t)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(t))return!1;if(c(e)){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(!l(e[r],t[r]))return!1;return!0}if(u(e)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(!l(e[o],t[o]))return!1;return!0}return!1},p=function(e,t,r,n,o,i){var a=t[n];if(c(e)&&isNaN(Number(a)))for(var s=0,u=e.length;s<u;s++)if(!p(e[s],t,r,n,s,e))return!1;return n===t.length||null==e?r(e,o,i):p(e[a],t,r,n+1,a,e)},h=function(){function e(e,t,r){this.params=e,this.owneryQuery=t,this.options=r,this.init()}return e.prototype.init=function(){},e.prototype.reset=function(){this.done=!1,this.keep=!1},e}(),d=function(e){function t(t,r,n,o){var i=e.call(this,t,r,n)||this;return i.name=o,i}return o(t,e),t}(h),v=function(e){function t(t,r,n,o){var i=e.call(this,t,r,n)||this;return i.children=o,i}return o(t,e),t.prototype.reset=function(){this.keep=!1,this.done=!1;for(var e=0,t=this.children.length;e<t;e++)this.children[e].reset()},t.prototype.childrenNext=function(e,t,r){for(var n=!0,o=!0,i=0,a=this.children.length;i<a;i++){var s=this.children[i];if(s.next(e,t,r),s.keep||(o=!1),s.done){if(!s.keep)break}else n=!1}this.done=n,this.keep=o},t}(h),y=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r,n,o)||this;return a.name=i,a}return o(t,e),t}(v),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.next=function(e,t,r){this.childrenNext(e,t,r)},t}(v),g=function(e){function t(t,r,n,o,i){var a=e.call(this,r,n,o,i)||this;return a.keyPath=t,a.propop=!0,a._nextNestedValue=function(e,t,r){return a.childrenNext(e,t,r),!a.done},a}return o(t,e),t.prototype.next=function(e,t,r){p(e,this.keyPath,this._nextNestedValue,0,t,r)},t}(v),b=function(e,t){if(e instanceof Function)return e;if(e instanceof RegExp)return function(t){var r="string"==typeof t&&e.test(t);return e.lastIndex=0,r};var r=s(e);return function(e){return t(r,s(e))}},w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.init=function(){this._test=b(this.params,this.options.compare)},t.prototype.next=function(e,t,r){Array.isArray(r)&&!r.hasOwnProperty(t)||this._test(e,t,r)&&(this.done=!0,this.keep=!0)},t}(h),_=function(e,t,r){return new w(e,t,r)},S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.next=function(){this.done=!0,this.keep=!1},t}(h),x=function(e){return t=function(t,r,n){var o=typeof s(t),i=e(t);return new w((function(e){return typeof s(e)===o&&i(e)}),r,n)},function(e,r,n,o){return null==e?new S(e,r,n):t(e,r,n)};var t},O=function(e,t,r,n){var o=n.operations[e];if(!o)throw new Error("Unsupported operation: "+e);return o(t,r,n,e)},j=function(e,t){for(var r in e)if(t.operations.hasOwnProperty(r))return!0;return!1},A=function(e,t,r,n,o){if(j(t,o)){var i=C(t,r,o),a=i[0];if(i[1].length)throw new Error("Property queries must contain only operations, or exact objects.");return new g(e,t,n,o,a)}return new g(e,t,n,o,[new w(t,n,o)])},k=function(e,t,r){void 0===t&&(t=null);var n=void 0===r?{}:r,o=n.compare,i=n.operations,a={compare:o||l,operations:Object.assign({},i||{})},s=C(e,null,a),c=s[0],u=s[1],f=[];return c.length&&f.push(new g([],e,t,a,c)),f.push.apply(f,u),1===f.length?f[0]:new m(e,t,a,f)},C=function(e,t,r){var n,o=[],i=[];if(!(n=e)||n.constructor!==Object&&n.constructor!==Array&&"function Object() { [native code] }"!==n.constructor.toString()&&"function Array() { [native code] }"!==n.constructor.toString()||n.toJSON)return o.push(new w(e,e,r)),[o,i];for(var a in e)if(r.operations.hasOwnProperty(a)){var s=O(a,e[a],e,r);if(s&&!s.propop&&t&&!r.operations[t])throw new Error("Malformed query. "+a+" cannot be matched against property.");null!=s&&o.push(s)}else i.push(A(a.split("."),e[a],a,e,r));return[o,i]},E=function(e){return function(t,r,n){return e.reset(),e.next(t,r,n),e.keep}},N=function(e,t){return void 0===t&&(t={}),E(k(e,null,t))},R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.init=function(){this._test=b(this.params,this.options.compare)},t.prototype.reset=function(){e.prototype.reset.call(this),this.keep=!0},t.prototype.next=function(e){this._test(e)&&(this.done=!0,this.keep=!1)},t}(d),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.init=function(){if(!this.params||"object"!=typeof this.params)throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=k(this.params,this.owneryQuery,this.options)},t.prototype.reset=function(){e.prototype.reset.call(this),this._queryOperation.reset()},t.prototype.next=function(e){if(c(e)){for(var t=0,r=e.length;t<r;t++){this._queryOperation.reset();var n=e[t];this._queryOperation.next(n,t,e),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},t}(d),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.init=function(){this._queryOperation=k(this.params,this.owneryQuery,this.options)},t.prototype.reset=function(){this._queryOperation.reset()},t.prototype.next=function(e,t,r){this._queryOperation.next(e,t,r),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},t}(d),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.init=function(){},t.prototype.next=function(e){c(e)&&e.length===this.params&&(this.done=!0,this.keep=!0)},t}(d),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!1,t}return o(t,e),t.prototype.init=function(){var e=this;this._ops=this.params.map((function(t){return k(t,null,e.options)}))},t.prototype.reset=function(){this.done=!1,this.keep=!1;for(var e=0,t=this._ops.length;e<t;e++)this._ops[e].reset()},t.prototype.next=function(e,t,r){for(var n=!1,o=!1,i=0,a=this._ops.length;i<a;i++){var s=this._ops[i];if(s.next(e,t,r),s.keep){n=!0,o=s.keep;break}}this.keep=o,this.done=n},t}(d),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!1,t}return o(t,e),t.prototype.next=function(t,r,n){e.prototype.next.call(this,t,r,n),this.keep=!this.keep},t}(T),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.init=function(){var e=this;this._testers=this.params.map((function(t){if(j(t,e.options))throw new Error("cannot nest $ under "+e.constructor.name.toLowerCase());return b(t,e.options.compare)}))},t.prototype.next=function(e,t,r){for(var n=!1,o=!1,i=0,a=this._testers.length;i<a;i++)if((0,this._testers[i])(e)){n=!0,o=!0;break}this.keep=o,this.done=n},t}(d),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.next=function(t,r,n){e.prototype.next.call(this,t,r,n),this.keep=!this.keep},t}(M),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propop=!0,t}return o(t,e),t.prototype.next=function(e,t,r){r.hasOwnProperty(t)===this.params&&(this.done=!0,this.keep=!0)},t}(d),B=function(e){function t(t,r,n,o){var i=e.call(this,t,r,n,t.map((function(e){return k(e,r,n)})),o)||this;return i.propop=!1,i}return o(t,e),t.prototype.next=function(e,t,r){this.childrenNext(e,t,r)},t}(y),Q=function(e){function t(t,r,n,o){var i=e.call(this,t,r,n,t.map((function(e){return k(e,r,n)})),o)||this;return i.propop=!0,i}return o(t,e),t.prototype.next=function(e,t,r){this.childrenNext(e,t,r)},t}(y),q=function(e,t,r){return new w(e,t,r)},U=function(e,t,r,n){return new R(e,t,r,n)},L=function(e,t,r,n){return new T(e,t,r,n)},z=function(e,t,r,n){return new $(e,t,r,n)},K=function(e,t,r,n){return new I(e,t,r,n)},W=function(e,t,r,n){return new D(e,t,r,n)},G=function(e,t,r,n){return new M(e,t,r,n)},H=x((function(e){return function(t){return t<e}})),V=x((function(e){return function(t){return t<=e}})),Y=x((function(e){return function(t){return t>e}})),X=x((function(e){return function(t){return t>=e}})),Z=function(e,t,r){var n=e[0],o=e[1];return new w((function(e){return s(e)%n===o}),t,r)},ee=function(e,t,r,n){return new J(e,t,r,n)},te=function(e,t,r){return new w(new RegExp(e,t.$options),t,r)},re=function(e,t,r,n){return new P(e,t,r,n)},ne={number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},bool:function(e){return"boolean"==typeof e},array:function(e){return Array.isArray(e)},null:function(e){return null===e},timestamp:function(e){return e instanceof Date}},oe=function(e,t,r){return new w((function(t){if("string"==typeof e){if(!ne[e])throw new Error("Type alias does not exist");return ne[e](t)}return null!=t&&(t instanceof e||t.constructor===e)}),t,r)},ie=function(e,t,r,n){return new B(e,t,r,n)},ae=function(e,t,r,n){return new Q(e,t,r,n)},se=function(e,t,r){return new F(e,t,r,"$size")},ce=function(){return null},ue=function(e,t,r){var n;if(f(e))n=e;else{if(process.env.CSP_ENABLED)throw new Error('In CSP mode, sift does not support strings in "$where" condition');n=new Function("obj","return "+e)}return new w((function(e){return n.bind(e)(e)}),t,r)},fe=Object.freeze({__proto__:null,$Size:F,$eq:q,$ne:U,$or:L,$nor:z,$elemMatch:K,$nin:W,$in:G,$lt:H,$lte:V,$gt:Y,$gte:X,$mod:Z,$exists:ee,$regex:te,$not:re,$type:oe,$and:ie,$all:ae,$size:se,$options:ce,$where:ue}),le=function(e,t,r){var n=void 0===r?{}:r,o=n.compare,i=n.operations;return k(e,t,{compare:o,operations:Object.assign({},fe,i||{})})};const pe=function(e,t){void 0===t&&(t={});var r=le(e,null,t);return E(r)}},5288:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=r(4120),p=l.sorter,h=l.select,d=l.AdapterService,v=r(3827)._,y=r(3870),m=r(927),g=r(2740).default,b=r(8385),w=r(5985)("@feathersjs-offline:feathers-localforage"),_=[],S=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=h.apply(void 0,r);return o(JSON.parse(JSON.stringify(e)))},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(x,e);var t,r,n,l,d=(n=x,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(l){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function x(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,x),(e=d.call(this,v.extend({id:"id",matcher:g,sorter:p},t))).store=t.store||{},e._dates=t.dates||!1,e.sanitizeParameters(t),w("Constructor started:\n\t_storageType = ".concat(JSON.stringify(e._storageType),"\n\t_version = ").concat(JSON.stringify(e._version),"\n\t_storageKey = ").concat(JSON.stringify(e._storageKey),"\n\t_storageSize = ").concat(JSON.stringify(e._storageSize),"\n\t_reuseKeys = ").concat(JSON.stringify(e._reuseKeys),"\n")),e._storage=m.createInstance({driver:e._storageType,name:"feathersjs-offline",size:e._storageSize,version:e._version,storeName:e._storageKey,description:"Created by @feathersjs-offline/feathers-localforage"}),e.checkStoreName();var r=c(e);return e._debugSuffix=r._storageKey.includes("_local")?"  LOCAL":r._storageKey.includes("_queue")?"  QUEUE":"",e.ready(),e}return t=x,(r=[{key:"sanitizeParameters",value:function(e){this._storageKey=e.name||"feathers",this._storageType=e.storage||[m.INDEXEDDB,m.WEBSQL,m.LOCALSTORAGE],this._version=e.version||1,this._storageSize=e.storageSize||4980736,this._reuseKeys=e.reuseKeys||!1,this._id=e.startId||0}},{key:"checkStoreName",value:function(){if(-1===_.indexOf(this._storageKey))_.push(this._storageKey);else if(!this._reuseKeys)throw new Error("The storage name '".concat(this._storageKey,"' is already in use by another instance."))}},{key:"ready",value:function(){return f(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r=Object.keys(this.store),e.next=4,Promise.all([r.forEach((function(e){var r=t.store[e][t.id];return r=t.setMax(r),t.getModel().setItem(String(r),t.store[e])}))]);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getModel",value:function(){return this._storage}},{key:"getEntries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w("_getEntries(".concat(JSON.stringify(e),")")+this._debugSuffix),r=this.filterQuery(e),n=r.query,t.abrupt("return",this._find(Object.assign({},e,{paginate:!1,query:n})).then(h(e,this.id)).then(b(this._dates)));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setMax",value:function(e){return Number.isInteger(e)&&(this._id=Math.max(Number.parseInt(e),this._id)),e}},{key:"_find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,c,u,l,p,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w("_find(".concat(JSON.stringify(e),")")+this._debugSuffix),n=(r=this).filterQuery(e),o=n.query,i=n.filters,a=n.paginate,t.next=5,r.getModel().keys();case 5:return s=t.sent,c=function(e,t){return f(h,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all(e.map(t));case 2:return n=r.sent,r.abrupt("return",e.filter((function(e,t){return n[t]})));case 4:case"end":return r.stop()}}),r)})))},t.next=9,c(s,(function(e){return f(h,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getModel().getItem(e);case 2:return n=t.sent,i=r.options.matcher(o)(n),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))}));case 9:return s=t.sent,t.next=12,Promise.all(s.map((function(e){return r.getModel().getItem(e)})));case 12:if(u=t.sent,l=u.length,void 0!==i.$sort&&u.sort(this.options.sorter(i.$sort)),void 0!==i.$skip&&(u=u.slice(i.$skip)),void 0!==i.$limit&&(u=u.slice(0,i.$limit)),u=b(this._dates)(u),p={total:l,limit:i.$limit,skip:i.$skip||0,data:u.map((function(t){return S(t,e)}))},a&&a.default){t.next=22;break}return w("_find res = ".concat(JSON.stringify(p.data))),t.abrupt("return",p.data);case 22:return w("_find res = ".concat(JSON.stringify(p))),t.abrupt("return",p);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"_get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,o,i,a=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return w("_get(".concat(e,", ").concat(JSON.stringify(t),")")+this._debugSuffix),n=this,o=this.filterQuery(t),i=o.query,r.abrupt("return",this.getModel().getItem(String(e),null).then((function(e){if(null===e)throw new y.NotFound("No match for query=".concat(JSON.stringify(i))+a._debugSuffix);if(n.options.matcher(i)(e))return e;throw new y.NotFound("No match for query=".concat(JSON.stringify(i))+a._debugSuffix)})).catch((function(t){throw new y.NotFound("No record found for id '".concat(e,"', err=").concat(t.message)+a._debugSuffix)})).then(h(t,this.id)).then(b(this._dates)));case 4:case"end":return r.stop()}}),r,this)})))}},{key:"_findOrGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(w("_findOrGet(".concat(e,", ").concat(JSON.stringify(t),")")+this._debugSuffix),null!==e){r.next=3;break}return r.abrupt("return",this._find(v.extend({},t,{paginate:!1})));case 3:return r.abrupt("return",this._get(e,t));case 4:case"end":return r.stop()}}),r,this)})))}},{key:"_create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,o,i,a=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return w("_create(".concat(JSON.stringify(e),", ").concat(JSON.stringify(t),")")+this._debugSuffix),n=function(e){var t=e[a.id];return e[a.id]=void 0!==t?a.setMax(t):++a._id,e},o=Array.isArray(e)?e.map(n):n(Object.assign({},e)),i=function(e){return a.getModel().setItem(String(e[a.id]),e,null).then((function(){return e})).then(h(t,a.id)).then(b(a._dates)).then((function(e){return e})).catch((function(e){throw new y.GeneralError("_create doOne: ERROR: err=".concat(e.name,", ").concat(e.message))}))},r.abrupt("return",Array.isArray(o)?Promise.all(o.map(i)):i(o));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"_patch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i,a,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return w("_patch(".concat(e,", ").concat(JSON.stringify(t),", ").concat(JSON.stringify(r),")")+this._debugSuffix),o=this,n.next=4,this._findOrGet(e,r);case 4:if(i=n.sent,a=function(e){return f(s,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e[this.id],a=v.extend(e,v.omit(t,this.id)),n.next=4,o.getModel().setItem(String(i),a,null);case 4:return n.abrupt("return",b(this._dates)(S(a,r,this.id)));case 5:case"end":return n.stop()}}),n,this)})))},!Array.isArray(i)){n.next=10;break}return n.abrupt("return",Promise.all(i.map(a)));case 10:return n.abrupt("return",a(i));case 11:case"end":return n.stop()}}),n,this)})))}},{key:"_update",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return w("_update(".concat(e,", ").concat(JSON.stringify(t),", ").concat(JSON.stringify(r),")")+this._debugSuffix),n.next=3,this._findOrGet(e,r);case 3:return o=n.sent,e=o[this.id],(i=v.omit(t,this.id))[this.id]=e,n.abrupt("return",this.getModel().setItem(String(e),i,null).then((function(){return i})).then(h(r,this.id)).then(b(this._dates)));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"__removeItem",value:function(e){return f(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getModel(null).removeItem(String(e[this.id]),null);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,o=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return w("_remove(".concat(e,", ").concat(JSON.stringify(t),")")+this._debugSuffix),r.next=3,this._findOrGet(e,t);case 3:if(n=r.sent,!Array.isArray(n)){r.next=9;break}return r.abrupt("return",Promise.all(n.map((function(e){return o.__removeItem(e)}),null)).then(h(t,this.id)));case 9:return r.abrupt("return",this.__removeItem(n).then(h(t,this.id)));case 10:case"end":return r.stop()}}),r,this)})))}}])&&i(t.prototype,r),x}(d);function O(e){return new x(e)}e.exports=O,O.Service=x},8385:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return function(r){var n=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/i;function o(e){var r=t(e);if("object"===r){for(var i in e)e.hasOwnProperty(i)&&(e[i]=o(e[i]));return e}return"string"===r&&n.test(e)?new Date(e):e}return e?Array.isArray(r)?r.map(o):r.data?(r.data=r.data.map(o),r):o(r):r}}},8830:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.OPERATORS=t.FILTERS=void 0;var o=r(3827),i=r(3870);function a(e){if(void 0!==e)return Math.abs(parseInt(e,10))}function s(e,t,r){if(Array.isArray(e))return e.map((function(e){return s(e,t,r)}));if(o._.isObject(e)&&e.constructor==={}.constructor){var n={};return o._.each(e,(function(o,a){if("$"===a[0]){if(void 0!==r[a])return;if(!t.includes(a))throw new i.BadRequest("Invalid query parameter ".concat(a),e)}n[a]=s(o,t,r)})),Object.getOwnPropertySymbols(e).forEach((function(t){n[t]=e[t]})),n}return e}function c(e,t,r,n){return Array.isArray(r)?o._.each(r,(function(r){void 0!==t[r]&&(e[r]=t[r])})):o._.each(r,(function(r,o){var i=r(t[o],n);void 0!==i&&(e[o]=i)})),e}function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.filters,o=void 0===n?{}:n,i=r.operators,a=void 0===i?[]:i,u={};return u.filters=c({},e,t.FILTERS,r),u.filters=c(u.filters,e,o,r),u.query=s(e,t.OPERATORS.concat(a),u.filters),u}t.FILTERS={$sort:function(e){return"object"!==n(t=e)||Array.isArray(t)?t:Object.keys(t).reduce((function(e,r){return e[r]="object"===n(t[r])?t[r]:parseInt(t[r],10),e}),{});var t},$limit:function(e,t){return function(e,t){if(t&&t.default){var r="number"!=typeof e||isNaN(e)?t.default:e,n="number"==typeof t.max?t.max:Number.MAX_VALUE;return Math.min(r,n)}return e}(a(e),t.paginate)},$skip:function(e){return a(e)},$select:function(e){return e}},t.OPERATORS=["$in","$nin","$lt","$lte","$gt","$gte","$ne","$or"],t.default=u,e.exports=Object.assign(u,e.exports)},4120:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.select=t.OPERATORS=t.FILTERS=t.filterQuery=t.AdapterService=void 0;var c=r(3827),u=r(3453);Object.defineProperty(t,"AdapterService",{enumerable:!0,get:function(){return u.AdapterService}});var f=r(8830);Object.defineProperty(t,"filterQuery",{enumerable:!0,get:function(){return s(f).default}}),Object.defineProperty(t,"FILTERS",{enumerable:!0,get:function(){return f.FILTERS}}),Object.defineProperty(t,"OPERATORS",{enumerable:!0,get:function(){return f.OPERATORS}}),a(r(7119),t),t.select=function(e){for(var t=e&&e.query&&e.query.$select,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];Array.isArray(t)&&o.length&&t.push.apply(t,o);var a=function(e){var r;return Array.isArray(t)?(r=c._).pick.apply(r,[e].concat(n(t))):e};return function(e){return Array.isArray(e)?e.map(a):a(e)}}},3453:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AdapterService=void 0;var i=r(3870),a=o(r(8830)),s=function(e,t){if("function"!=typeof e[t])return Promise.reject(new i.NotImplemented("Method ".concat(t," not available")));for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return e[t].apply(e,n)},c={find:!0,get:!1,update:!1},u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({id:"id",events:[],paginate:{},multi:!1,filters:[],whitelist:[]},t)}var t,r;return t=e,(r=[{key:"filterQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==e.paginate?e.paginate:this.options.paginate,n=e.query,o=void 0===n?{}:n,i=Object.assign({operators:this.options.whitelist||[],filters:this.options.filters,paginate:r},t),s=a.default(o,i);return Object.assign(s,{paginate:r})}},{key:"allowsMulti",value:function(e){var t=c[e];if(void 0!==t)return t;var r=this.options.multi;return!0===r||!1===r?r:r.includes(e)}},{key:"find",value:function(e){return s(this,"_find",e)}},{key:"get",value:function(e,t){return s(this,"_get",e,t)}},{key:"create",value:function(e,t){return Array.isArray(e)&&!this.allowsMulti("create")?Promise.reject(new i.MethodNotAllowed("Can not create multiple entries")):s(this,"_create",e,t)}},{key:"update",value:function(e,t,r){return null===e||Array.isArray(t)?Promise.reject(new i.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")):s(this,"_update",e,t,r)}},{key:"patch",value:function(e,t,r){return null!==e||this.allowsMulti("patch")?s(this,"_patch",e,t,r):Promise.reject(new i.MethodNotAllowed("Can not patch multiple entries"))}},{key:"remove",value:function(e,t){return null!==e||this.allowsMulti("remove")?s(this,"_remove",e,t):Promise.reject(new i.MethodNotAllowed("Can not remove multiple entries"))}},{key:"id",get:function(){return this.options.id}},{key:"events",get:function(){return this.options.events}}])&&n(t.prototype,r),e}();t.AdapterService=u},7119:(e,t)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.sorter=t.compare=t.compareArrays=t.compareNSB=void 0,t.compareNSB=function(e,t){return e<t?-1:e>t?1:0},t.compareArrays=function(e,r){var n,o;for(n=0;n<Math.min(e.length,r.length);n+=1)if(0!==(o=t.compare(e[n],r[n])))return o;return t.compareNSB(e.length,r.length)},t.compare=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.compareNSB,o=t,i=o.compareNSB,a=o.compare,s=o.compareArrays;if(void 0===e)return void 0===r?0:-1;if(void 0===r)return void 0===e?0:1;if(null===e)return null===r?0:-1;if(null===r)return null===e?0:1;if("number"==typeof e)return"number"==typeof r?i(e,r):-1;if("number"==typeof r)return"number"==typeof e?i(e,r):1;if("string"==typeof e)return"string"==typeof r?n(e,r):-1;if("string"==typeof r)return"string"==typeof e?n(e,r):1;if("boolean"==typeof e)return"boolean"==typeof r?i(e,r):-1;if("boolean"==typeof r)return"boolean"==typeof e?i(e,r):1;if(e instanceof Date)return r instanceof Date?i(e.getTime(),r.getTime()):-1;if(r instanceof Date)return e instanceof Date?i(e.getTime(),r.getTime()):1;if(Array.isArray(e))return Array.isArray(r)?s(e,r):-1;if(Array.isArray(r))return Array.isArray(e)?s(e,r):1;for(var c=Object.keys(e).sort(),u=Object.keys(r).sort(),f=0,l=0;l<Math.min(c.length,u.length);l+=1)if(0!==(f=a(e[c[l]],r[u[l]])))return f;return i(c.length,u.length)},t.sorter=function(e){var n=Object.keys(e).map((function(t){return{key:t,direction:e[t]}}));return function(e,o){var i,a,s=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(n);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(0!=(i=c.direction*t.compare(e[c.key],o[c.key])))return i}}catch(e){s.e(e)}finally{s.f()}return 0}}},3269:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.enableHooks=t.processHooks=t.getHooks=t.isHookObject=t.convertHookData=t.makeArguments=t.defaultMakeArguments=t.createHookObject=t.ACTIVATE_HOOKS=void 0;var o=r(1163),i=o._,a=i.each,s=i.pick;function c(e){var t=[];return void 0!==e.id&&t.push(e.id),e.data&&t.push(e.data),t.push(e.params||{}),t}function u(e){var t={};return Array.isArray(e)?t={all:e}:"object"!==n(e)?t={all:[e]}:a(e,(function(e,r){t[r]=Array.isArray(e)?e:[e]})),t}function f(e){return"object"===n(e)&&"string"==typeof e.method&&"string"==typeof e.type}t.ACTIVATE_HOOKS=o.createSymbol("__feathersActivateHooks"),t.createHookObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return Object.defineProperty(r,"toJSON",{value:function(){return s(this,"type","method","path","params","id","data","result","error")}}),Object.assign(r,t,{method:e,get path(){var e=t.app,r=t.service;return r&&e&&e.services?Object.keys(e.services).find((function(t){return e.services[t]===r})):null}})},t.defaultMakeArguments=c,t.makeArguments=function(e){switch(e.method){case"find":return[e.params];case"get":case"remove":return[e.id,e.params];case"update":case"patch":return[e.id,e.data,e.params];case"create":return[e.data,e.params]}return c(e)},t.convertHookData=u,t.isHookObject=f,t.getHooks=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.__hooks[r][n]||[],a=t.__hooks[r][n]||[];return o?a.concat(i):i.concat(a)},t.processHooks=function(e,t){var r=this,n=t,o=function(e){if(e){if(!f(e))throw new Error("".concat(n.type," hook for '").concat(n.method,"' method returned invalid hook object"));n=e}return n};return e.reduce((function(e,t){var n=t.bind(r);return e.then((function(e){return n(e)})).then(o)}),Promise.resolve(n)).then((function(){return n})).catch((function(e){throw e.hook=n,e}))},t.enableHooks=function(e,t,r){if("function"==typeof e.hooks)return e;var n={};return r.forEach((function(e){n[e]={}})),Object.defineProperty(e,"__hooks",{configurable:!0,value:n,writable:!0}),Object.assign(e,{hooks:function(e){var r=this;return a(e,(function(e,n){if(!r.__hooks[n])throw new Error("'".concat(n,"' is not a valid hook type"));var o=u(e);a(o,(function(e,r){if("all"!==r&&-1===t.indexOf(r))throw new Error("'".concat(r,"' is not a valid hook method"))})),t.forEach((function(e){var t=r.__hooks[n][e]||(r.__hooks[n][e]=[]);o.all&&t.push.apply(t,o.all),o[e]&&t.push.apply(t,o[e])}))})),this}})}},3827:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.hooks=void 0;var s=i(r(3269));a(r(1163),t),t.hooks=s},1163:(e,t)=>{"use strict";function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.createSymbol=t.makeUrl=t.isPromise=t._=t.stripSlashes=void 0,t.stripSlashes=function(e){return e.replace(/^(\/+)|(\/+)$/g,"")},t._={each:function(e,r){e&&"function"==typeof e.forEach?e.forEach(r):t._.isObject(e)&&Object.keys(e).forEach((function(t){return r(e[t],t)}))},some:function(e,t){return Object.keys(e).map((function(t){return[e[t],t]})).some((function(e){var r=o(e,2),n=r[0],i=r[1];return t(n,i)}))},every:function(e,t){return Object.keys(e).map((function(t){return[e[t],t]})).every((function(e){var r=o(e,2),n=r[0],i=r[1];return t(n,i)}))},keys:function(e){return Object.keys(e)},values:function(e){return t._.keys(e).map((function(t){return e[t]}))},isMatch:function(e,r){return t._.keys(r).every((function(t){return e[t]===r[t]}))},isEmpty:function(e){return 0===t._.keys(e).length},isObject:function(e){return"object"===n(e)&&!Array.isArray(e)&&null!==e},isObjectOrArray:function(e){return"object"===n(e)&&null!==e},extend:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.assign.apply(Object,[e].concat(r))},omit:function(e){for(var r=t._.extend({},e),n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.forEach((function(e){return delete r[e]})),r},pick:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((function(t,r){return void 0!==e[r]&&(t[r]=e[r]),t}),{})},merge:function(e,n){return t._.isObject(e)&&t._.isObject(n)&&Object.keys(n).forEach((function(o){t._.isObject(n[o])?(e[o]||Object.assign(e,r({},o,{})),t._.merge(e[o],n[o])):Object.assign(e,r({},o,n[o]))})),e}},t.isPromise=function(e){return t._.isObject(e)&&"function"==typeof e.then},t.makeUrl=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="function"==typeof r.get?r.get.bind(r):function(){},o=n("env")||"production",i=n("host")||process.env.HOST_NAME||"localhost",a="development"===o||"test"===o||void 0===o?"http":"https",s=n("port")||process.env.PORT||3030,c="development"===o||"test"===o||void 0===o?":".concat(s):"";return e=e||"","".concat(a,"://").concat(i).concat(c,"/").concat(t.stripSlashes(e))},t.createSymbol=function(e){return"undefined"!=typeof Symbol?Symbol(e):e}},3870:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(5985)("@feathersjs/errors");function i(e,t,r,a,s){var c,u,f;(e=e||"Error")instanceof Error?(u=e.message||"Error",e.errors&&(c=e.errors)):"object"===n(e)?(u=e.message||"Error",s=e):u=e,s&&((f=JSON.parse(JSON.stringify(s))).errors?(c=f.errors,delete f.errors):s.errors&&(c=JSON.parse(JSON.stringify(s.errors)))),this.type="FeathersError",this.name=t,this.message=u,this.code=r,this.className=a,this.data=f,this.errors=c||{},o("".concat(this.name,"(").concat(this.code,"): ").concat(this.message)),o(this.errors),Error.captureStackTrace?Error.captureStackTrace(this,i):this.stack=(new Error).stack}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}function s(e,t){i.call(this,e,"BadRequest",400,"bad-request",t)}function c(e,t){i.call(this,e,"NotAuthenticated",401,"not-authenticated",t)}function u(e,t){i.call(this,e,"PaymentError",402,"payment-error",t)}function f(e,t){i.call(this,e,"Forbidden",403,"forbidden",t)}function l(e,t){i.call(this,e,"NotFound",404,"not-found",t)}function p(e,t){i.call(this,e,"MethodNotAllowed",405,"method-not-allowed",t)}function h(e,t){i.call(this,e,"NotAcceptable",406,"not-acceptable",t)}function d(e,t){i.call(this,e,"Timeout",408,"timeout",t)}function v(e,t){i.call(this,e,"Conflict",409,"conflict",t)}function y(e,t){i(this,e,"Gone",410,"gone")}function m(e,t){i.call(this,e,"LengthRequired",411,"length-required",t)}function g(e,t){i.call(this,e,"Unprocessable",422,"unprocessable",t)}function b(e,t){i.call(this,e,"TooManyRequests",429,"too-many-requests",t)}function w(e,t){i.call(this,e,"GeneralError",500,"general-error",t)}function _(e,t){i.call(this,e,"NotImplemented",501,"not-implemented",t)}function S(e,t){i.call(this,e,"BadGateway",502,"bad-gateway",t)}function x(e,t){i.call(this,e,"Unavailable",503,"unavailable",t)}a(i,Error),Object.defineProperty(i.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),a(s,i),a(c,i),a(u,i),a(f,i),a(l,i),a(p,i),a(h,i),a(d,i),a(v,i),a(y,i),a(m,i),a(g,i),a(b,i),a(w,i),a(_,i),a(S,i),a(x,i);var O={FeathersError:i,BadRequest:s,NotAuthenticated:c,PaymentError:u,Forbidden:f,NotFound:l,MethodNotAllowed:p,NotAcceptable:h,Timeout:d,Conflict:v,Gone:y,LengthRequired:m,Unprocessable:g,TooManyRequests:b,GeneralError:w,NotImplemented:_,BadGateway:S,Unavailable:x,400:s,401:c,402:u,403:f,404:l,405:p,406:h,408:d,409:v,410:y,411:m,422:g,429:b,500:w,501:_,502:S,503:x};e.exports=Object.assign({convert:function(e){if(!e)return e;var t=O[e.name],r=t?new t(e.message,e.data):new Error(e.message||e);return"object"===n(e)&&Object.assign(r,e),r}},O)},5985:(e,t,r)=>{var n;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,function(){n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(2501)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2501:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){function t(e){var r,n,i,a=null;function s(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(s.enabled){var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";u++;var o=t.formatters[r];if("function"==typeof o){var a=n[u];e=o.call(i,a),n.splice(u,1),u--}return e})),t.formatArgs.call(i,n);var f=i.log||t.log;f.apply(i,n)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=o,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(s),s}function o(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(n(t.names.map(i)),n(t.skips.map(i).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(8628),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8801:(e,t,r)=>{var n;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,function(){n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(5331)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},5331:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){function t(e){var r,n=null;function i(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(i.enabled){var a=i,s=Number(new Date),c=s-(r||s);a.diff=c,a.prev=r,a.curr=s,r=s,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";u++;var o=t.formatters[r];if("function"==typeof o){var i=n[u];e=o.call(a,i),n.splice(u,1),u--}return e})),t.formatArgs.call(a,n);var f=a.log||t.log;f.apply(a,n)}}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=o,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===n?t.enabled(e):n},set:function(e){n=e}}),"function"==typeof t.init&&t.init(i),i}function o(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(n(t.names.map(i)),n(t.skips.map(i).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},2668:(e,t,r)=>{var n=r(1586),o=r(2044).nanoid,i=r(6106).stripProps;function a(e){return e="string"==typeof e?e:JSON.stringify(e),n(e)}e.exports={genUuid:function(e){return o(e?10:21)},hash:a,hashOfRecord:function(e){return a(i(e,["id","_id"]))}}},1707:(e,t,r)=>{var n=r(2273),o=r(2668),i=r(6106),a=r(8662),s=r(940);e.exports=Object.assign(Object.assign(Object.assign({to:n},o),i),{OptionsProxy:a,stringsToDates:s})},6106:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(361)).default;function a(e){return"object"===n(e)&&!Array.isArray(e)&&null!==e}e.exports={clone:i,isObject:a,stripProps:function e(t,r){r=Array.isArray(r)?r:r||[];var n={};return Object.keys(t).forEach((function(o){if(-1===r.indexOf(o)){var i=t[o];n[o]=a(i)?e(i,r):i}})),n}}},8662:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(8801)("@feathersjs-offline:ownclass:options-proxy"),i={},a=[];e.exports=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t)throw new Error("OptionsProxy: Sorry, you must supply a name to proxy.");this.name=t,i[this.name]=[],a[this.name]=null,o("Constructed proxy for '".concat(this.name))}var t,r;return t=e,(r=[{key:"observe",value:function(e){var t=this;return new Proxy(e,{get:function(e,r){a[t.name]&&(i[t.name][r]||(i[t.name][r]=[]),i[t.name][r].push(a[t.name]));var n=e[r];return o("".concat(t.name,": get(").concat(r,") = ").concat(JSON.stringify(n))),n},set:function(e,r,n){return o("".concat(t.name,": set(").concat(r,", ").concat(JSON.stringify(n),")")),e[r]=n,i[t.name][r]&&i[t.name][r].forEach((function(e){return e()})),!0}})}},{key:"watcher",value:function(e){a[this.name]=e,e(),a[this.name]=null}}])&&n(t.prototype,r),e}()},940:e=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return function(r){var n=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/i;function o(e){var r=t(e);if("object"===r){for(var i in e)e.hasOwnProperty(i)&&(e[i]=o(e[i]));return e}return"string"===r&&n.test(e)?new Date(e):e}return e?Array.isArray(r)?r.map(o):r.data?(r.data=r.data.map(o),r):o(r):r}}},2273:e=>{e.exports=function(e){return e.then((function(e){return[null,e]})).catch((function(e){return[e,null]}))}},4613:(e,t,r)=>{var n=r(1707),o=n.to,i=n.isObject,a=n.stripProps,s=n.genUuid,c=n.hash,u=n.hashOfRecord,f=r(3683),l=f.Owndata,p=f.owndataWrapper,h=r(3153),d=h.Ownnet,v=h.ownnetWrapper;e.exports={to:o,isObject:i,stripProps:a,genUuid:s,hash:c,hashOfRecord:u,Owndata:l,owndataWrapper:p,Ownnet:d,ownnetWrapper:v}},6976:(e,t,r)=>{var n=r(2387);e.exports=n},2387:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){throw new TypeError('"'+e+'" is read-only')}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var v=r(4120),y=d(r(3870)),m=d(r(5288)),g=d(r(8479)),b=d(r(2740)),w=r(1707),_=d(r(2564)),S=r(1707),x=(m.default.LocalForage,r(8801)("@feathersjs-offline:ownclass:service-base")),O={id:"id",store:null,storage:null,useShortUuid:!0,throttle:null,timedSync:864e5,adapterTest:!1,matcher:b.default,sorter:v.sorter,fixedName:"",dates:!1},j={INDEXEDDB:"asyncStorage",WEBSQL:"webSQLStorage",LOCALSTORAGE:"localStorageWrapper"},A="ended",k="@@@syncedAt@@@",C=new Date(0),E=["uuid","updatedAt","onServerAt","deletedAt"],N=0,R=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return Array.isArray(e)?e.map((function(e){return(0,S.stripProps)(e,t)})):(0,S.stripProps)(e,t)}},I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(I,e);var t,n,d,b,S=(d=I,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(d);if(b){var r=p(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function I(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I);var r=Object.assign({},O,e);return x("Constructor started, newOpts = ".concat(JSON.stringify(r),", allOpts = ").concat(Object.keys(r))),(t=S.call(this,r)).wrapperOptions=Object.assign({},r,t.options),t.wrapperOptions.storage=r.storage,x("Constructor ended, options = ".concat(JSON.stringify(t.wrapperOptions),", allOpts = ").concat(Object.keys(r))),t.type="own-class",x("   Setting _select..."),t._select=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return function(r){return v.select.apply(void 0,[e].concat(n,[t.id]))(r)}},t.listening=!1,t.aIP=0,t.pQActive=!1,x("  Done."),f(t,l(t))}return t=I,(n=[{key:"awaitSetup",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._setupPerformed===A){e.next=6;break}return x("awaitSetup..."),e.next=4,this.delay(200);case 4:e.next=0;break;case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_setup",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x("_SetUp('".concat(t,"') started")),r.abrupt("return",this.setup(e,t));case 2:case"end":return r.stop()}}),r,this)})))}},{key:"setup",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,i,c,u,f,l,p,h,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=this,!this._setupPerformed){n.next=3;break}return n.abrupt("return");case 3:if(x("SetUp('".concat(t,"') started")),this._setupPerformed="started",this.options=Object.assign({},this.wrapperOptions),x("   Options '".concat(JSON.stringify(this.options),"')")),this._dates=this.options.dates,this.thisName=""!==this.options.fixedName?this.options.fixedName:"".concat(this.type,"_offline_").concat(N++,"_").concat(t),x("SetUp('".concat(t,"') before old app...")),(i=e.service(t))!==o&&(this.remoteService=i,e.use(t,o)),"function"!=typeof this.remoteService.setup){n.next=17;break}return x("   Setting up remote service..."),n.next=16,this.remoteService.setup(e,t);case 16:this.options=Object.assign({},this.wrapperOptions,this.options);case 17:return x("SetUp('".concat(t,"') after old app...")),this.name=t,this.localServiceName=this.thisName+"_local",this.localServiceQueue=this.thisName+"_queue",x("  Setting up storage..."),c=null,this.options.storage&&!Array.isArray(this.options.storage)&&"ASYNCSTORAGE"===this.options.storage.toUpperCase()?(c=g.default,this.storage=r.g.AsyncStorage,this.options.throttle=1):(c=m.default,u=this.options.storage?this.options.storage:"LOCALSTORAGE",Array.isArray(u)||(u=[u]),this.storage=u.map((function(e){var t=j[e.toUpperCase()];if(!t)throw new y.default.NotFound("Illegal driver type '".concat(e,"' found. Please use either a combination of 'LOCALSTORAGE', 'WEBSQL', and 'INDEXEDDB' or for React 'ASYNCSTORAGE'."));return t}))),x("   Storage=".concat(this.storage)),this.store=this.options.store?this.options.store:[],this.localSpecOptions={name:this.localServiceName,storage:this.storage,store:this.store,reuseKeys:""!==this.options.fixedName,events:["synced"],dates:this.options.dates},f=Object.assign({},this.options,this.localSpecOptions),l={id:"id",name:this.localServiceQueue,storage:this.storage,paginate:null,multi:!0,reuseKeys:""!==this.options.fixedName},x("   Setting up service '".concat(this.localServiceName,"' with options '").concat(JSON.stringify(f),"'...")),e.use(this.localServiceName,c(f)),x("   Setting up service '".concat(this.localServiceQueue,"' with options '").concat(JSON.stringify(l),"'...")),e.use(this.localServiceQueue,c(l)),this.localService=e.service(this.localServiceName),this.localQueue=e.service(this.localServiceQueue),x("   Adding syncDB..."),e.use(k,c({name:k,storage:this.storage,reuseKeys:!0})),this.syncDB=e.service(k),x("   AdapterTest=".concat(this.options.adapterTest,"...")),this.options.adapterTest?(p=Object.assign([],E),(h=p.findIndex((function(e){return e===o.id})))>-1&&p.splice(h,1),this._strip=R.apply(void 0,function(e){if(Array.isArray(e))return s(e)}(b=p)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||a(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):this._strip=function(e){return e},x("   Determine latest registered sync timestamp (if any)..."),d=this.getSyncItem(!1),this.syncedAt=new Date(d||C).toISOString(),x("   Sync timestamp is found... ".concat(this.syncedAt)),d=this.setSyncItem(this.syncedAt),x("   Sync timestamp is stored!"),x("   Restore options..."),this.options=Object.assign({},this.wrapperOptions),this.remoteService instanceof v.AdapterService||(x("   Adding options listener..."),this._listenOptions()),this.options.timedSync&&Number.isInteger(this.options.timedSync)&&this.options.timedSync>0&&(x("   Setting up timed-sync every ".concat(JSON.stringify(o.options.timedSync)," ms...")),this._timedSyncHandle=setInterval((function(){return o.sync()}),o.options.timedSync)),x("   Options '".concat(JSON.stringify(this.options),"')")),x("  Done."),this._setupPerformed=A,n.abrupt("return",!0);case 54:case"end":return n.stop()}var b}),n,this)})))}},{key:"getSyncItem",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.thisName+"_syncedAt",r=this.syncDB.get(t).then((function(e){return e})).catch((function(r){if(e)throw new y.default.GeneralError("Error get syncDB: key=".concat(t," ").concat(r.name,", ").concat(r.message))}));return r?r.value:C.toISOString()}},{key:"setSyncItem",value:function(e){var t=this,r=this.thisName+"_syncedAt";return this.syncDB.get(r).then((function(n){return t.syncDB.update(r,{id:r,value:e}).catch((function(e){throw new y.default.GeneralError("Error updating syncDB: id=".concat(id," ").concat(e.name,", ").concat(e.message))})),n})).catch((function(n){return t.syncDB.create({id:r,value:e}).catch((function(t){throw new y.default.GeneralError("Error creating syncDB: key=".concat(r,", value=").concat(e,": ").concat(t.name,", ").concat(t.message))}))}))}},{key:"delay",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout((function(){t(!0)}),e)})));case 1:case"end":return t.stop()}}),t)})))}},{key:"_listenOptions",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,r=new w.OptionsProxy(t.thisName),this.options=r.observe(Object.assign({},t.remote.options?t.remote.options:{},t.options)),r.watcher((function(){return h(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.remote){e.next=6;break}return x("REMOTE STILL UNDEFINED"),e.next=4,this.delay(10);case 4:e.next=0;break;case 6:if(void 0!==t.local){e.next=12;break}return x("LOCAL STILL UNDEFINED"),e.next=10,this.delay(10);case 10:e.next=6;break;case 12:t.remote.options=Object.assign({},t.remote.options,t.options),t.local.options=Object.assign({},t.options,t.localSpecOptions);case 14:case"end":return e.stop()}}),e,this)})))}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getEntries",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Calling getEntries(".concat(JSON.stringify(e),"}), thisName=").concat(this.thisName)),t.next=3,this.awaitSetup();case 3:return r=[],t.next=6,this.localService.getEntries(e).then((function(e){r=e}));case 6:return t.abrupt("return",Promise.resolve(r).then(this._strip).then(this._select(e)).then((0,w.stringsToDates)(this._dates)).then((function(e){return x("getEntries: result=".concat(JSON.stringify(e))),e})));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"get",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x("Calling get(".concat(JSON.stringify(e),", ").concat(JSON.stringify(t),")")),r.next=3,this.awaitSetup();case 3:return r.abrupt("return",this._get(e,t));case 4:case"end":return r.stop()}}),r,this)})))}},{key:"_get",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x("Calling _get(".concat(JSON.stringify(e),", ").concat(JSON.stringify(t),"})")),r.next=3,this.awaitSetup();case 3:return r.next=5,this.localService.get(e,t).then(this._strip).then(this._select(t)).then((0,w.stringsToDates)(this._dates)).catch((function(e){throw e}));case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"find",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Calling find(".concat(JSON.stringify(e),"})")),t.t0=x,t.t1="  rows=",t.t2=JSON,t.next=6,this.getEntries();case 6:return t.t3=t.sent,t.t4=t.t2.stringify.call(t.t2,t.t3),t.t5=t.t1.concat.call(t.t1,t.t4),(0,t.t0)(t.t5),t.next=12,this.awaitSetup();case 12:return t.abrupt("return",this._find(e));case 13:case"end":return t.stop()}}),t,this)})))}},{key:"_find",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x("Calling _find(".concat(JSON.stringify(e),"})")),t.next=3,this.awaitSetup();case 3:return t.abrupt("return",this.localService.find(e).then(this._strip).then(this._select(e)).then((0,w.stringsToDates)(this._dates)));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"create",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x("Calling create(".concat(JSON.stringify(e),", ").concat(JSON.stringify(t),")")),r.next=3,this.awaitSetup();case 3:if(!Array.isArray(e)||this.allowsMulti("create")){r.next=5;break}return r.abrupt("return",Promise.reject(new y.default.MethodNotAllowed("Creating multiple without option 'multi' set")));case 5:return r.abrupt("return",this._create(e,t));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"_create",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return h(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,a,s,c,u,f,l,p,d,v,m=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x("Calling _create(".concat(JSON.stringify(e),", ").concat(JSON.stringify(t),", ").concat(r,")")),n.next=3,this.awaitSetup();case 3:if(o=this,!Array.isArray(e)){n.next=10;break}if(this.allowsMulti("create")){n.next=8;break}return n.abrupt("return",Promise.reject(new y.default.MethodNotAllowed("Creating multiple without option 'multi' set")));case 8:return a=new Date,n.abrupt("return",Promise.all(e.map((function(e){return o._create(e,t,a)}))));case 10:return r=r||new Date,"uuid"in(s=(0,w.clone)(e))||(s.uuid=(0,w.genUuid)(this.options.useShortUuid)),"updatedAt"in s||(s.updatedAt=r),s.onServerAt=C,n.next=17,(0,w.to)(this.localService.find({query:{uuid:s.uuid}}));case 17:if(c=n.sent,u=i(c,2),f=u[0],!(l=u[1])||!l.length){n.next=23;break}throw new y.default.BadRequest("Optimistic create requires unique uuid. (".concat(this.type,") res=").concat(JSON.stringify(l)));case 23:return(0,w.clone)(t),this.disallowInternalProcessing("_create"),n.next=27,this._addQueuedEvent("create",s,(0,w.clone)(s),t);case 27:return p=n.sent,n.next=30,(0,w.to)(this.localService.create(s,(0,w.clone)(t)));case 30:if(d=n.sent,v=i(d,2),f=v[0],!(l=v[1])){n.next=38;break}this.remoteService.create(l,(0,w.clone)(t)).then((function(e){return h(m,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.to)(o._removeQueuedEvent("_create0",p,s,s.updatedAt));case 2:return t.next=4,o._patchIfNotRemoved(e[o.id],e);case 4:return o.allowInternalProcessing("_create0"),t.next=7,(0,w.to)(o._processQueuedEvents());case 7:case"end":return t.stop()}}),t)})))})).catch((function(e){return h(m,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("Timeout"===e.name){r.next=5;break}return r.next=3,(0,w.to)(o._removeQueuedEvent("_create1",p,e.message,s.updatedAt));case 3:return r.next=5,(0,w.to)(o.localService.remove(l[o.id],t));case 5:o.allowInternalProcessing("_create1");case 6:case"end":return r.stop()}}),r)})))})),n.next=42;break;case 38:return n.next=40,(0,w.to)(this._removeQueuedEvent("_create2",p,s,s.updatedAt));case 40:throw this.allowInternalProcessing("_create2"),f;case 42:return n.abrupt("return",Promise.resolve(l).then(this._strip).then(this._select(t)).then((0,w.stringsToDates)(this._dates)));case 43:case"end":return n.stop()}}),n,this)})))}},{key:"update",value:function(e,t,r){return h(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x("Calling update(".concat(e,", ").concat(JSON.stringify(t),", ").concat(JSON.stringify(r),"})")),n.next=3,this.awaitSetup();case 3:if(null!==e&&!Array.isArray(t)){n.next=5;break}return n.abrupt("return",Promise.reject(new y.default.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")));case 5:return n.abrupt("return",this._update(e,t,r));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"_update",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,a,s,c,u,f,l,p,d,v,m,g=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x("Calling _update(".concat(e,", ").concat(JSON.stringify(t),", ").concat(JSON.stringify(r),"})")),n.next=3,this.awaitSetup();case 3:if(o=this,null!==e&&!Array.isArray(t)){n.next=6;break}return n.abrupt("return",Promise.reject(new y.default.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")));case 6:return n.next=8,(0,w.to)(this.localService._get(e));case 8:if(a=n.sent,s=i(a,2),c=s[0],(u=s[1])&&u!=={}){n.next=14;break}throw new y.default.NotFound("Trying to update non-existing ".concat(this.id,"=").concat(e,". (").concat(this.type,") err=").concat(JSON.stringify(c.name)));case 14:return f=(0,w.clone)(u),l=f.uuid,(p=(0,w.clone)(t)).uuid=l,p.updatedAt=new Date,p.onServerAt=C,this.disallowInternalProcessing("_update"),n.next=23,this._addQueuedEvent("update",p,e,(0,w.clone)(p),r);case 23:return d=n.sent,n.next=26,(0,w.to)(this.localService.update(e,p,(0,w.clone)(r)));case 26:if(v=n.sent,m=i(v,2),c=m[0],u=m[1],c){n.next=34;break}this.remoteService.update(e,u,(0,w.clone)(r)).then((function(e){return h(g,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.to)(o._removeQueuedEvent("_update0",d,p,u.updatedAt));case 2:return t.next=4,o._patchIfNotRemoved(e[o.id],e);case 4:return o.allowInternalProcessing("_update0"),t.next=7,(0,w.to)(o._processQueuedEvents());case 7:case"end":return t.stop()}}),t)})))})).catch((function(t){return h(g,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("Timeout"!==t.name){r.next=4;break}x("_update TIMEOUT: ".concat(t.name,", ").concat(t.message)),r.next=9;break;case 4:return x("_update ERROR: ".concat(t.name,", ").concat(t.message)),r.next=7,(0,w.to)(o._removeQueuedEvent("_update1",d,p,u.updatedAt));case 7:return r.next=9,(0,w.to)(o.localService.patch(e,f));case 9:o.allowInternalProcessing("_update1");case 10:case"end":return r.stop()}}),r)})))})),n.next=38;break;case 34:return n.next=36,(0,w.to)(this._removeQueuedEvent("_update2",d,p,p.updatedAt));case 36:throw this.allowInternalProcessing("_update2"),c;case 38:return n.abrupt("return",Promise.resolve(p).then(this._strip).then(this._select(r)).then((0,w.stringsToDates)(this._dates)));case 39:case"end":return n.stop()}}),n,this)})))}},{key:"patch",value:function(e,t,r){return h(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x("Calling patch(".concat(e,", ").concat(JSON.stringify(t),", ").concat(JSON.stringify(r),"})")),n.next=3,this.awaitSetup();case 3:if(null!==e||this.allowsMulti("patch")){n.next=5;break}return n.abrupt("return",Promise.reject(new y.default.MethodNotAllowed("Can not patch multiple entries")));case 5:return n.abrupt("return",this._patch(e,t,r));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"_patch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return h(this,void 0,void 0,regeneratorRuntime.mark((function a(){var s,c,u,f,l,p,d,v,m,g,b=this;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return x("Calling _patch(".concat(e,", ").concat(JSON.stringify(t),", ").concat(JSON.stringify(r),"})")),a.next=3,this.awaitSetup();case 3:if(s=this,null!==e){a.next=9;break}if(this.allowsMulti("patch")){a.next=8;break}throw new y.default.MethodNotAllowed("Patching multiple without option 'multi' set");case 8:return a.abrupt("return",this.find(r).then((function(e){var n=e.data?e.data:e;Array.isArray(n)||(o("res"),n=[n]);var i=(new Date).toISOString();return Promise.all(n.map((function(e){return s._patch(e[b.id],t,r,i)})))})));case 9:return n=n||new Date,a.next=12,(0,w.to)(this.localService._get(e));case 12:if(c=a.sent,u=i(c,2),f=u[0],(l=u[1])&&l!=={}){a.next=18;break}throw f;case 18:return p=(0,w.clone)(l),(d=Object.assign({},p,t)).onServerAt=C,d.updatedAt=n,this.disallowInternalProcessing("_patch"),a.next=25,this._addQueuedEvent("patch",d,e,(0,w.clone)(d),r);case 25:return v=a.sent,a.next=28,(0,w.to)(this.localService.patch(e,d,(0,w.clone)(r)));case 28:if(m=a.sent,g=i(m,2),f=g[0],!(l=g[1])){a.next=36;break}this.remoteService.patch(e,l,(0,w.clone)(r)).then((function(e){return h(b,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.to)(s._removeQueuedEvent("_patch0",v,e,l.updatedAt));case 2:return t.next=4,s._patchIfNotRemoved(e[s.id],e);case 4:return s.allowInternalProcessing("_patch0"),t.next=7,(0,w.to)(s._processQueuedEvents());case 7:case"end":return t.stop()}}),t)})))})).catch((function(t){return h(b,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("Timeout"!==t.name){r.next=4;break}x("_patch TIMEOUT: ".concat(t.name,", ").concat(t.message)),r.next=9;break;case 4:return x("_patch ERROR: ".concat(t.name,", ").concat(t.message)),r.next=7,(0,w.to)(s._removeQueuedEvent("_patch1",v,d,l.updatedAt));case 7:return r.next=9,(0,w.to)(s.localService.patch(e,p));case 9:s.allowInternalProcessing("_patch1");case 10:case"end":return r.stop()}}),r)})))})),a.next=40;break;case 36:return a.next=38,(0,w.to)(this._removeQueuedEvent("_patch2",v,d,d.updatedAt));case 38:throw this.allowInternalProcessing("_patch2"),f;case 40:return a.abrupt("return",Promise.resolve(d).then(this._strip).then(this._select(r)).then((0,w.stringsToDates)(this._dates)));case 41:case"end":return a.stop()}}),a,this)})))}},{key:"_patchIfNotRemoved",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.localService.patch(e,t).catch((function(e){return Promise.resolve(!0)})));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"remove",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x("Calling remove(".concat(e,", ").concat(JSON.stringify(t),"})")),r.next=3,this.awaitSetup();case 3:if(null!==e||this.allowsMulti("remove")){r.next=5;break}return r.abrupt("return",Promise.reject(new y.default.MethodNotAllowed("Can not remove multiple entries")));case 5:return r.abrupt("return",this._remove(e,t));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"_remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,a,s,c,u,f,l,p,d,v=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x("Calling _remove(".concat(e,", ").concat(JSON.stringify(t),"})")),r.next=3,this.awaitSetup();case 3:if(n=this,null!==e){r.next=9;break}if(this.allowsMulti("remove")){r.next=8;break}throw new y.default.MethodNotAllowed("Removing multiple without option 'multi' set");case 8:return r.abrupt("return",this.find(t).then((function(e){var r=e.data?e.data:e;return Array.isArray(r)||(o("res"),r=[r]),Promise.all(r.map((function(e){return n._remove(e[v.id],t)})))})));case 9:return r.next=11,(0,w.to)(this.localService._get(e));case 11:if(a=r.sent,s=i(a,2),c=s[0],(u=s[1])&&u!=={}){r.next=17;break}throw new y.default.BadRequest("Trying to remove non-existing ".concat(this.id,"=").concat(e,". (").concat(this.type,") err=").concat(JSON.stringify(c),", res=").concat(JSON.stringify(u)));case 17:return f=(0,w.clone)(u),this.disallowInternalProcessing("_remove"),r.next=21,this._addQueuedEvent("remove",f,e,t);case 21:return l=r.sent,r.next=24,(0,w.to)(this.localService.remove(e,(0,w.clone)(t)));case 24:if(p=r.sent,d=i(p,2),c=d[0],u=d[1],c){r.next=32;break}this.remoteService.remove(e,(0,w.clone)(t)).then((function(e){return h(v,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.to)(n._removeQueuedEvent("_remove0",l,f,null));case 2:return n.allowInternalProcessing("_remove0"),e.next=5,(0,w.to)(n._processQueuedEvents());case 5:case"end":return e.stop()}}),e)})))})).catch((function(e){return h(v,void 0,void 0,regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Timeout"!==e.name){t.next=4;break}x("_remove TIMEOUT: ".concat(e.name,", ").concat(e.message)),t.next=23;break;case 4:return x("_remove ERROR: ".concat(e.name,", ").concat(e.message,"\nbeforeRecord = ").concat(JSON.stringify(f))),t.prev=5,t.next=8,(0,w.to)(n._removeQueuedEvent("_remove1",l,f,null));case 8:return t.next=10,(0,w.to)(n.localService.create(f,null));case 10:if(r=t.sent,o=i(r,2),a=o[0],o[1],!a){t.next=16;break}throw new y.default.GeneralError("ERROR re-creating record. ".concat(a.name,", ").concat(a.message));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(5),x("_create re-created record: ERROR re-creating record. ".concat(t.t0.name,", ").concat(t.t0.message));case 21:x("_create re-created record: rec=".concat(JSON.stringify(f)));case 23:n.allowInternalProcessing("_remove1");case 24:case"end":return t.stop()}}),t,null,[[5,18]])})))})),r.next=36;break;case 32:return r.next=34,(0,w.to)(this._removeQueuedEvent("_remove2",l,f,null));case 34:throw this.allowInternalProcessing("_remove2"),c;case 36:return r.abrupt("return",Promise.resolve(f).then(this._strip).then(this._select(t)).then((0,w.stringsToDates)(this._dates)));case 37:case"end":return r.stop()}}),r,this)})))}},{key:"allowInternalProcessing",value:function(e){x("allowInternalProcessing: ".concat(e," ").concat(this.thisName," ").concat(this.aIP-1)),this.aIP--}},{key:"disallowInternalProcessing",value:function(e){x("disallowInternalProcessing: ".concat(e," ").concat(this.thisName," ").concat(this.aIP+1)),this.aIP++}},{key:"internalProcessingAllowed",value:function(){return 0===this.aIP}},{key:"_addQueuedEvent",value:function(e,t,r,n,o){return h(this,void 0,void 0,regeneratorRuntime.mark((function a(){var s,c,u,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return x("addQueuedEvent '".concat(e,"' entered")),a.next=3,(0,w.to)(this.localQueue.create({eventName:e,record:t,arg1:r,arg2:n,arg3:o}));case 3:if(s=a.sent,c=i(s,2),u=c[0],f=c[1],!u){a.next=9;break}throw new y.default.GeneralError("Could not write '".concat(JSON.stringify({eventName:e,record:t,arg1:r,arg2:n,arg3:o}),"' to localQueue (").concat(this.localServiceQueue,"), err=").concat(u.name,", ").concat(u.message));case 9:return x("addQueuedEvent added: ".concat(JSON.stringify(f))),a.abrupt("return",Promise.resolve(f.id));case 11:case"end":return a.stop()}}),a,this)})))}},{key:"_removeQueuedEvent",value:function(e,t,r,n){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x("removeQueuedEvent '".concat(e,"' entered")),r.next=3,(0,w.to)(this.localQueue.remove(t));case 3:return n=r.sent,(o=i(n,2))[0],a=o[1],r.abrupt("return",Promise.resolve(a));case 8:case"end":return r.stop()}}),r,this)})))}},{key:"_processQueuedEvents",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new y.default.NotImplemented("_processQueuedEvents must be implemented!!!");case 1:case"end":return e.stop()}}),e)})))}},{key:"sync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,o,a,s,c,u,f,l,p,d=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.internalProcessingAllowed()){r.next=5;break}return r.next=3,new Promise((function(e){setTimeout((function(){e(!0)}),200)}));case 3:r.next=0;break;case 5:return r.next=7,this._getSyncOptions(e,t);case 7:return n=r.sent,x("".concat(this.type,".sync(").concat(JSON.stringify(n),") started...")),o=this,a=!0,r.next=13,(0,w.to)((0,_.default)(this.remoteService,n));case 13:if(s=r.sent,c=i(s,2),u=c[0],f=c[1],!u){r.next=21;break}return"timeout"===u.className?x("  sync TIMEOUT: ".concat(JSON.stringify(u))):x("  sync ERROR: ".concat(JSON.stringify(u),", err=").concat(u.name,", ").concat(u.message)),this.localService.emit("synced",!1),r.abrupt("return",!1);case 21:return x("  Applying received snapshot data... (".concat(f.length," items)")),l=C.toISOString(),r.next=25,Promise.all(f.map((function(e){return h(d,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,c,u,f,p,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.to)(o.localService.get(e[o.id]));case 2:if(r=t.sent,n=i(r,2),a=n[0],!n[1]){t.next=26;break}if(l=l<e.onServerAt?e.onServerAt:l,!e.deletedAt){t.next=17;break}return t.next=11,(0,w.to)(o.localService.remove(e[o.id]));case 11:s=t.sent,c=i(s,2),a=c[0],c[1],t.next=23;break;case 17:return t.next=19,(0,w.to)(o.localService.patch(e[o.id],e));case 19:u=t.sent,f=i(u,2),a=f[0],f[1];case 23:return t.abrupt("return",a?C.toISOString():e.onServerAt);case 26:if(e.deletedAt){t.next=35;break}return l=l<e.onServerAt?e.onServerAt:l,t.next=30,(0,w.to)(o.localService.create(e));case 30:return p=t.sent,h=i(p,2),a=h[0],h[1],t.abrupt("return",a?C.toISOString():e.onServerAt);case 35:case"end":return t.stop()}}),t)})))})));case 25:if(p=r.sent,l=p.reduce((function(e,t){return e<t?t:e}),o.syncedAt),this.syncedAt=l,f.length&&o.setSyncItem(this.syncedAt),!a){r.next=37;break}case 30:return r.next=32,o._processQueuedEvents();case 32:if(r.sent){r.next=37;break}return r.next=35,new Promise((function(e){setTimeout((function(){e(!0)}),200)}));case 35:r.next=30;break;case 37:return o.localService.emit("synced",a),r.abrupt("return",a);case 40:case"end":return r.stop()}}),r,this)})))}},{key:"_getSyncOptions",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,o,i,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={offline:{_forceAll:e}},o=e&&!t?n:{},i=Object.assign({},t?{}:{offline:o},{$sort:{onServerAt:1}}),a=e?C.toISOString():this.syncedAt,a=t?{$gte:a}:a,i.onServerAt=a,r.abrupt("return",i);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"remote",get:function(){return this.remoteService},set:function(e){throw new y.default.Forbidden("You cannot change value of remote!")}},{key:"local",get:function(){return this.localService},set:function(e){throw new y.default.Forbidden("You cannot change value of local!")}},{key:"queue",get:function(){return this.localQueue},set:function(e){throw new y.default.Forbidden("You cannot change value of queue!")}}])&&c(t.prototype,n),I}(v.AdapterService);e.exports=I},3683:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},p=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=r(3827),v=h(r(3870)),y=r(1707),m=h(r(6976)),g=r(8801)("@feathersjs-offline:owndata:service-wrapper"),b=new Date(0).toISOString(),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,r,n,p,h=(n=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(p){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function d(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),g("Constructor started, opts = ".concat(JSON.stringify(e))),(r=h.call(this,e)).type="own-data",r.__forTestingOnly=u((t=c(r),f(d.prototype)),"_processQueuedEvents",t),g("  Done."),s(r,c(r))}return t=d,(r=[{key:"_processQueuedEvents",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,c,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g("processQueuedEvents (".concat(this.type,") entered")),t=this,this.internalProcessingAllowed()&&!this.pQActive){e.next=4;break}return e.abrupt("return",!1);case 4:return this.pQActive=!0,e.next=7,(0,y.to)(this.localQueue.getEntries({query:{$sort:(h={},d=this.id,1,d in h?Object.defineProperty(h,d,{value:1,enumerable:!0,configurable:!0,writable:!0}):h[d]=1,h)}}));case 7:if(r=e.sent,p=2,n=function(e){if(Array.isArray(e))return e}(f=r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(f,p)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(f,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1],!i&&0!==a.length){e.next=14;break}return this.pQActive=!1,e.abrupt("return",!0);case 14:g("  processing ".concat(a.length," queued entries...")),s=!1,c=regeneratorRuntime.mark((function e(){var r,n,o,i,c,f,p,h,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.shift(),o=(n=r).eventName,i=n.record,c=n.arg1,f=n.arg2,p=n.arg3,h=void 0===p?null:p,d=n.id,v=x(t.id,o,i,c,f,h,d),o=v.eventName,r=v.el,c=v.arg1,f=v.arg2,h=v.arg3,d=v.id,g("    processing: event=".concat(o,", arg1=").concat(JSON.stringify(c),", arg2=").concat(JSON.stringify(f),", arg3=").concat(JSON.stringify(h))),e.next=12,t.remoteService[o](c,f,h).then((function(e){return l(u,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,y.to)(t.localQueue.remove(d));case 2:if("remove"===o){r.next=5;break}return r.next=5,(0,y.to)(t.localService.patch(e[t.id],e));case 5:case"end":return r.stop()}}),r)})))})).catch((function(e){return l(u,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g("catch: record=".concat(JSON.stringify(i),", BOT=").concat(JSON.stringify(b),", event=").concat(o,", id=").concat(d)),i.onServerAt!==b||"remove"!==o){e.next=6;break}return e.next=4,(0,y.to)(t.localQueue.remove(d));case 4:e.next=7;break;case 6:s=!0;case 7:case"end":return e.stop()}}),e)})))}));case 12:case"end":return e.stop()}}),e)}));case 17:if(!a.length||s){e.next=21;break}return e.delegateYield(c(),"t0",19);case 19:e.next=17;break;case 21:return g("  processing ended, stop=".concat(s)),this.pQActive=!1,e.abrupt("return",!s);case 24:case"end":return e.stop()}var f,p,h,d}),e,this)})))}}])&&i(t.prototype,r),d}(m.default);function _(e){return new w(e)}var S=_;function x(e,t,r,n,o,i,a){var s=r[e];switch(t){case"create":return{eventName:t,el:r,arg1:r,arg2:o,arg3:{},id:a};case"update":return{eventName:t,el:r,arg1:n,arg2:o,arg3:i,id:a};case"patch":return{eventName:t,el:r,arg1:s,arg2:r,arg3:i,id:a};case"remove":return{eventName:t,el:r,arg1:s,arg2:{},arg3:i,id:a}}}e.exports={init:_,Owndata:S,owndataWrapper:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(g("owndataWrapper started on path '".concat(t,"' with options '").concat(JSON.stringify(r),"'")),!(e&&e.version&&e.service&&e.services))throw new v.default.Unavailable("The FeathersJS app must be supplied as first argument");var n=(0,d.stripSlashes)(t),o=e.service(n);if(void 0===o)throw new v.default.Unavailable("No prior service registered on path '".concat(n,"'"));var i=(0,y.clone)(o.options||{}),a=i,s=(a.storage,p(i,["storage"]));i=s;var c=Object.assign({},i,r);e.use(n,S(c));var u=e.service(n);return u.options=c,u._listenOptions(),u}},_.Service=w},3153:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},h=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var v=r(3827),y=d(r(3870)),m=r(1707),g=d(r(6976)),b=r(8801)("@feathersjs-offline:ownnet:service-wrapper"),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,r,n,i,h=(n=d,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(n);if(i){var r=l(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return c(this,e)});function d(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),b("Constructor started, opts = ".concat(JSON.stringify(e))),(r=h.call(this,e)).type="own-net",r.__forTestingOnly=f((t=u(r),l(d.prototype)),"_processQueuedEvents",t),b("  Done."),r}return t=d,(r=[{key:"_processQueuedEvents",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,c,u,f,l,h,d,v,y,g,w,_,S,O,j,A=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b("processQueuedEvents (".concat(this.type,") entered (IPallowed=").concat(this.internalProcessingAllowed(),", pQActive=").concat(this.pQActive,")")),this.internalProcessingAllowed()&&!this.pQActive){e.next=4;break}return b("processingQueuedEvents: leaving  internalProcessing (aIP=".concat(this.aIP,"), pQActive=").concat(this.pQActive)),e.abrupt("return",!1);case 4:return this.pQActive=!0,e.next=7,(0,m.to)(this.localQueue.getEntries({query:{$sort:{uuid:1,updatedAt:1}}}));case 7:if(t=e.sent,r=o(t,2),n=r[0],i=r[1],!n&&0!==i.length){e.next=14;break}return this.pQActive=!1,e.abrupt("return",!0);case 14:this.disallowInternalProcessing(),b("  processing ".concat(i.length," queued entries...")),a=this,s=0,c=0,u=[],f=[],l=[];case 23:for(;s<i.length&&i[s].record.uuid===i[c].record.uuid;)w=i[s],h=w.eventName,d=w.record,v=w.arg1,y=w.arg2,g=w.arg3,u.push(i[s].id),l.push(h),"remove"===h&&(f.push(x(this.id,h,d,v,y,g,u)),l=[],u=[],c=s+1),s++;if(!u.length){e.next=41;break}if(_=void 0,"create"===i[c].eventName){e.next=36;break}return e.next=30,(0,m.to)(a.localService.get(i[c].record[this.id]));case 30:S=e.sent,(O=o(S,2))[0],_=O[1],e.next=37;break;case 36:_=i[c].record;case 37:j=l.includes("create")?"create":"update",f.push(x(this.id,j,_,v,y,g,u)),s<i.length&&(l=[i[s].eventName],u=[i[s].id]),c=s++;case 41:if(s<i.length){e.next=23;break}case 42:return b("netOps = ".concat(JSON.stringify(f))),e.next=46,Promise.all(f.map((function(e){return p(A,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,o,i,s,c,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.eventName,e.el,n=e.arg1,o=e.arg2,i=e.arg3,s=e.ids,c="  remoteService['".concat(r,"'](").concat(JSON.stringify(n),", ").concat(JSON.stringify(o),", ").concat(JSON.stringify(i),")"),b(c),t.next=5,a.remoteService[r](n,o,i).then((function(e){return p(u,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.localQueue.remove(null,{query:{id:{$in:(0,m.clone)(s)}}}).then((function(t){return p(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("remove"===r){t.next=4;break}return t.next=3,a.localService.patch(e[a.id],e).catch((function(t){return b(c+" (copy)\n  localService.patch(".concat(JSON.stringify(e[a.id]),", ").concat(JSON.stringify(e),")")),!0})).then((function(){return!1}));case 3:return t.abrupt("return",t.sent);case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})))})).catch((function(e){return b("err2=".concat(e.name,", ").concat(e.message)),!1}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))})));case 46:return e.sent,this.allowInternalProcessing(),this.pQActive=!1,e.abrupt("return",!0);case 50:case"end":return e.stop()}}),e,this)})))}}])&&a(t.prototype,r),d}(g.default);function _(e){return new w(e)}var S=_;function x(e,t,r,n,o,i,a){var s=r[e];switch(t){case"create":return{eventName:t,el:r,arg1:r,arg2:o,arg3:{},ids:a};case"update":return{eventName:t,el:r,arg1:n,arg2:o,arg3:i,ids:a};case"patch":return{eventName:t,el:r,arg1:s,arg2:r,arg3:i,ids:a};case"remove":return{eventName:t,el:r,arg1:s,arg2:{},arg3:i,ids:a}}}e.exports={init:_,Ownnet:S,ownnetWrapper:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(b("ownnetWrapper started on path '".concat(t,"' with options '").concat(JSON.stringify(r),"'")),!(e&&e.version&&e.service&&e.services))throw new y.default.Unavailable("The FeathersJS app must be supplied as first argument");var n=(0,v.stripSlashes)(t),o=e.service(n);if(void 0===o)throw new y.default.Unavailable("No prior service registered on path '".concat(n,"'"));var i=(0,m.clone)(o.options||{}),a=i,s=(a.storage,h(i,["storage"]));i=s;var c=Object.assign({},i,r);e.use(n,S(c));var u=e.service(n);return u.options=c,u._listenOptions(),u}},_.Service=w},2564:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=(0,n(r(8801)).default)("@feathersjs-offline:snapshot");e.exports=function(e,t){o("snapshot start: ".concat(JSON.stringify(t)));var r,n=Object.assign({},{$skip:0,$limit:200},t);return e.find({query:n}).then((function(e){if(o("snapshot query = ".concat(JSON.stringify(n),", read ").concat((e.data||e).length," records\n\n             snapshot   read ").concat(JSON.stringify(e.data||e))),!e.data)return e;var t=e.total,a=e.limit,s=e.skip,c=e.data;return r=c,s+c.length<t?i(s+a):r}));function i(t){return n.$skip=t,e.find({query:n}).then((function(e){var t=e.total,n=e.limit,a=e.skip,s=e.data;return o("read ".concat(s.length," records")),r=r.concat(s),a+s.length<t?i(a+n):r}))}}},8552:(e,t,r)=>{var n=r(852)(r(5639),"DataView");e.exports=n},1989:(e,t,r)=>{var n=r(1789),o=r(401),i=r(7667),a=r(1327),s=r(1866);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},8407:(e,t,r)=>{var n=r(7040),o=r(4125),i=r(2117),a=r(7518),s=r(4705);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},7071:(e,t,r)=>{var n=r(852)(r(5639),"Map");e.exports=n},3369:(e,t,r)=>{var n=r(4785),o=r(1285),i=r(6e3),a=r(9916),s=r(5265);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},3818:(e,t,r)=>{var n=r(852)(r(5639),"Promise");e.exports=n},8525:(e,t,r)=>{var n=r(852)(r(5639),"Set");e.exports=n},6384:(e,t,r)=>{var n=r(8407),o=r(7465),i=r(3779),a=r(7599),s=r(4758),c=r(4309);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},2705:(e,t,r)=>{var n=r(5639).Symbol;e.exports=n},1149:(e,t,r)=>{var n=r(5639).Uint8Array;e.exports=n},577:(e,t,r)=>{var n=r(852)(r(5639),"WeakMap");e.exports=n},7412:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},4963:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}},4636:(e,t,r)=>{var n=r(2545),o=r(5694),i=r(1469),a=r(4144),s=r(5776),c=r(6719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),f=!r&&o(e),l=!r&&!f&&a(e),p=!r&&!f&&!l&&c(e),h=r||f||l||p,d=h?n(e.length,String):[],v=d.length;for(var y in e)!t&&!u.call(e,y)||h&&("length"==y||l&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,v))||d.push(y);return d}},2488:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},4865:(e,t,r)=>{var n=r(9465),o=r(7813),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];i.call(e,t)&&o(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},8470:(e,t,r)=>{var n=r(7813);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},4037:(e,t,r)=>{var n=r(8363),o=r(3674);e.exports=function(e,t){return e&&n(t,o(t),e)}},3886:(e,t,r)=>{var n=r(8363),o=r(1704);e.exports=function(e,t){return e&&n(t,o(t),e)}},9465:(e,t,r)=>{var n=r(8777);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},5990:(e,t,r)=>{var n=r(6384),o=r(7412),i=r(4865),a=r(4037),s=r(3886),c=r(4626),u=r(278),f=r(8805),l=r(1911),p=r(8234),h=r(6904),d=r(4160),v=r(3824),y=r(9148),m=r(8517),g=r(1469),b=r(4144),w=r(6688),_=r(3218),S=r(2928),x=r(3674),O=r(1704),j="[object Arguments]",A="[object Function]",k="[object Object]",C={};C[j]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[k]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[A]=C["[object WeakMap]"]=!1,e.exports=function e(t,r,E,N,R,I){var P,F=1&r,T=2&r,$=4&r;if(E&&(P=R?E(t,N,R,I):E(t)),void 0!==P)return P;if(!_(t))return t;var M=g(t);if(M){if(P=v(t),!F)return u(t,P)}else{var D=d(t),J=D==A||"[object GeneratorFunction]"==D;if(b(t))return c(t,F);if(D==k||D==j||J&&!R){if(P=T||J?{}:m(t),!F)return T?l(t,s(P,t)):f(t,a(P,t))}else{if(!C[D])return R?t:{};P=y(t,D,F)}}I||(I=new n);var B=I.get(t);if(B)return B;I.set(t,P),S(t)?t.forEach((function(n){P.add(e(n,r,E,n,t,I))})):w(t)&&t.forEach((function(n,o){P.set(o,e(n,r,E,o,t,I))}));var Q=M?void 0:($?T?h:p:T?O:x)(t);return o(Q||t,(function(n,o){Q&&(n=t[o=n]),i(P,o,e(n,r,E,o,t,I))})),P}},3118:(e,t,r)=>{var n=r(3218),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=i},8866:(e,t,r)=>{var n=r(2488),o=r(1469);e.exports=function(e,t,r){var i=t(e);return o(e)?i:n(i,r(e))}},4239:(e,t,r)=>{var n=r(2705),o=r(9607),i=r(2333),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},9454:(e,t,r)=>{var n=r(4239),o=r(7005);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},5588:(e,t,r)=>{var n=r(4160),o=r(7005);e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},8458:(e,t,r)=>{var n=r(3560),o=r(5346),i=r(3218),a=r(346),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,f=c.toString,l=u.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?p:s).test(a(e))}},9221:(e,t,r)=>{var n=r(4160),o=r(7005);e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},8749:(e,t,r)=>{var n=r(4239),o=r(1780),i=r(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},280:(e,t,r)=>{var n=r(5726),o=r(6916),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},313:(e,t,r)=>{var n=r(3218),o=r(5726),i=r(3498),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=o(e),r=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&r.push(s);return r}},2545:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4318:(e,t,r)=>{var n=r(1149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},4626:(e,t,r)=>{e=r.nmd(e);var n=r(5639),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},7157:(e,t,r)=>{var n=r(4318);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},3147:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},419:(e,t,r)=>{var n=r(2705),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},7133:(e,t,r)=>{var n=r(4318);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},278:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},8363:(e,t,r)=>{var n=r(4865),o=r(9465);e.exports=function(e,t,r,i){var a=!r;r||(r={});for(var s=-1,c=t.length;++s<c;){var u=t[s],f=i?i(r[u],e[u],u,r,e):void 0;void 0===f&&(f=e[u]),a?o(r,u,f):n(r,u,f)}return r}},8805:(e,t,r)=>{var n=r(8363),o=r(9551);e.exports=function(e,t){return n(e,o(e),t)}},1911:(e,t,r)=>{var n=r(8363),o=r(1442);e.exports=function(e,t){return n(e,o(e),t)}},4429:(e,t,r)=>{var n=r(5639)["__core-js_shared__"];e.exports=n},8777:(e,t,r)=>{var n=r(852),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},1957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},8234:(e,t,r)=>{var n=r(8866),o=r(9551),i=r(3674);e.exports=function(e){return n(e,i,o)}},6904:(e,t,r)=>{var n=r(8866),o=r(1442),i=r(1704);e.exports=function(e){return n(e,i,o)}},5050:(e,t,r)=>{var n=r(7019);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},852:(e,t,r)=>{var n=r(8458),o=r(7801);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},5924:(e,t,r)=>{var n=r(5569)(Object.getPrototypeOf,Object);e.exports=n},9607:(e,t,r)=>{var n=r(2705),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}},9551:(e,t,r)=>{var n=r(4963),o=r(479),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=s},1442:(e,t,r)=>{var n=r(2488),o=r(5924),i=r(9551),a=r(479),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,i(e)),e=o(e);return t}:a;e.exports=s},4160:(e,t,r)=>{var n=r(8552),o=r(7071),i=r(3818),a=r(8525),s=r(577),c=r(4239),u=r(346),f="[object Map]",l="[object Promise]",p="[object Set]",h="[object WeakMap]",d="[object DataView]",v=u(n),y=u(o),m=u(i),g=u(a),b=u(s),w=c;(n&&w(new n(new ArrayBuffer(1)))!=d||o&&w(new o)!=f||i&&w(i.resolve())!=l||a&&w(new a)!=p||s&&w(new s)!=h)&&(w=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case v:return d;case y:return f;case m:return l;case g:return p;case b:return h}return t}),e.exports=w},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,r)=>{var n=r(4536);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,r)=>{var n=r(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},1327:(e,t,r)=>{var n=r(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},1866:(e,t,r)=>{var n=r(4536);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},3824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},9148:(e,t,r)=>{var n=r(4318),o=r(7157),i=r(3147),a=r(419),s=r(7133);e.exports=function(e,t,r){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return i(e);case"[object Set]":return new c;case"[object Symbol]":return a(e)}}},8517:(e,t,r)=>{var n=r(3118),o=r(5924),i=r(5726);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:n(o(e))}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,r)=>{var n,o=r(4429),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,r)=>{var n=r(8470),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():o.call(t,r,1),--this.size,0))}},2117:(e,t,r)=>{var n=r(8470);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},7518:(e,t,r)=>{var n=r(8470);e.exports=function(e){return n(this.__data__,e)>-1}},4705:(e,t,r)=>{var n=r(8470);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},4785:(e,t,r)=>{var n=r(1989),o=r(8407),i=r(7071);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},1285:(e,t,r)=>{var n=r(5050);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).get(e)}},9916:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).has(e)}},5265:(e,t,r)=>{var n=r(5050);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},4536:(e,t,r)=>{var n=r(852)(Object,"create");e.exports=n},6916:(e,t,r)=>{var n=r(5569)(Object.keys,Object);e.exports=n},3498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},1167:(e,t,r)=>{e=r.nmd(e);var n=r(1957),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,s=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},5639:(e,t,r)=>{var n=r(1957),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},7465:(e,t,r)=>{var n=r(8407);e.exports=function(){this.__data__=new n,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,r)=>{var n=r(8407),o=r(7071),i=r(3369);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(e,t),this.size=r.size,this}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},361:(e,t,r)=>{var n=r(5990);e.exports=function(e){return n(e,5)}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:(e,t,r)=>{var n=r(9454),o=r(7005),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,r)=>{var n=r(3560),o=r(1780);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},4144:(e,t,r)=>{e=r.nmd(e);var n=r(5639),o=r(5062),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c},3560:(e,t,r)=>{var n=r(4239),o=r(3218);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6688:(e,t,r)=>{var n=r(5588),o=r(1717),i=r(1167),a=i&&i.isMap,s=a?o(a):n;e.exports=s},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2928:(e,t,r)=>{var n=r(9221),o=r(1717),i=r(1167),a=i&&i.isSet,s=a?o(a):n;e.exports=s},6719:(e,t,r)=>{var n=r(8749),o=r(1717),i=r(1167),a=i&&i.isTypedArray,s=a?o(a):n;e.exports=s},3674:(e,t,r)=>{var n=r(4636),o=r(280),i=r(8612);e.exports=function(e){return i(e)?n(e):o(e)}},1704:(e,t,r)=>{var n=r(4636),o=r(313),i=r(8612);e.exports=function(e){return i(e)?n(e,!0):o(e)}},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},7824:e=>{var t=1e3,r=60*t,n=60*r,o=24*n;function i(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,a){a=a||{};var s,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(s=e,(c=Math.abs(s))>=o?i(s,c,o,"day"):c>=n?i(s,c,n,"hour"):c>=r?i(s,c,r,"minute"):c>=t?i(s,c,t,"second"):s+" ms"):function(e){var i=Math.abs(e);return i>=o?Math.round(e/o)+"d":i>=n?Math.round(e/n)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r(4613)})();