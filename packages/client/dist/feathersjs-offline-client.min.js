/*! For license information please see feathersjs-offline-client.min.js.LICENSE.txt */
var feathersjsOfflineClient;feathersjsOfflineClient=(()=>{var t={5871:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.OPERATORS=e.FILTERS=void 0;var o=n(2410),i=n(2743);function a(t){if(void 0!==t)return Math.abs(parseInt(t,10))}function s(t,e,n){if(Array.isArray(t))return t.map((function(t){return s(t,e,n)}));if(o._.isObject(t)&&t.constructor==={}.constructor){var r={};return o._.each(t,(function(o,a){if("$"===a[0]){if(void 0!==n[a])return;if(!e.includes(a))throw new i.BadRequest("Invalid query parameter ".concat(a),t)}r[a]=s(o,e,n)})),Object.getOwnPropertySymbols(t).forEach((function(e){r[e]=t[e]})),r}return t}function u(t,e,n,r){return Array.isArray(n)?o._.each(n,(function(n){void 0!==e[n]&&(t[n]=e[n])})):o._.each(n,(function(n,o){var i=n(e[o],r);void 0!==i&&(t[o]=i)})),t}function c(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.filters,o=void 0===r?{}:r,i=n.operators,a=void 0===i?[]:i,c={};return c.filters=u({},t,e.FILTERS,n),c.filters=u(c.filters,t,o,n),c.query=s(t,e.OPERATORS.concat(a),c.filters),c}e.FILTERS={$sort:function(t){return"object"!==r(e=t)||Array.isArray(e)?e:Object.keys(e).reduce((function(t,n){return t[n]="object"===r(e[n])?e[n]:parseInt(e[n],10),t}),{});var e},$limit:function(t,e){return function(t,e){if(e&&e.default){var n="number"!=typeof t||isNaN(t)?e.default:t,r="number"==typeof e.max?e.max:Number.MAX_VALUE;return Math.min(n,r)}return t}(a(t),e.paginate)},$skip:function(t){return a(t)},$select:function(t){return t}},e.OPERATORS=["$in","$nin","$lt","$lte","$gt","$gte","$ne","$or"],e.default=c,t.exports=Object.assign(c,t.exports)},3597:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.select=e.OPERATORS=e.FILTERS=e.filterQuery=e.AdapterService=void 0;var u=n(2410),c=n(5430);Object.defineProperty(e,"AdapterService",{enumerable:!0,get:function(){return c.AdapterService}});var f=n(5871);Object.defineProperty(e,"filterQuery",{enumerable:!0,get:function(){return s(f).default}}),Object.defineProperty(e,"FILTERS",{enumerable:!0,get:function(){return f.FILTERS}}),Object.defineProperty(e,"OPERATORS",{enumerable:!0,get:function(){return f.OPERATORS}}),a(n(3385),e),e.select=function(t){for(var e=t&&t.query&&t.query.$select,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];Array.isArray(e)&&o.length&&e.push.apply(e,o);var a=function(t){var n;return Array.isArray(e)?(n=u._).pick.apply(n,[t].concat(r(e))):t};return function(t){return Array.isArray(t)?t.map(a):a(t)}}},5430:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AdapterService=void 0;var i=n(2743),a=o(n(5871)),s=function(t,e){if("function"!=typeof t[e])return Promise.reject(new i.NotImplemented("Method ".concat(e," not available")));for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t[e].apply(t,r)},u={find:!0,get:!1,update:!1},c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Object.assign({id:"id",events:[],paginate:{},multi:!1,filters:[],whitelist:[]},e)}var e,n;return e=t,(n=[{key:"filterQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==t.paginate?t.paginate:this.options.paginate,r=t.query,o=void 0===r?{}:r,i=Object.assign({operators:this.options.whitelist||[],filters:this.options.filters,paginate:n},e),s=a.default(o,i);return Object.assign(s,{paginate:n})}},{key:"allowsMulti",value:function(t){var e=u[t];if(void 0!==e)return e;var n=this.options.multi;return!0===n||!1===n?n:n.includes(t)}},{key:"find",value:function(t){return s(this,"_find",t)}},{key:"get",value:function(t,e){return s(this,"_get",t,e)}},{key:"create",value:function(t,e){return Array.isArray(t)&&!this.allowsMulti("create")?Promise.reject(new i.MethodNotAllowed("Can not create multiple entries")):s(this,"_create",t,e)}},{key:"update",value:function(t,e,n){return null===t||Array.isArray(e)?Promise.reject(new i.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")):s(this,"_update",t,e,n)}},{key:"patch",value:function(t,e,n){return null!==t||this.allowsMulti("patch")?s(this,"_patch",t,e,n):Promise.reject(new i.MethodNotAllowed("Can not patch multiple entries"))}},{key:"remove",value:function(t,e){return null!==t||this.allowsMulti("remove")?s(this,"_remove",t,e):Promise.reject(new i.MethodNotAllowed("Can not remove multiple entries"))}},{key:"id",get:function(){return this.options.id}},{key:"events",get:function(){return this.options.events}}])&&r(e.prototype,n),t}();e.AdapterService=c},3385:(t,e)=>{"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.sorter=e.compare=e.compareArrays=e.compareNSB=void 0,e.compareNSB=function(t,e){return t<e?-1:t>e?1:0},e.compareArrays=function(t,n){var r,o;for(r=0;r<Math.min(t.length,n.length);r+=1)if(0!==(o=e.compare(t[r],n[r])))return o;return e.compareNSB(t.length,n.length)},e.compare=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.compareNSB,o=e,i=o.compareNSB,a=o.compare,s=o.compareArrays;if(void 0===t)return void 0===n?0:-1;if(void 0===n)return void 0===t?0:1;if(null===t)return null===n?0:-1;if(null===n)return null===t?0:1;if("number"==typeof t)return"number"==typeof n?i(t,n):-1;if("number"==typeof n)return"number"==typeof t?i(t,n):1;if("string"==typeof t)return"string"==typeof n?r(t,n):-1;if("string"==typeof n)return"string"==typeof t?r(t,n):1;if("boolean"==typeof t)return"boolean"==typeof n?i(t,n):-1;if("boolean"==typeof n)return"boolean"==typeof t?i(t,n):1;if(t instanceof Date)return n instanceof Date?i(t.getTime(),n.getTime()):-1;if(n instanceof Date)return t instanceof Date?i(t.getTime(),n.getTime()):1;if(Array.isArray(t))return Array.isArray(n)?s(t,n):-1;if(Array.isArray(n))return Array.isArray(t)?s(t,n):1;for(var u=Object.keys(t).sort(),c=Object.keys(n).sort(),f=0,l=0;l<Math.min(u.length,c.length);l+=1)if(0!==(f=a(t[u[l]],n[c[l]])))return f;return i(u.length,c.length)},e.sorter=function(t){var r=Object.keys(t).map((function(e){return{key:e,direction:t[e]}}));return function(t,o){var i,a,s=function(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}(r);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(0!=(i=u.direction*e.compare(t[u.key],o[u.key])))return i}}catch(t){s.e(t)}finally{s.f()}return 0}}},1782:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.enableHooks=e.processHooks=e.getHooks=e.isHookObject=e.convertHookData=e.makeArguments=e.defaultMakeArguments=e.createHookObject=e.ACTIVATE_HOOKS=void 0;var o=n(621),i=o._,a=i.each,s=i.pick;function u(t){var e=[];return void 0!==t.id&&e.push(t.id),t.data&&e.push(t.data),e.push(t.params||{}),e}function c(t){var e={};return Array.isArray(t)?e={all:t}:"object"!==r(t)?e={all:[t]}:a(t,(function(t,n){e[n]=Array.isArray(t)?t:[t]})),e}function f(t){return"object"===r(t)&&"string"==typeof t.method&&"string"==typeof t.type}e.ACTIVATE_HOOKS=o.createSymbol("__feathersActivateHooks"),e.createHookObject=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return Object.defineProperty(n,"toJSON",{value:function(){return s(this,"type","method","path","params","id","data","result","error")}}),Object.assign(n,e,{method:t,get path(){var t=e.app,n=e.service;return n&&t&&t.services?Object.keys(t.services).find((function(e){return t.services[e]===n})):null}})},e.defaultMakeArguments=u,e.makeArguments=function(t){switch(t.method){case"find":return[t.params];case"get":case"remove":return[t.id,t.params];case"update":case"patch":return[t.id,t.data,t.params];case"create":return[t.data,t.params]}return u(t)},e.convertHookData=c,e.isHookObject=f,e.getHooks=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=t.__hooks[n][r]||[],a=e.__hooks[n][r]||[];return o?a.concat(i):i.concat(a)},e.processHooks=function(t,e){var n=this,r=e,o=function(t){if(t){if(!f(t))throw new Error("".concat(r.type," hook for '").concat(r.method,"' method returned invalid hook object"));r=t}return r};return t.reduce((function(t,e){var r=e.bind(n);return t.then((function(t){return r(t)})).then(o)}),Promise.resolve(r)).then((function(){return r})).catch((function(t){throw t.hook=r,t}))},e.enableHooks=function(t,e,n){if("function"==typeof t.hooks)return t;var r={};return n.forEach((function(t){r[t]={}})),Object.defineProperty(t,"__hooks",{configurable:!0,value:r,writable:!0}),Object.assign(t,{hooks:function(t){var n=this;return a(t,(function(t,r){if(!n.__hooks[r])throw new Error("'".concat(r,"' is not a valid hook type"));var o=c(t);a(o,(function(t,n){if("all"!==n&&-1===e.indexOf(n))throw new Error("'".concat(n,"' is not a valid hook method"))})),e.forEach((function(t){var e=n.__hooks[r][t]||(n.__hooks[r][t]=[]);o.all&&e.push.apply(e,o.all),o[t]&&e.push.apply(e,o[t])}))})),this}})}},2410:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},a=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.hooks=void 0;var s=i(n(1782));a(n(621),e),e.hooks=s},621:(t,e)=>{"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.createSymbol=e.makeUrl=e.isPromise=e._=e.stripSlashes=void 0,e.stripSlashes=function(t){return t.replace(/^(\/+)|(\/+)$/g,"")},e._={each:function(t,n){t&&"function"==typeof t.forEach?t.forEach(n):e._.isObject(t)&&Object.keys(t).forEach((function(e){return n(t[e],e)}))},some:function(t,e){return Object.keys(t).map((function(e){return[t[e],e]})).some((function(t){var n=o(t,2),r=n[0],i=n[1];return e(r,i)}))},every:function(t,e){return Object.keys(t).map((function(e){return[t[e],e]})).every((function(t){var n=o(t,2),r=n[0],i=n[1];return e(r,i)}))},keys:function(t){return Object.keys(t)},values:function(t){return e._.keys(t).map((function(e){return t[e]}))},isMatch:function(t,n){return e._.keys(n).every((function(e){return t[e]===n[e]}))},isEmpty:function(t){return 0===e._.keys(t).length},isObject:function(t){return"object"===r(t)&&!Array.isArray(t)&&null!==t},isObjectOrArray:function(t){return"object"===r(t)&&null!==t},extend:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[t].concat(n))},omit:function(t){for(var n=e._.extend({},t),r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.forEach((function(t){return delete n[t]})),n},pick:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})},merge:function(t,r){return e._.isObject(t)&&e._.isObject(r)&&Object.keys(r).forEach((function(o){e._.isObject(r[o])?(t[o]||Object.assign(t,n({},o,{})),e._.merge(t[o],r[o])):Object.assign(t,n({},o,r[o]))})),t}},e.isPromise=function(t){return e._.isObject(t)&&"function"==typeof t.then},e.makeUrl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="function"==typeof n.get?n.get.bind(n):function(){},o=r("env")||"production",i=r("host")||process.env.HOST_NAME||"localhost",a="development"===o||"test"===o||void 0===o?"http":"https",s=r("port")||process.env.PORT||3030,u="development"===o||"test"===o||void 0===o?":".concat(s):"";return t=t||"","".concat(a,"://").concat(i).concat(u,"/").concat(e.stripSlashes(t))},e.createSymbol=function(t){return"undefined"!=typeof Symbol?Symbol(t):t}},2743:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(8801)("@feathersjs/errors");function i(t,e,n,a,s){var u,c,f;(t=t||"Error")instanceof Error?(c=t.message||"Error",t.errors&&(u=t.errors)):"object"===r(t)?(c=t.message||"Error",s=t):c=t,s&&((f=JSON.parse(JSON.stringify(s))).errors?(u=f.errors,delete f.errors):s.errors&&(u=JSON.parse(JSON.stringify(s.errors)))),this.type="FeathersError",this.name=e,this.message=c,this.code=n,this.className=a,this.data=f,this.errors=u||{},o("".concat(this.name,"(").concat(this.code,"): ").concat(this.message)),o(this.errors),Error.captureStackTrace?Error.captureStackTrace(this,i):this.stack=(new Error).stack}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function s(t,e){i.call(this,t,"BadRequest",400,"bad-request",e)}function u(t,e){i.call(this,t,"NotAuthenticated",401,"not-authenticated",e)}function c(t,e){i.call(this,t,"PaymentError",402,"payment-error",e)}function f(t,e){i.call(this,t,"Forbidden",403,"forbidden",e)}function l(t,e){i.call(this,t,"NotFound",404,"not-found",e)}function h(t,e){i.call(this,t,"MethodNotAllowed",405,"method-not-allowed",e)}function p(t,e){i.call(this,t,"NotAcceptable",406,"not-acceptable",e)}function d(t,e){i.call(this,t,"Timeout",408,"timeout",e)}function y(t,e){i.call(this,t,"Conflict",409,"conflict",e)}function v(t,e){i(this,t,"Gone",410,"gone")}function m(t,e){i.call(this,t,"LengthRequired",411,"length-required",e)}function g(t,e){i.call(this,t,"Unprocessable",422,"unprocessable",e)}function b(t,e){i.call(this,t,"TooManyRequests",429,"too-many-requests",e)}function w(t,e){i.call(this,t,"GeneralError",500,"general-error",e)}function _(t,e){i.call(this,t,"NotImplemented",501,"not-implemented",e)}function S(t,e){i.call(this,t,"BadGateway",502,"bad-gateway",e)}function O(t,e){i.call(this,t,"Unavailable",503,"unavailable",e)}a(i,Error),Object.defineProperty(i.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),a(s,i),a(u,i),a(c,i),a(f,i),a(l,i),a(h,i),a(p,i),a(d,i),a(y,i),a(v,i),a(m,i),a(g,i),a(b,i),a(w,i),a(_,i),a(S,i),a(O,i);var x={FeathersError:i,BadRequest:s,NotAuthenticated:u,PaymentError:c,Forbidden:f,NotFound:l,MethodNotAllowed:h,NotAcceptable:p,Timeout:d,Conflict:y,Gone:v,LengthRequired:m,Unprocessable:g,TooManyRequests:b,GeneralError:w,NotImplemented:_,BadGateway:S,Unavailable:O,400:s,401:u,402:c,403:f,404:l,405:h,406:p,408:d,409:y,410:v,411:m,422:g,429:b,500:w,501:_,502:S,503:O};t.exports=Object.assign({convert:function(t){if(!t)return t;var e=x[t.name],n=e?new e(t.message,t.data):new Error(t.message||t);return"object"===r(t)&&Object.assign(n,t),n}},x)},8801:(t,e,n)=>{var r;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))})),e.splice(o,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=n(5331)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},5331:(t,e,n)=>{function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){function e(t){var n,r=null;function i(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(i.enabled){var a=i,s=Number(new Date),u=s-(n||s);a.diff=u,a.prev=n,a.curr=s,n=s,r[0]=e.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return"%";c++;var o=e.formatters[n];if("function"==typeof o){var i=r[c];t=o.call(a,i),r.splice(c,1),c--}return t})),e.formatArgs.call(a,r);var f=a.log||e.log;f.apply(a,r)}}return i.namespace=t,i.useColors=e.useColors(),i.color=e.selectColor(t),i.extend=o,i.destroy=e.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===r?e.enabled(t):r},set:function(t){r=t}}),"function"==typeof e.init&&e.init(i),i}function o(t,n){var r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[].concat(r(e.names.map(i)),r(e.skips.map(i).map((function(t){return"-"+t})))).join(",");return e.enable(""),t},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(7824),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((function(n){e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},2668:(t,e,n)=>{var r=n(2568),o=n(1614).v4,i=n(4670),a=n(6106).stripProps;function s(t){return t="string"==typeof t?t:JSON.stringify(t),r(t)}t.exports={genUuid:function(t){return t?i.generate():o()},hash:s,hashOfRecord:function(t){return s(a(t,["id","_id"]))}}},1707:(t,e,n)=>{var r=n(2273),o=n(2668),i=n(6106),a=n(8662);t.exports=Object.assign(Object.assign(Object.assign({to:r},o),i),{OptionsProxy:a})},6106:t=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return"object"===e(t)&&!Array.isArray(t)&&null!==t}t.exports={isObject:n,stripProps:function t(e,r){r=Array.isArray(r)?r:r||[];var o={};return Object.keys(e).forEach((function(i){if(-1===r.indexOf(i)){var a=e[i];o[i]=n(a)?t(a,r):a}})),o}}},8662:t=>{function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n={},r=[];t.exports=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e)throw new Error("OptionsProxy: Sorry, you must supply a name to proxy.");this.name=e,n[this.name]=[],r[this.name]=null}var o,i;return o=t,(i=[{key:"observe",value:function(t){var e=this;return new Proxy(t,{get:function(t,o){return r[e.name]&&(n[e.name][o]||(n[e.name][o]=[]),n[e.name][o].push(r[e.name])),t[o]},set:function(t,r,o){return t[r]=o,n[e.name][r]&&n[e.name][r].forEach((function(t){return t()})),!0}})}},{key:"watcher",value:function(t){r[this.name]=t,t(),r[this.name]=null}}])&&e(o.prototype,i),t}()},2273:t=>{t.exports=function(t){return t.then((function(t){return[null,t]})).catch((function(t){return[t,null]}))}},4613:(t,e,n)=>{var r=n(1707),o=r.to,i=r.isObject,a=r.stripProps,s=r.genUuid,u=r.hash,c=r.hashOfRecord,f=n(3683),l=f.Owndata,h=f.owndataWrapper,p=n(3153),d=p.Ownnet,y=p.ownnetWrapper;t.exports={to:o,isObject:i,stripProps:a,genUuid:s,hash:u,hashOfRecord:c,Owndata:l,owndataWrapper:h,Ownnet:d,ownnetWrapper:y}},6976:(t,e,n)=>{var r=n(2387);t.exports=r},2387:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){throw new TypeError('"'+t+'" is read-only')}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var y=d(n(2530)),v=n(3597),m=d(n(2743)),g=d(n(7203)),b=n(1707),w=d(n(2564)),_=n(8801)("@feathersjs-offline:ownclass:service-base"),S={id:"id",store:null,storage:null,useShortUuid:!0,throttle:null,timedSync:864e5,adapterTest:!1,matcher:y.default,sorter:v.sorter,fixedName:""},O=new Date(0),x=["uuid","updatedAt","onServerAt","deletedAt"],k=0,A=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return Array.isArray(t)?(n=[],t.map((function(t,r,o){var i=E(o[r]);e.forEach((function(t){return delete i[t]})),n.push(i)}))):(n=E(t),e.forEach((function(t){return delete n[t]}))),n}},j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(C,t);var e,r,d,y,j=(d=C,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(d);if(y){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return f(this,t)});function C(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,C);var n=Object.assign({},S,t);return _("Constructor started, newOpts = ".concat(JSON.stringify(n))),(e=j.call(this,n)).wrapperOptions=Object.assign({},n,e.options),_("Constructor ended, options = ".concat(JSON.stringify(e.options))),e.type="own-class",_("  Done."),f(e,l(e))}return e=C,(r=[{key:"_setup",value:function(t,e){return p(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _("_SetUp('".concat(e,"') started")),n.abrupt("return",this.setup(t,e));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"setup",value:function(t,e){return p(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,i,u,c,f,l,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(_("SetUp('".concat(e,"') started")),!this._setupPerformed){r.next=3;break}return r.abrupt("return");case 3:return this._setupPerformed=!0,"undefined"==typeof localStorage?(_("Simulating localStorage..."),o=n(9968).LocalStorage,n.g.localStorage=new o("./.scratch")):_("Utilizing built-in localStorage"),this.options=this.wrapperOptions,i=this,this.thisName=""!==this.options.fixedName?this.options.fixedName:"".concat(this.type,"_offline_").concat(k++,"_").concat(e),(u=t.service(e))!==i&&(this.remoteService=u,t.use(e,i)),this.name=e,this.localServiceName=this.thisName+"_local",this.localServiceQueue=this.thisName+"_queue",this.storage=this.options.storage?this.options.storage:localStorage,this.localSpecOptions={name:this.localServiceName,storage:this.storage,store:this.options.store,reuseKeys:""!==this.options.fixedName},c=Object.assign({},this.options,this.localSpecOptions),f={id:"id",name:this.localServiceQueue,storage:this.storage,paginate:null,multi:!0,reuseKeys:""!==this.options.fixedName},_("  Setting up services '".concat(this.localServiceName,"' and '").concat(this.localServiceQueue,"'...")),t.use(this.localServiceName,g.default(c)),t.use(this.localServiceQueue,g.default(f)),this.localService=t.service(this.localServiceName),this.localQueue=t.service(this.localServiceQueue),r.next=24,this.localService.ready();case 24:return this.options=this.wrapperOptions,this.options.adapterTest?(l=Object.assign([],x),(h=l.findIndex((function(t){return t===i.id})))>-1&&l.splice(h,1),this._strip=A.apply(void 0,function(t){if(Array.isArray(t))return s(t)}(p=l)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(p)||a(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):this._strip=function(t){return t},this._select=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(e){return v.select.apply(v,[t].concat(n,[i.id]))(e)}},this.listening=!1,this.aIP=0,this.pQActive=!1,this.syncedAt=new Date(this.storage.getItem(this.thisName+"_syncedAt")||0).toISOString(),this.storage.setItem(this.thisName+"_syncedAt",new Date(this.syncedAt).toISOString()),this.remoteService instanceof v.AdapterService||this._listenOptions(),"function"==typeof this.remoteService.setup&&this.remoteService.setup(t,e),this.options.timedSync&&Number.isInteger(this.options.timedSync)&&this.options.timedSync>0&&(this._timedSyncHandle=setInterval((function(){return i.sync()}),i.options.timedSync)),_("  Done."),r.abrupt("return",!0);case 37:case"end":return r.stop()}var p}),r,this)})))}},{key:"_listenOptions",value:function(){var t=this,e=new b.OptionsProxy(t.thisName);this.options=e.observe(Object.assign({},t.remoteService.options?t.remoteService.options:{},t.options)),e.watcher((function(){t.remoteService.options=Object.assign({},t.remoteService.options,t.options),t.localService.options=Object.assign({},t.options,t.localSpecOptions)}))}},{key:"getEntries",value:function(t){return p(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _("Calling getEntries(".concat(JSON.stringify(t),"})")),n=[],e.next=4,this.localService.getEntries(t).then((function(t){n=t}));case 4:return e.abrupt("return",Promise.resolve(n).then(this._strip).then(this._select(t)));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"get",value:function(t,e){return p(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _("Calling get(".concat(JSON.stringify(t),", ").concat(JSON.stringify(e),"})")),n.abrupt("return",this._get(t,e));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"_get",value:function(t,e){return p(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _("Calling _get(".concat(JSON.stringify(t),", ").concat(JSON.stringify(e),"})")),n.next=3,this.localService.get(t,e).then(this._strip).then(this._select(e)).catch((function(t){throw t}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"find",value:function(t){return p(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _("Calling find(".concat(JSON.stringify(t),"})")),e.t0=_,e.t1="  rows=",e.t2=JSON,e.next=6,this.getEntries();case 6:return e.t3=e.sent,e.t4=e.t2.stringify.call(e.t2,e.t3),e.t5=e.t1.concat.call(e.t1,e.t4),(0,e.t0)(e.t5),e.abrupt("return",this._find(t));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"_find",value:function(t){return p(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _("Calling _find(".concat(JSON.stringify(t),"})")),e.abrupt("return",this.localService.find(t).then(this._strip).then(this._select(t)));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"create",value:function(t,e){return p(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(_("Calling create(".concat(JSON.stringify(t),", ").concat(JSON.stringify(e),")")),!Array.isArray(t)||this.allowsMulti("create")){n.next=3;break}return n.abrupt("return",Promise.reject(new m.default.MethodNotAllowed("Creating multiple without option 'multi' set")));case 3:return n.abrupt("return",this._create(t,e));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"_create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return p(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,a,s,u,c,f,l,h,d,y,v=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(_("Calling _create(".concat(JSON.stringify(t),", ").concat(JSON.stringify(e),", ").concat(n,")")),o=this,!Array.isArray(t)){r.next=8;break}if(this.allowsMulti("create")){r.next=6;break}return r.abrupt("return",Promise.reject(new m.default.MethodNotAllowed("Creating multiple without option 'multi' set")));case 6:return a=new Date,r.abrupt("return",Promise.all(t.map((function(t){return o._create(t,e,a)}))));case 8:return n=n||new Date,"uuid"in(s=E(t))||(s.uuid=b.genUuid(this.options.useShortUuid)),"updatedAt"in s||(s.updatedAt=n),s.onServerAt=O,r.next=15,b.to(this.localService.find({query:{uuid:s.uuid}}));case 15:if(u=r.sent,c=i(u,2),f=c[0],!(l=c[1])||!l.length){r.next=21;break}throw new m.default.BadRequest("Optimistic create requires unique uuid. (".concat(this.type,") res=").concat(JSON.stringify(l)));case 21:return E(e),this.disallowInternalProcessing("_create"),r.next=25,this._addQueuedEvent("create",s,E(s),e);case 25:return h=r.sent,r.next=28,b.to(this.localService.create(s,E(e)));case 28:if(d=r.sent,y=i(d,2),f=y[0],!(l=y[1])){r.next=36;break}this.remoteService.create(l,E(e)).then((function(t){return p(v,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.to(o._removeQueuedEvent("_create0",h,s,s.updatedAt));case 2:return e.next=4,o._patchIfNotRemoved(t[o.id],t);case 4:return o.allowInternalProcessing("_create0"),e.next=7,b.to(o._processQueuedEvents());case 7:case"end":return e.stop()}}),e)})))})).catch((function(t){return p(v,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Timeout"===t.name){n.next=5;break}return n.next=3,b.to(o._removeQueuedEvent("_create1",h,t.message,s.updatedAt));case 3:return n.next=5,b.to(o.localService.remove(l[o.id],e));case 5:o.allowInternalProcessing("_create1");case 6:case"end":return n.stop()}}),n)})))})),r.next=40;break;case 36:return r.next=38,b.to(this._removeQueuedEvent("_create2",h,s,s.updatedAt));case 38:throw this.allowInternalProcessing("_create2"),f;case 40:return r.abrupt("return",Promise.resolve(l).then(this._strip).then(this._select(e)));case 41:case"end":return r.stop()}}),r,this)})))}},{key:"update",value:function(t,e,n){return p(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(_("Calling update(".concat(t,", ").concat(JSON.stringify(e),", ").concat(JSON.stringify(n),"})")),null!==t&&!Array.isArray(e)){r.next=3;break}return r.abrupt("return",Promise.reject(new m.default.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")));case 3:return r.abrupt("return",this._update(t,e,n));case 4:case"end":return r.stop()}}),r,this)})))}},{key:"_update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,a,s,u,c,f,l,h,d,y,v,g=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(_("Calling _update(".concat(t,", ").concat(JSON.stringify(e),", ").concat(JSON.stringify(n),"})")),o=this,null!==t&&!Array.isArray(e)){r.next=4;break}return r.abrupt("return",Promise.reject(new m.default.BadRequest("You can not replace multiple instances. Did you mean 'patch'?")));case 4:return r.next=6,b.to(this.localService._get(t));case 6:if(a=r.sent,s=i(a,2),u=s[0],(c=s[1])&&c!=={}){r.next=12;break}throw new m.default.NotFound("Trying to update non-existing ".concat(this.id,"=").concat(t,". (").concat(this.type,") err=").concat(JSON.stringify(u.name)));case 12:return f=E(c),l=f.uuid,(h=E(e)).uuid=l,h.updatedAt=new Date,h.onServerAt=O,this.disallowInternalProcessing("_update"),r.next=21,this._addQueuedEvent("update",h,t,E(h),n);case 21:return d=r.sent,r.next=24,b.to(this.localService.update(t,h,E(n)));case 24:if(y=r.sent,v=i(y,2),u=v[0],c=v[1],u){r.next=32;break}this.remoteService.update(t,c,E(n)).then((function(t){return p(g,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.to(o._removeQueuedEvent("_update0",d,h,c.updatedAt));case 2:return e.next=4,o._patchIfNotRemoved(t[o.id],t);case 4:return o.allowInternalProcessing("_update0"),e.next=7,b.to(o._processQueuedEvents());case 7:case"end":return e.stop()}}),e)})))})).catch((function(e){return p(g,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Timeout"!==e.name){n.next=4;break}_("_update TIMEOUT: ".concat(e.name,", ").concat(e.message)),n.next=9;break;case 4:return _("_update ERROR: ".concat(e.name,", ").concat(e.message)),n.next=7,b.to(o._removeQueuedEvent("_update1",d,h,c.updatedAt));case 7:return n.next=9,b.to(o.localService.patch(t,f));case 9:o.allowInternalProcessing("_update1");case 10:case"end":return n.stop()}}),n)})))})),r.next=36;break;case 32:return r.next=34,b.to(this._removeQueuedEvent("_update2",d,h,h.updatedAt));case 34:throw this.allowInternalProcessing("_update2"),u;case 36:return r.abrupt("return",Promise.resolve(h).then(this._strip).then(this._select(n)));case 37:case"end":return r.stop()}}),r,this)})))}},{key:"patch",value:function(t,e,n){return p(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(_("Calling patch(".concat(t,", ").concat(JSON.stringify(e),", ").concat(JSON.stringify(n),"})")),null!==t||this.allowsMulti("patch")){r.next=3;break}return r.abrupt("return",Promise.reject(new m.default.MethodNotAllowed("Can not patch multiple entries")));case 3:return r.abrupt("return",this._patch(t,e,n));case 4:case"end":return r.stop()}}),r,this)})))}},{key:"_patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return p(this,void 0,void 0,regeneratorRuntime.mark((function a(){var s,u,c,f,l,h,d,y,v,g,w=this;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(_("Calling _patch(".concat(t,", ").concat(JSON.stringify(e),", ").concat(JSON.stringify(n),"})")),s=this,null!==t){a.next=7;break}if(this.allowsMulti("patch")){a.next=6;break}throw new m.default.MethodNotAllowed("Patching multiple without option 'multi' set");case 6:return a.abrupt("return",this.find(n).then((function(t){var r=t.data?t.data:t;Array.isArray(r)||(o("res"),r=[r]);var i=(new Date).toISOString();return Promise.all(r.map((function(t){return s._patch(t[w.id],e,n,i)})))})));case 7:return r=r||new Date,a.next=10,b.to(this.localService._get(t));case 10:if(u=a.sent,c=i(u,2),f=c[0],(l=c[1])&&l!=={}){a.next=16;break}throw f;case 16:return h=E(l),(d=Object.assign({},h,e)).onServerAt=O,d.updatedAt=r,this.disallowInternalProcessing("_patch"),a.next=23,this._addQueuedEvent("patch",d,t,E(d),n);case 23:return y=a.sent,a.next=26,b.to(this.localService.patch(t,d,E(n)));case 26:if(v=a.sent,g=i(v,2),f=g[0],!(l=g[1])){a.next=34;break}this.remoteService.patch(t,l,E(n)).then((function(t){return p(w,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.to(s._removeQueuedEvent("_patch0",y,t,l.updatedAt));case 2:return e.next=4,s._patchIfNotRemoved(t[s.id],t);case 4:return s.allowInternalProcessing("_patch0"),e.next=7,b.to(s._processQueuedEvents());case 7:case"end":return e.stop()}}),e)})))})).catch((function(e){return p(w,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Timeout"!==e.name){n.next=4;break}_("_patch TIMEOUT: ".concat(e.name,", ").concat(e.message)),n.next=9;break;case 4:return _("_patch ERROR: ".concat(e.name,", ").concat(e.message)),n.next=7,b.to(s._removeQueuedEvent("_patch1",y,d,l.updatedAt));case 7:return n.next=9,b.to(s.localService.patch(t,h));case 9:s.allowInternalProcessing("_patch1");case 10:case"end":return n.stop()}}),n)})))})),a.next=38;break;case 34:return a.next=36,b.to(this._removeQueuedEvent("_patch2",y,d,d.updatedAt));case 36:throw this.allowInternalProcessing("_patch2"),f;case 38:return a.abrupt("return",Promise.resolve(d).then(this._strip).then(this._select(n)));case 39:case"end":return a.stop()}}),a,this)})))}},{key:"_patchIfNotRemoved",value:function(t,e){return p(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.localService.patch(t,e).catch((function(t){return Promise.resolve(!0)})));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"remove",value:function(t,e){return p(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(_("Calling remove(".concat(t,", ").concat(JSON.stringify(e),"})")),null!==t||this.allowsMulti("remove")){n.next=3;break}return n.abrupt("return",Promise.reject(new m.default.MethodNotAllowed("Can not remove multiple entries")));case 3:return n.abrupt("return",this._remove(t,e));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"_remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,a,s,u,c,f,l,h,d,y=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(_("Calling _remove(".concat(t,", ").concat(JSON.stringify(e),"})")),r=this,null!==t){n.next=7;break}if(this.allowsMulti("remove")){n.next=6;break}throw new m.default.MethodNotAllowed("Removing multiple without option 'multi' set");case 6:return n.abrupt("return",this.find(e).then((function(t){var n=t.data?t.data:t;return Array.isArray(n)||(o("res"),n=[n]),Promise.all(n.map((function(t){return r._remove(t[y.id],e)})))})));case 7:return n.next=9,b.to(this.localService._get(t));case 9:if(a=n.sent,s=i(a,2),u=s[0],(c=s[1])&&c!=={}){n.next=15;break}throw new m.default.BadRequest("Trying to remove non-existing ".concat(this.id,"=").concat(t,". (").concat(this.type,") err=").concat(JSON.stringify(u),", res=").concat(JSON.stringify(c)));case 15:return f=E(c),this.disallowInternalProcessing("_remove"),n.next=19,this._addQueuedEvent("remove",f,t,e);case 19:return l=n.sent,n.next=22,b.to(this.localService.remove(t,E(e)));case 22:if(h=n.sent,d=i(h,2),u=d[0],c=d[1],u){n.next=30;break}this.remoteService.remove(t,E(e)).then((function(t){return p(y,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.to(r._removeQueuedEvent("_remove0",l,f,null));case 2:return r.allowInternalProcessing("_remove0"),t.next=5,b.to(r._processQueuedEvents());case 5:case"end":return t.stop()}}),t)})))})).catch((function(t){return p(y,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Timeout"!==t.name){e.next=4;break}_("_remove TIMEOUT: ".concat(t.name,", ").concat(t.message)),e.next=9;break;case 4:return _("_remove ERROR: ".concat(t.name,", ").concat(t.message,"\nbeforeRecord = ").concat(JSON.stringify(f))),e.next=7,b.to(r._removeQueuedEvent("_remove1",l,f,null));case 7:return e.next=9,b.to(r.localService.create(f,null));case 9:r.allowInternalProcessing("_remove1");case 10:case"end":return e.stop()}}),e)})))})),n.next=34;break;case 30:return n.next=32,b.to(this._removeQueuedEvent("_remove2",l,f,null));case 32:throw this.allowInternalProcessing("_remove2"),u;case 34:return n.abrupt("return",Promise.resolve(f).then(this._strip).then(this._select(e)));case 35:case"end":return n.stop()}}),n,this)})))}},{key:"allowInternalProcessing",value:function(t){_("allowInternalProcessing: ".concat(t," ").concat(this.thisName," ").concat(this.aIP-1)),this.aIP--}},{key:"disallowInternalProcessing",value:function(t){_("disallowInternalProcessing: ".concat(t," ").concat(this.thisName," ").concat(this.aIP+1)),this.aIP++}},{key:"internalProcessingAllowed",value:function(){return 0===this.aIP}},{key:"_addQueuedEvent",value:function(t,e,n,r,o){return p(this,void 0,void 0,regeneratorRuntime.mark((function a(){var s,u,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return _("addQueuedEvent entered"),a.next=3,b.to(this.localQueue.create({eventName:t,record:e,arg1:n,arg2:r,arg3:o}));case 3:return s=a.sent,(u=i(s,2))[0],c=u[1],_("addQueuedEvent added: ".concat(JSON.stringify(c))),a.abrupt("return",Promise.resolve(c.id));case 9:case"end":return a.stop()}}),a,this)})))}},{key:"_removeQueuedEvent",value:function(t,e,n,r){return p(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _("removeQueuedEvent entered"),t.next=3,b.to(this.localQueue.remove(e));case 3:return n=t.sent,(r=i(n,2))[0],o=r[1],t.abrupt("return",Promise.resolve(o));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"_processQueuedEvents",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new m.default.NotImplemented("_processQueuedEvents must be implemented!!!");case 1:case"end":return t.stop()}}),t)})))}},{key:"sync",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,o,a,s,u,c,f,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.internalProcessingAllowed()){e.next=5;break}return e.next=3,new Promise((function(t){setTimeout((function(){t(!0)}),200)}));case 3:e.next=0;break;case 5:return e.next=7,this._getSyncOptions(t);case 7:return n=e.sent,_("".concat(this.type,".sync(").concat(JSON.stringify(n),") started...")),r=this,o=!0,e.next=13,b.to(w.default(this.remoteService,n));case 13:if(a=e.sent,s=i(a,2),u=s[0],c=s[1],!u){e.next=21;break}return"timeout"===u.className?_("  TIMEOUT: ".concat(JSON.stringify(u))):_("  ERROR: ".concat(JSON.stringify(u))),this.localService.emit("synced",!1),e.abrupt("return",!1);case 21:return _("  Applying received snapshot data... (".concat(c.length," items)")),f=new Date(0).toISOString(),e.next=25,Promise.all(c.map((function(t){return p(l,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a,s,u,c,l,h,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.to(r.localService.get(t[r.id]));case 2:if(n=e.sent,a=i(n,2),s=a[0],!a[1]){e.next=26;break}if(f=f<t.onServerAt?t.onServerAt:f,!t.deletedAt){e.next=17;break}return e.next=11,b.to(r.localService.remove(t[r.id]));case 11:u=e.sent,c=i(u,2),s=c[0],c[1],e.next=23;break;case 17:return e.next=19,b.to(r.localService.patch(t[r.id],t));case 19:l=e.sent,h=i(l,2),s=h[0],h[1];case 23:s&&(o=!1),e.next=35;break;case 26:if(t.deletedAt){e.next=35;break}return f=f<t.onServerAt?t.onServerAt:f,e.next=30,b.to(r.localService.create(t));case 30:p=e.sent,d=i(p,2),s=d[0],d[1],s&&(o=!1);case 35:case"end":return e.stop()}}),e)})))})));case 25:if(this.storage.setItem(this.thisName+"_syncedAt",new Date(f).toISOString()),!o){e.next=34;break}case 27:return e.next=29,this._processQueuedEvents();case 29:if(e.sent){e.next=34;break}return e.next=32,new Promise((function(t){setTimeout((function(){t(!0)}),200)}));case 32:e.next=27;break;case 34:return this.localService.emit("synced",o),e.abrupt("return",o);case 37:case"end":return e.stop()}}),e,this)})))}},{key:"_getSyncOptions",value:function(t){return p(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({},{offline:{_forceAll:!0},$sort:{onServerAt:1}}),r=t?new Date(0).toISOString():this.syncedAt,(o=r<this.syncedAt?r:this.syncedAt)!==new Date(r)&&(n.offline.onServerAt=new Date(o)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"remote",get:function(){return this.remoteService},set:function(t){throw new m.default.Forbidden("You cannot change value of remote!")}},{key:"local",get:function(){return this.localService},set:function(t){throw new m.default.Forbidden("You cannot change value of local!")}},{key:"queue",get:function(){return this.localQueue},set:function(t){throw new m.default.Forbidden("You cannot change value of queue!")}}])&&u(e.prototype,r),C}(v.AdapterService);function E(t){return JSON.parse(JSON.stringify(t))}t.exports=j},3683:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var p=n(2410),d=h(n(2743)),y=n(1707),v=h(n(6976)),m=n(8801)("@feathersjs-offline:owndata:service-wrapper"),g=new Date(0).toISOString(),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(d,t);var e,n,r,h,p=(r=d,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(r);if(h){var n=f(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return s(this,t)});function d(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),m("Constructor started, opts = ".concat(JSON.stringify(t))),(n=p.call(this,t)).type="own-data",n.__forTestingOnly=c((e=u(n),f(d.prototype)),"_processQueuedEvents",e),m("  Done."),s(n,u(n))}return e=d,(n=[{key:"_processQueuedEvents",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,i,a,s,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m("processQueuedEvents (".concat(this.type,") entered")),this.internalProcessingAllowed()&&!this.pQActive){t.next=3;break}return t.abrupt("return",!1);case 3:return this.pQActive=!0,t.next=6,y.to(this.localQueue.getEntries({query:{$sort:(h={},p=this.id,1,p in h?Object.defineProperty(h,p,{value:1,enumerable:!0,configurable:!0,writable:!0}):h[p]=1,h)}}));case 6:if(e=t.sent,(c=e,f=2,n=function(t){if(Array.isArray(t))return t}(c)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(c,f)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(c,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],(r=n[1])&&r!==[]){t.next=13;break}return this.pQActive=!1,t.abrupt("return",!0);case 13:m("  processing ".concat(r.length," queued entries...")),i=this,a=!1,s=regeneratorRuntime.mark((function t(){var e,n,o,s,c,f,h,p,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.shift(),o=(n=e).eventName,s=n.record,c=n.arg1,f=n.arg2,h=n.arg3,p=void 0===h?null:h,d=n.id,v=S(u.id,o,s,c,f,p,d),o=v.eventName,e=v.el,c=v.arg1,f=v.arg2,p=v.arg3,d=v.id,m("    processing: event=".concat(o,", arg1=").concat(JSON.stringify(c),", arg2=").concat(JSON.stringify(f),", arg3=").concat(JSON.stringify(p))),t.next=12,i.remoteService[o](c,f,p).then((function(t){return l(u,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.to(i.localQueue.remove(d));case 2:if("remove"===o){e.next=5;break}return e.next=5,y.to(i.localService.patch(t[i.id],t));case 5:case"end":return e.stop()}}),e)})))})).catch((function(t){return l(u,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m("catch: record=".concat(JSON.stringify(s),", BOT=").concat(JSON.stringify(g),", event=").concat(o,", id=").concat(d)),s.onServerAt!==g||"remove"!==o){t.next=6;break}return t.next=4,y.to(i.localQueue.remove(d));case 4:t.next=7;break;case 6:a=!0;case 7:case"end":return t.stop()}}),t)})))}));case 12:case"end":return t.stop()}}),t)}));case 17:if(!r.length||a){t.next=21;break}return t.delegateYield(s(),"t0",19);case 19:t.next=17;break;case 21:return m("  processing ended, stop=".concat(a)),this.pQActive=!1,t.abrupt("return",!a);case 24:case"end":return t.stop()}var c,f,h,p}),t,this)})))}}])&&i(e.prototype,n),d}(v.default);function w(t){return new b(t)}var _=w;function S(t,e,n,r,o,i,a){var s=n[t];switch(e){case"create":return{eventName:e,el:n,arg1:n,arg2:o,arg3:{},id:a};case"update":return{eventName:e,el:n,arg1:r,arg2:o,arg3:i,id:a};case"patch":return{eventName:e,el:n,arg1:s,arg2:n,arg3:i,id:a};case"remove":return{eventName:e,el:n,arg1:s,arg2:{},arg3:i,id:a}}}t.exports={init:w,Owndata:_,owndataWrapper:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(m("owndataWrapper started on path '".concat(e,"'")),!(t&&t.version&&t.service&&t.services))throw new d.default.Unavailable("The FeathersJS app must be supplied as first argument");var r=p.stripSlashes(e),o=t.service(r);if(void 0===o)throw new d.default.Unavailable("No prior service registered on path '".concat(r,"'"));var i=Object.assign({},o.options,n);t.use(r,_(i));var a=t.service(r);return a.options=i,a._listenOptions(),a}},w.Service=b},3153:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},p=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var d=n(2410),y=p(n(2743)),v=n(1707),m=p(n(6976)),g=n(8801)("@feathersjs-offline:ownnet:service-wrapper"),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(d,t);var e,n,r,i,p=(r=d,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(i){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function d(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),g("Constructor started, opts = ".concat(JSON.stringify(t))),(n=p.call(this,t)).type="own-net",n.__forTestingOnly=f((e=c(n),l(d.prototype)),"_processQueuedEvents",e),g("  Done."),n}return e=d,(n=[{key:"_processQueuedEvents",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,i,a,s,u,c,f,l,p,d,y,m,b,w,_,O,x,k=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g("processQueuedEvents (".concat(this.type,") entered (IPallowed=").concat(this.internalProcessingAllowed(),", pQActive=").concat(this.pQActive,")")),this.internalProcessingAllowed()&&!this.pQActive){t.next=4;break}return g("processingQueuedEvents: leaving  internalProcessing (aIP=".concat(this.aIP,"), pQActive=").concat(this.pQActive)),t.abrupt("return",!1);case 4:return this.pQActive=!0,t.next=7,v.to(this.localQueue.getEntries({query:{$sort:{uuid:1,updatedAt:1}}}));case 7:if(e=t.sent,(n=o(e,2))[0],(r=n[1])&&r!==[]&&0!==r.length){t.next=14;break}return this.pQActive=!1,t.abrupt("return",!0);case 14:this.disallowInternalProcessing(),g("  processing ".concat(r.length," queued entries...")),i=this,a=0,s=0,u=[],c=[],f=[];case 23:for(;a<r.length&&r[a].record.uuid===r[s].record.uuid;)b=r[a],l=b.eventName,p=b.record,d=b.arg1,y=b.arg2,m=b.arg3,u.push(r[a].id),f.push(l),"remove"===l&&(c.push(S(this.id,l,p,d,y,m,u)),f=[],u=[],s=a+1),a++;if(!u.length){t.next=41;break}if(w=void 0,"create"===r[s].eventName){t.next=36;break}return t.next=30,v.to(i.localService.get(r[s].record[this.id]));case 30:_=t.sent,(O=o(_,2))[0],w=O[1],t.next=37;break;case 36:w=r[s].record;case 37:x=f.includes("create")?"create":"update",c.push(S(this.id,x,w,d,y,m,u)),a<r.length&&(f=[r[a].eventName],u=[r[a].id]),s=a++;case 41:if(a<r.length){t.next=23;break}case 42:return g("netOps = ".concat(JSON.stringify(c))),t.next=46,Promise.all(c.map((function(t){return h(k,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,o,a,s,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventName,t.el,r=t.arg1,o=t.arg2,a=t.arg3,s=t.ids,u="  remoteService['".concat(n,"'](").concat(JSON.stringify(r),", ").concat(JSON.stringify(o),", ").concat(JSON.stringify(a),")"),g(u),e.next=5,i.remoteService[n](r,o,a).then((function(t){return h(c,void 0,void 0,regeneratorRuntime.mark((function e(){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.localQueue.remove(null,{query:{id:{$in:(o=s,JSON.parse(JSON.stringify(o)))}}}).then((function(e){return h(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("remove"===n){e.next=4;break}return e.next=3,i.localService.patch(t[i.id],t).catch((function(e){return g(u+" (copy)\n  localService.patch(".concat(JSON.stringify(t[i.id]),", ").concat(JSON.stringify(t),")")),!0})).then((function(){return!1}));case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})))})).catch((function(t){return g("err2=".concat(t.name,", ").concat(t.message)),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var o}),e)})))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))})));case 46:return t.sent,this.allowInternalProcessing(),this.pQActive=!1,t.abrupt("return",!0);case 50:case"end":return t.stop()}}),t,this)})))}}])&&a(e.prototype,n),d}(m.default);function w(t){return new b(t)}var _=w;function S(t,e,n,r,o,i,a){var s=n[t];switch(e){case"create":return{eventName:e,el:n,arg1:n,arg2:o,arg3:{},ids:a};case"update":return{eventName:e,el:n,arg1:r,arg2:o,arg3:i,ids:a};case"patch":return{eventName:e,el:n,arg1:s,arg2:n,arg3:i,ids:a};case"remove":return{eventName:e,el:n,arg1:s,arg2:{},arg3:i,ids:a}}}t.exports={init:w,Ownnet:_,ownnetWrapper:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(g("ownnetWrapper started on path '".concat(e,"'")),!(t&&t.version&&t.service&&t.services))throw new y.default.Unavailable("The FeathersJS app must be supplied as first argument");var r=d.stripSlashes(e),o=t.service(r);if(void 0===o)throw new y.default.Unavailable("No prior service registered on path '".concat(r,"'"));var i=Object.assign({},o.options,n);t.use(r,_(i));var a=t.service(r);return a.options=i,a._listenOptions(),a}},w.Service=b},2564:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(8801)).default("@feathersjs-offline:snapshot");t.exports=function(t,e){o("snapshot start: ".concat(JSON.stringify(e)));var n,r=Object.assign({},{$skip:0,$limit:200},e);return t.find({query:r}).then((function(t){if(o("snapshot query = ".concat(JSON.stringify(r),", read ").concat((t.data||t).length," records\n\n             snapshot   read ").concat(JSON.stringify(t.data||t))),!t.data)return t;var e=t.total,a=t.limit,s=t.skip,u=t.data;return n=u,s+u.length<e?i(s+a):n}));function i(e){return r.$skip=e,t.find({query:r}).then((function(t){var e=t.total,r=t.limit,a=t.skip,s=t.data;return o("read ".concat(s.length," records")),n=n.concat(s),a+s.length<e?i(a+r):n}))}}},487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},1012:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?n.push(e.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}},t.exports=n},7187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,r){function o(){void 0!==i&&t.removeListener("error",i),n([].slice.call(arguments))}var i;"error"!==e&&(i=function(n){t.removeListener(e,o),r(n)},t.once("error",i)),t.once(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var o,i,a,c;if(s(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=u(t))>0&&a.length>o&&!a.warned){a.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=a.length,c=f,console&&console.warn&&console.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function h(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):d(o,o.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)r(u,this,e);else{var c=u.length,f=d(u,c);for(n=0;n<c;++n)r(f[n],this,e)}return!0},i.prototype.addListener=function(t,e){return c(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return c(this,t,e,!0)},i.prototype.once=function(t,e){return s(e),this.on(t,l(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,l(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,o,i,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},i.prototype.listeners=function(t){return h(this,t,!0)},i.prototype.rawListeners=function(t){return h(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7203:(t,e,n)=>{const{Service:r}=n(8691),o=[];class i extends r{constructor(t={}){if(super(t),this._storageKey=t.name||"feathers",this._storage=t.storage||"undefined"!=typeof window&&window.localStorage,this._throttle=t.throttle||200,this._reuseKeys=t.reuseKeys||!1,this.store=null,!this._storage)throw new Error("The `storage` option needs to be provided");if(-1===o.indexOf(this._storageKey))o.push(this._storageKey);else if(!this._reuseKeys)throw new Error(`The storage name '${this._storageKey}' is already in use by another instance.`);this.ready()}ready(){return this.store?Promise.resolve(this.store):Promise.resolve(this._storage.getItem(this._storageKey)).then((t=>JSON.parse(t||"{}"))).then((t=>{const e=Object.keys(t),n=t[e[e.length-1]];return this._uId=e.length&&void 0!==n[this.id]?n[this.id]+1:this._uId,this.store=t}))}flush(t){return this._timeout||(this._timeout=setTimeout((()=>{this._storage.setItem(this._storageKey,JSON.stringify(this.store)),delete this._timeout}),this._throttle)),t}execute(t,...e){return this.ready().then((()=>super[t](...e)))}find(...t){return this.execute("find",...t)}get(...t){return this.execute("get",...t)}create(...t){return this.execute("create",...t).then((t=>this.flush(t)))}patch(...t){return this.execute("patch",...t).then((t=>this.flush(t)))}update(...t){return this.execute("update",...t).then((t=>this.flush(t)))}remove(...t){return this.execute("remove",...t).then((t=>this.flush(t)))}}t.exports=function(t){return new i(t)},t.exports.Service=r},8691:(t,e,n)=>{const r=n(2743),{_:o}=n(2410),{sorter:i,select:a,AdapterService:s}=n(3597),u=n(41).ZP,c=(t,...e)=>a(...e)(JSON.parse(JSON.stringify(t)));class f extends s{constructor(t={}){super(o.extend({id:"id",matcher:u,sorter:i},t)),this._uId=t.startId||0,this.store=t.store||{}}async getEntries(t={}){const{query:e}=this.filterQuery(t);return this._find(Object.assign({},t,{paginate:!1,query:e}))}async _find(t={}){const{query:e,filters:n,paginate:r}=this.filterQuery(t);let i=o.values(this.store).filter(this.options.matcher(e));const a=i.length;void 0!==n.$sort&&i.sort(this.options.sorter(n.$sort)),void 0!==n.$skip&&(i=i.slice(n.$skip)),void 0!==n.$limit&&(i=i.slice(0,n.$limit));const s={total:a,limit:n.$limit,skip:n.$skip||0,data:i.map((e=>c(e,t)))};return r&&r.default?s:s.data}async _get(t,e={}){if(t in this.store){const{query:n}=this.filterQuery(e),r=this.store[t];if(this.options.matcher(n)(r))return c(r,e,this.id)}throw new r.NotFound(`No record found for id '${t}'`)}async _create(t,e={}){if(Array.isArray(t))return Promise.all(t.map((t=>this._create(t,e))));const n=t[this.id]||this._uId++,r=o.extend({},t,{[this.id]:n}),i=this.store[n]=r;return c(i,e,this.id)}async _update(t,e,n={}){const r=(await this._get(t))[this.id];return t=r==t?r:t,this.store[t]=o.extend({},e,{[this.id]:t}),this._get(t,n)}async _patch(t,e,n={}){const r=t=>{const r=t[this.id];return this.store[r]=o.extend(this.store[r],o.omit(e,this.id)),c(this.store[r],n,this.id)};return null===t?(await this.getEntries(n)).map(r):r(await this._get(t,n))}async _remove(t,e={}){if(null===t){const t=await this.getEntries(e);return Promise.all(t.map((t=>this._remove(t[this.id],e))))}const n=await this._get(t,e);return delete this.store[t],n}}t.exports=t=>new f(t),t.exports.Service=f},41:(t,e,n)=>{"use strict";function r(t){var e="[object "+t+"]";return function(t){return Object.prototype.toString.call(t)===e}}n.d(e,{ZP:()=>S});var o=r("Array"),i=r("Object"),a=r("Function");function s(t,e){return a(t.get)?t.get(e):t[e]}const u=(c=t=>function(e,n,r,i,a){if(!o(n)||!n.length)return t(e,n);for(var u=0,c=n.length;u<c;u++)if(t(e,s(n,u)))return!0;return!1},(t,e,n,r,o)=>o?Boolean(o.find((([e,n,r])=>c(t)))):c(t));var c;function f(t){return function(e,n,r,i){if(!o(n)||!n.length)return t(e,n,r,i);for(var a=0,u=n.length;a<u;a++)if(!t(e,s(n,a),n,i))return!1;return!0}}function l(t,e,n,r,o){return t.validate(t.options,e,n,r,o)}var h={$eq:u((function(t,e){return t(e)})),$ne:f((function(t,e){return t(e)})),$gt:u((function(t,e){return t(e)})),$gte:u((function(t,e){return t(e)})),$lt:u((function(t,e){return t(e)})),$lte:u((function(t,e){return t(e)})),$mod:u((function(t,e){return t(e)})),$in:(t,e)=>t(e),$nin:function(t,e){return t(e)},$not:function(t,e,n,r){return t(e,n,r)},$type:function(t,e){return t(e)},$all:function(t,e,n,r,o){return h.$and(t,e,n,r,o)},$size:function(t,e){return!!e&&t===e.length},$or:function(t,e,n,r){for(var o=0,i=t.length;o<i;o++)if(l(s(t,o),e,n,r))return!0;return!1},$nor:function(t,e,n,r){return!h.$or(t,e,n,r)},$and:function(t,e,n,r,o){if(o){for(var i=0,a=t.length;i<a;i++)if(!l(s(t,i),e,n,r,o))return!1}else for(i=0,a=t.length;i<a;i++)if(!l(s(t,i),e,n,r,o))return!1;return!0},$regex:u((function(t,e){return"string"==typeof e&&t.test(e)})),$where:function(t,e,n,r){return t.call(e,e,n,r)},$elemMatch:function(t,e,n,r){return o(e)?!!~function(t,e){for(var n=0;n<t.length;n++)if(s(t,n),l(e,s(t,n)))return n;return-1}(e,t):l(t,e,n,r)},$exists:function(t,e,n,r){return r.hasOwnProperty(n)===t}},p={$eq:function(t,e,{comparable:n,compare:r}){return t instanceof RegExp?u((function(e){return"string"==typeof e&&t.test(e)})):t instanceof Function?u(t):o(t)&&!t.length?u((function(t){return o(t)&&!t.length})):u(null===t?function(t){return null==t}:function(e){return 0===r(n(e),n(t))})},$gt:function(t,e,{comparable:n,compare:r}){return function(e){return r(n(e),n(t))>0}},$gte:function(t,e,{comparable:n,compare:r}){return function(e){return r(n(e),n(t))>=0}},$lt:function(t,e,{comparable:n,compare:r}){return function(e){return r(n(e),n(t))<0}},$lte:function(t,e,{comparable:n,compare:r}){return function(e){return r(n(e),n(t))<=0}},$in:function(t,e,n){const{comparable:r}=n;return function(e){if(!(e instanceof Array)){var o=r(e);if(o===e&&"object"==typeof e)for(a=t.length;a--;)if(String(t[a])===String(e)&&"[object Object]"!==String(e))return!0;if(void 0===o)for(a=t.length;a--;)if(null==t[a])return!0;for(a=t.length;a--;){var i=l(_(s(t,a),n),o,a,t);if(i&&"[object Object]"!==String(i)&&"[object Object]"!==String(o))return!0}return!!~t.indexOf(o)}for(var a=e.length;a--;)if(~t.indexOf(r(s(e,a))))return!0;return!1}},$nin:function(t,e,n){const r=p.$in(t,e,n);return function(t,e,n,o){return!r(t,e,n,o)}},$mod:function(t){return function(e){return e%t[0]==t[1]}},$ne:function(t,e,n){const r=p.$eq(t,e,n);return f((function(t,e,n,o){return!r(t,e,n,o)}))},$and:function(t,e,n){return t.map(g(n))},$all:function(t,e,n){return p.$and(t,e,n)},$or:function(t,e,n){return t.map(g(n))},$nor:function(t,e,n){return t.map(g(n))},$not:function(t,e,n){const r=g(n)(t);return function(t,e,n){return!l(r,t,e,n)}},$type:function(t){return function(e,n,r){return null!=e&&(e instanceof t||e.constructor==t)}},$regex:function(t,e){return new RegExp(t,e.$options)},$where:function(t){return"string"==typeof t?new Function("obj","return "+t):t},$elemMatch:function(t,e,n){return g(n)(t)},$exists:function(t){return!!t}};function d(t,e){return{options:t,validate:e}}function y({keyPath:t,child:e,query:n},r){const o=[];if(v(r,t,0,r,o),1===o.length){const[t,n,r]=o[0];return l(e,t,n,r)}return n&&n.$ne,o.map((([t])=>t)),l(e,void 0,void 0,void 0,o)}function v(t,e,n,r,i){if(n!==e.length&&null!=t){var a=s(e,n);if(o(t)&&isNaN(Number(a)))for(var u=0,c=t.length;u<c;u++)v(s(t,u),e,n,t,i);else v(s(t,a),e,n+1,t,i)}else i.push([t,e[n-1],r])}function m(t,e,n){return d({keyPath:t,child:e,query:n},y)}function g(t){const{comparable:e,expressions:n}=t;var r=function(t){var e;return t&&(e=t)&&(e.constructor===Object||e.constructor===Array||"function Object() { [native code] }"===e.constructor.toString()||"function Array() { [native code] }"===e.constructor.toString())||(t={$eq:t}),t},o=function(r){r=e(r);var o=[];for(var a in r){var s=r[a];if("$options"!==a){var u=h[a]||t&&n&&n[a];if(u)p[a]&&(s=p[a](s,r,t)),o.push(d(e(s),u));else{if(36===a.charCodeAt(0))throw new Error("Unknown operation "+a);var c=a.split(".");o.push(m(c,i(s),s))}}}return 1===o.length?o[0]:d(o,h.$and)},i=function(t){return-1===w(t=r(t),[]).join(",").search(/[$.]/)?d(t,b):o(t)};return function(t){return o(r(t))}}function b(t,e){if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))return!1;if(i(t)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!b(t[n],e[n]))return!1;return!0}if(o(t)){if(t.length!==e.length)return!1;for(var r=0,a=t.length;r<a;r++)if(!b(t[r],e[r]))return!1;return!0}return t===e}function w(t,e){if(!i(t))return e;for(var n in t)e.push(n),w(t[n],e);return e}function _(t,e){var n=g(e)(t);return e&&e.select&&(n={options:n,validate:function(t,n,r,o){return l(t,n&&e.select(n),r,o)}}),n}function S(t,e){var n=_(t,e=Object.assign({compare:O,comparable:x},e));return function(t,e,r){return l(n,t,e,r)}}function O(t,e){if(b(t,e))return 0;if(typeof t==typeof e){if(t>e)return 1;if(t<e)return-1}}function x(t){return t instanceof Date?t.getTime():o(t)?t.map(x):t&&"function"==typeof t.toJSON?t.toJSON():t}},6458:t=>{"use strict";t.exports=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:t.__proto__};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}},77:(t,e,n)=>{var r,o,i=n(2993),a=n(2161),s=n(8520),u=n(6458),c=n(1758);function f(t,e){Object.defineProperty(t,r,{get:function(){return e}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(r=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(r="___graceful-fs.queue",o="___graceful-fs.previous");var l=function(){};if(c.debuglog?l=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(l=function(){var t=c.format.apply(c,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!i[r]){var h=n.g[r]||[];f(i,h),i.close=function(t){function e(e,n){return t.call(i,e,(function(t){t||y(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(e,o,{value:t}),e}(i.close),i.closeSync=function(t){function e(e){t.apply(i,arguments),y()}return Object.defineProperty(e,o,{value:t}),e}(i.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){l(i[r]),n(7680).equal(i[r].length,0)}))}function p(t){a(t),t.gracefulify=p,t.createReadStream=function(e,n){return new t.ReadStream(e,n)},t.createWriteStream=function(e,n){return new t.WriteStream(e,n)};var e=t.readFile;t.readFile=function(t,n,r){return"function"==typeof n&&(r=n,n=null),function t(n,r,o){return e(n,r,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof o&&o.apply(this,arguments),y()):d([t,[n,r,o]])}))}(t,n,r)};var n=t.writeFile;t.writeFile=function(t,e,r,o){return"function"==typeof r&&(o=r,r=null),function t(e,r,o,i){return n(e,r,o,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof i&&i.apply(this,arguments),y()):d([t,[e,r,o,i]])}))}(t,e,r,o)};var r=t.appendFile;r&&(t.appendFile=function(t,e,n,o){return"function"==typeof n&&(o=n,n=null),function t(e,n,o,i){return r(e,n,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof i&&i.apply(this,arguments),y()):d([t,[e,n,o,i]])}))}(t,e,n,o)});var o=t.readdir;function i(e){return o.apply(t,e)}if(t.readdir=function(t,e,n){var r=[t];return"function"!=typeof e?r.push(e):n=e,r.push((function(t,e){e&&e.sort&&e.sort(),!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof n&&n.apply(this,arguments),y()):d([i,[r]])})),i(r)},"v0.8"===process.version.substr(0,4)){var u=s(t);v=u.ReadStream,m=u.WriteStream}var c=t.ReadStream;c&&(v.prototype=Object.create(c.prototype),v.prototype.open=function(){var t=this;b(t.path,t.flags,t.mode,(function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())}))});var f=t.WriteStream;f&&(m.prototype=Object.create(f.prototype),m.prototype.open=function(){var t=this;b(t.path,t.flags,t.mode,(function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return v},set:function(t){v=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return m},set:function(t){m=t},enumerable:!0,configurable:!0});var l=v;Object.defineProperty(t,"FileReadStream",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0});var h=m;function v(t,e){return this instanceof v?(c.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function m(t,e){return this instanceof m?(f.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return h},set:function(t){h=t},enumerable:!0,configurable:!0});var g=t.open;function b(t,e,n,r){return"function"==typeof n&&(r=n,n=null),function t(e,n,r,o){return g(e,n,r,(function(i,a){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?("function"==typeof o&&o.apply(this,arguments),y()):d([t,[e,n,r,o]])}))}(t,e,n,r)}return t.open=b,t}function d(t){l("ENQUEUE",t[0].name,t[1]),i[r].push(t)}function y(){var t=i[r].shift();t&&(l("RETRY",t[0].name,t[1]),t[0].apply(null,t[1]))}n.g[r]||f(n.g,i[r]),t.exports=p(u(i)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!i.__patched&&(t.exports=p(i),i.__patched=!0)},8520:(t,e,n)=>{var r=n(791).Stream;t.exports=function(t){return{ReadStream:function e(n,o){if(!(this instanceof e))return new e(n,o);r.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var a=Object.keys(o),s=0,u=a.length;s<u;s++){var c=a[s];this[c]=o[c]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?t.open(this.path,this.flags,this.mode,(function(t,e){if(t)return i.emit("error",t),void(i.readable=!1);i.fd=e,i.emit("open",e),i._read()})):process.nextTick((function(){i._read()}))},WriteStream:function e(n,o){if(!(this instanceof e))return new e(n,o);r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var i=Object.keys(o),a=0,s=i.length;a<s;a++){var u=i[a];this[u]=o[u]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},2161:(t,e,n)=>{var r=n(8510),o=process.cwd,i=null,a=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return i||(i=o.call(process)),i};try{process.cwd()}catch(t){}var s=process.chdir;process.chdir=function(t){i=null,s.call(process,t)},t.exports=function(t){var e,n;function o(e){return e?function(n,r,o){return e.call(t,n,r,(function(t){l(t)&&(t=null),o&&o.apply(this,arguments)}))}:e}function i(e){return e?function(n,r){try{return e.call(t,n,r)}catch(t){if(!l(t))throw t}}:e}function s(e){return e?function(n,r,o,i){return e.call(t,n,r,o,(function(t){l(t)&&(t=null),i&&i.apply(this,arguments)}))}:e}function u(e){return e?function(n,r,o){try{return e.call(t,n,r,o)}catch(t){if(!l(t))throw t}}:e}function c(e){return e?function(n,r,o){function i(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof r&&(o=r,r=null),r?e.call(t,n,r,i):e.call(t,n,i)}:e}function f(e){return e?function(n,r){var o=r?e.call(t,n,r):e.call(t,n);return o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296),o}:e}function l(t){return!t||"ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code)}r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,o){t.open(e,r.O_WRONLY|r.O_SYMLINK,n,(function(e,r){e?o&&o(e):t.fchmod(r,n,(function(e){t.close(r,(function(t){o&&o(e||t)}))}))}))},t.lchmodSync=function(e,n){var o,i=t.openSync(e,r.O_WRONLY|r.O_SYMLINK,n),a=!0;try{o=t.fchmodSync(i,n),a=!1}finally{if(a)try{t.closeSync(i)}catch(t){}else t.closeSync(i)}return o}}(t),t.lutimes||function(t){r.hasOwnProperty("O_SYMLINK")?(t.lutimes=function(e,n,o,i){t.open(e,r.O_SYMLINK,(function(e,r){e?i&&i(e):t.futimes(r,n,o,(function(e){t.close(r,(function(t){i&&i(e||t)}))}))}))},t.lutimesSync=function(e,n,o){var i,a=t.openSync(e,r.O_SYMLINK),s=!0;try{i=t.futimesSync(a,n,o),s=!1}finally{if(s)try{t.closeSync(a)}catch(t){}else t.closeSync(a)}return i}):(t.lutimes=function(t,e,n,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=o(t.chmod),t.fchmod=o(t.fchmod),t.lchmod=o(t.lchmod),t.chownSync=u(t.chownSync),t.fchownSync=u(t.fchownSync),t.lchownSync=u(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=c(t.stat),t.fstat=c(t.fstat),t.lstat=c(t.lstat),t.statSync=f(t.statSync),t.fstatSync=f(t.fstatSync),t.lstatSync=f(t.lstatSync),t.lchmod||(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){}),t.lchown||(t.lchown=function(t,e,n,r){r&&process.nextTick(r)},t.lchownSync=function(){}),"win32"===a&&(t.rename=(e=t.rename,function(n,r,o){var i=Date.now(),a=0;e(n,r,(function s(u){if(u&&("EACCES"===u.code||"EPERM"===u.code)&&Date.now()-i<6e4)return setTimeout((function(){t.stat(r,(function(t,i){t&&"ENOENT"===t.code?e(n,r,s):o(u)}))}),a),void(a<100&&(a+=10));o&&o(u)}))})),t.read=function(e){function n(n,r,o,i,a,s){var u;if(s&&"function"==typeof s){var c=0;u=function(f,l,h){if(f&&"EAGAIN"===f.code&&c<10)return c++,e.call(t,n,r,o,i,a,u);s.apply(this,arguments)}}return e.call(t,n,r,o,i,a,u)}return n.__proto__=e,n}(t.read),t.readSync=(n=t.readSync,function(e,r,o,i,a){for(var s=0;;)try{return n.call(t,e,r,o,i,a)}catch(t){if("EAGAIN"===t.code&&s<10){s++;continue}throw t}})}},4269:t=>{!function(){var e;function n(t,r){var o=this instanceof n?this:e;if(o.reset(r),"string"==typeof t&&t.length>0&&o.hash(t),o!==this)return o}n.prototype.hash=function(t){var e,n,r,o,i;switch(i=t.length,this.len+=i,n=this.k1,r=0,this.rem){case 0:n^=i>r?65535&t.charCodeAt(r++):0;case 1:n^=i>r?(65535&t.charCodeAt(r++))<<8:0;case 2:n^=i>r?(65535&t.charCodeAt(r++))<<16:0;case 3:n^=i>r?(255&t.charCodeAt(r))<<24:0,n^=i>r?(65280&t.charCodeAt(r++))>>8:0}if(this.rem=i+this.rem&3,(i-=this.rem)>0){for(e=this.h1;e=5*(e=(e^=n=13715*(n=(n=11601*n+3432906752*(65535&n)&4294967295)<<15|n>>>17)+461832192*(65535&n)&4294967295)<<13|e>>>19)+3864292196&4294967295,!(r>=i);)n=65535&t.charCodeAt(r++)^(65535&t.charCodeAt(r++))<<8^(65535&t.charCodeAt(r++))<<16,n^=(255&(o=t.charCodeAt(r++)))<<24^(65280&o)>>8;switch(n=0,this.rem){case 3:n^=(65535&t.charCodeAt(r+2))<<16;case 2:n^=(65535&t.charCodeAt(r+1))<<8;case 1:n^=65535&t.charCodeAt(r)}this.h1=e}return this.k1=n,this},n.prototype.result=function(){var t,e;return t=this.k1,e=this.h1,t>0&&(e^=t=13715*(t=(t=11601*t+3432906752*(65535&t)&4294967295)<<15|t>>>17)+461832192*(65535&t)&4294967295),e^=this.len,e=51819*(e^=e>>>16)+2246770688*(65535&e)&4294967295,e=44597*(e^=e>>>13)+3266445312*(65535&e)&4294967295,(e^=e>>>16)>>>0},n.prototype.reset=function(t){return this.h1="number"==typeof t?t:0,this.rem=this.k1=this.len=0,this},e=new n,t.exports=n}()},8738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},2568:(t,e,n)=>{var r,o,i,a,s;r=n(1012),o=n(487).utf8,i=n(8738),a=n(487).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):o.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=r.bytesToWords(t),u=8*t.length,c=1732584193,f=-271733879,l=-1732584194,h=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=s._ff,y=s._gg,v=s._hh,m=s._ii;for(p=0;p<n.length;p+=16){var g=c,b=f,w=l,_=h;c=d(c,f,l,h,n[p+0],7,-680876936),h=d(h,c,f,l,n[p+1],12,-389564586),l=d(l,h,c,f,n[p+2],17,606105819),f=d(f,l,h,c,n[p+3],22,-1044525330),c=d(c,f,l,h,n[p+4],7,-176418897),h=d(h,c,f,l,n[p+5],12,1200080426),l=d(l,h,c,f,n[p+6],17,-1473231341),f=d(f,l,h,c,n[p+7],22,-45705983),c=d(c,f,l,h,n[p+8],7,1770035416),h=d(h,c,f,l,n[p+9],12,-1958414417),l=d(l,h,c,f,n[p+10],17,-42063),f=d(f,l,h,c,n[p+11],22,-1990404162),c=d(c,f,l,h,n[p+12],7,1804603682),h=d(h,c,f,l,n[p+13],12,-40341101),l=d(l,h,c,f,n[p+14],17,-1502002290),c=y(c,f=d(f,l,h,c,n[p+15],22,1236535329),l,h,n[p+1],5,-165796510),h=y(h,c,f,l,n[p+6],9,-1069501632),l=y(l,h,c,f,n[p+11],14,643717713),f=y(f,l,h,c,n[p+0],20,-373897302),c=y(c,f,l,h,n[p+5],5,-701558691),h=y(h,c,f,l,n[p+10],9,38016083),l=y(l,h,c,f,n[p+15],14,-660478335),f=y(f,l,h,c,n[p+4],20,-405537848),c=y(c,f,l,h,n[p+9],5,568446438),h=y(h,c,f,l,n[p+14],9,-1019803690),l=y(l,h,c,f,n[p+3],14,-187363961),f=y(f,l,h,c,n[p+8],20,1163531501),c=y(c,f,l,h,n[p+13],5,-1444681467),h=y(h,c,f,l,n[p+2],9,-51403784),l=y(l,h,c,f,n[p+7],14,1735328473),c=v(c,f=y(f,l,h,c,n[p+12],20,-1926607734),l,h,n[p+5],4,-378558),h=v(h,c,f,l,n[p+8],11,-2022574463),l=v(l,h,c,f,n[p+11],16,1839030562),f=v(f,l,h,c,n[p+14],23,-35309556),c=v(c,f,l,h,n[p+1],4,-1530992060),h=v(h,c,f,l,n[p+4],11,1272893353),l=v(l,h,c,f,n[p+7],16,-155497632),f=v(f,l,h,c,n[p+10],23,-1094730640),c=v(c,f,l,h,n[p+13],4,681279174),h=v(h,c,f,l,n[p+0],11,-358537222),l=v(l,h,c,f,n[p+3],16,-722521979),f=v(f,l,h,c,n[p+6],23,76029189),c=v(c,f,l,h,n[p+9],4,-640364487),h=v(h,c,f,l,n[p+12],11,-421815835),l=v(l,h,c,f,n[p+15],16,530742520),c=m(c,f=v(f,l,h,c,n[p+2],23,-995338651),l,h,n[p+0],6,-198630844),h=m(h,c,f,l,n[p+7],10,1126891415),l=m(l,h,c,f,n[p+14],15,-1416354905),f=m(f,l,h,c,n[p+5],21,-57434055),c=m(c,f,l,h,n[p+12],6,1700485571),h=m(h,c,f,l,n[p+3],10,-1894986606),l=m(l,h,c,f,n[p+10],15,-1051523),f=m(f,l,h,c,n[p+1],21,-2054922799),c=m(c,f,l,h,n[p+8],6,1873313359),h=m(h,c,f,l,n[p+15],10,-30611744),l=m(l,h,c,f,n[p+6],15,-1560198380),f=m(f,l,h,c,n[p+13],21,1309151649),c=m(c,f,l,h,n[p+4],6,-145523070),h=m(h,c,f,l,n[p+11],10,-1120210379),l=m(l,h,c,f,n[p+2],15,718787259),f=m(f,l,h,c,n[p+9],21,-343485551),c=c+g>>>0,f=f+b>>>0,l=l+w>>>0,h=h+_>>>0}return r.endian([c,f,l,h])})._ff=function(t,e,n,r,o,i,a){var s=t+(e&n|~e&r)+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._gg=function(t,e,n,r,o,i,a){var s=t+(e&r|n&~r)+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._hh=function(t,e,n,r,o,i,a){var s=t+(e^n^r)+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._ii=function(t,e,n,r,o,i,a){var s=t+(n^(e|~r))+(o>>>0)+a;return(s<<i|s>>>32-i)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(s(t,e));return e&&e.asBytes?n:e&&e.asString?a.bytesToString(n):r.bytesToHex(n)}},7824:t=>{var e=1e3,n=60*e,r=60*n,o=24*r;function i(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}t.exports=function(t,a){a=a||{};var s,u,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===c&&isFinite(t))return a.long?(s=t,(u=Math.abs(s))>=o?i(s,u,o,"day"):u>=r?i(s,u,r,"hour"):u>=n?i(s,u,n,"minute"):u>=e?i(s,u,e,"second"):s+" ms"):function(t){var i=Math.abs(t);return i>=o?Math.round(t/o)+"d":i>=r?Math.round(t/r)+"h":i>=n?Math.round(t/n)+"m":i>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},9968:function(t,e,n){(function(){var t,r,o,i,a,s,u,c,f,l,h,p,d,y,v=function(t,e){for(var n in e)m.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;d=n(1386),p=n(2993),h=n(7187),y=n(902).sync,r="---.EMPTY_STRING.---",u=function(t){var e,n,r,o,i;for(i=[],e=0,n=(o=p.readdirSync(t)).length;e<n;e++)r=o[e],i.push(f(d.join(t,r)));return i},f=function(t){return p.statSync(t).isDirectory()?(u(t),p.rmdirSync(t)):p.unlinkSync(t)},c=function(t){return""===t?r:t.toString()},a=function(t){function e(t){this.message=null!=t?t:"Unknown error.",e.__super__.constructor.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}return v(e,t),e.prototype.toString=function(){return this.name+": "+this.message},e}(Error),s=function(t,e,n,r,o){this.key=t,this.oldValue=e,this.newValue=n,this.url=r,this.storageArea=null!=o?o:"localStorage"},i=function t(e,n){if(this.key=e,this.index=n,!(this instanceof t))return new t(this.key,this.index)},l=function(){var t;return(t=function(){}).prototype=Object.create(null),new t},t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.setItem=function(t,n){var r;return r=JSON.stringify(n),e.__super__.setItem.call(this,t,r)},e.prototype.getItem=function(t){return JSON.parse(e.__super__.getItem.call(this,t))},e}(o=function(t){var e;function n(t,r){var o,i;return this._location=t,this.quota=null!=r?r:5242880,n.__super__.constructor.call(this),this instanceof n?(this._location=d.resolve(this._location),null!=e[this._location]?e[this._location]:(this.length=0,this._bytesInUse=0,this._keys=[],this._metaKeyMap=l(),this._eventUrl="pid:"+process.pid,this._init(),this._QUOTA_EXCEEDED_ERR=a,"undefined"!=typeof Proxy&&null!==Proxy?(o={set:(i=this,function(t,e,n){return null!=i[e]?i[e]=n:i.setItem(e,n)}),get:function(t){return function(e,n){return null!=t[n]?t[n]:t.getItem(n)}}(this)},e[this._location]=new Proxy(this,o),e[this._location]):(e[this._location]=this,e[this._location]))):new n(this._location,this.quota)}return v(n,t),e={},n.prototype._init=function(){var t,e,n,r,o,a,s,u,c;try{if(null!=(c=p.statSync(this._location))&&!c.isDirectory())throw new Error("A file exists at the location '"+this._location+"' when trying to create/open localStorage");for(this._bytesInUse=0,this.length=0,n=p.readdirSync(this._location),a=o=0,u=n.length;o<u;a=++o)s=n[a],e=decodeURIComponent(s),this._keys.push(e),t=new i(s,a),this._metaKeyMap[e]=t,null!=(null!=(c=this._getStat(s))?c.size:void 0)&&(t.size=c.size,this._bytesInUse+=c.size);this.length=n.length}catch(t){if("ENOENT"!==(r=t).code)throw r;try{p.mkdirSync(this._location,{recursive:!0})}catch(t){if("EEXIST"!==(r=t).code)throw r}}},n.prototype.setItem=function(t,e){var n,r,o,u,f,l,p,v,m,g;if(v=null,(f=h.EventEmitter.listenerCount(this,"storage"))&&(v=this.getItem(t)),t=c(t),n=encodeURIComponent(t),u=d.join(this._location,n),g=(m=e.toString()).length,p=(o=!!(l=this._metaKeyMap[t]))?l.size:0,this._bytesInUse-p+g>this.quota)throw new a;if(y(u,m,"utf8"),o||((l=new i(n,this._keys.push(t)-1)).size=g,this._metaKeyMap[t]=l,this.length+=1,this._bytesInUse+=g),f)return r=new s(t,v,e,this._eventUrl),this.emit("storage",r)},n.prototype.getItem=function(t){var e,n;return t=c(t),(n=this._metaKeyMap[t])?(e=d.join(this._location,n.key),p.readFileSync(e,"utf8")):null},n.prototype._getStat=function(t){var e;t=c(t),e=d.join(this._location,encodeURIComponent(t));try{return p.statSync(e)}catch(t){return null}},n.prototype.removeItem=function(t){var e,n,r,o,i,a,u,l;if(t=c(t),a=this._metaKeyMap[t]){for(o in u=null,(r=h.EventEmitter.listenerCount(this,"storage"))&&(u=this.getItem(t)),delete this._metaKeyMap[t],this.length-=1,this._bytesInUse-=a.size,n=d.join(this._location,a.key),this._keys.splice(a.index,1),l=this._metaKeyMap)l[o],(i=this._metaKeyMap[o]).index>a.index&&(i.index-=1);if(f(n),r)return e=new s(t,u,null,this._eventUrl),this.emit("storage",e)}},n.prototype.key=function(t){var e;return(e=this._keys[t])===r?"":e},n.prototype.clear=function(){var t;if(u(this._location),this._metaKeyMap=l(),this._keys=[],this.length=0,this._bytesInUse=0,h.EventEmitter.listenerCount(this,"storage"))return t=new s(null,null,null,this._eventUrl),this.emit("storage",t)},n.prototype._getBytesInUse=function(){return this._bytesInUse},n.prototype._deleteLocation=function(){return delete e[this._location],f(this._location),this._metaKeyMap={},this._keys=[],this.length=0,this._bytesInUse=0},n}(h.EventEmitter)),e.LocalStorage=o,e.JSONStorage=t,e.QUOTA_EXCEEDED_ERR=a}).call(this)},4670:(t,e,n)=>{"use strict";t.exports=n(5607)},9829:(t,e,n)=>{"use strict";var r,o,i,a=n(8946),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){i=!1}function c(t){if(t){if(t!==r){if(t.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter((function(t,e,n){return e!==n.lastIndexOf(t)}));if(e.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+e.join(", "));r=t,u()}}else r!==s&&(r=s,u())}function f(){return i||(i=function(){r||c(s);for(var t,e=r.split(""),n=[],o=a.nextValue();e.length>0;)o=a.nextValue(),t=Math.floor(o*e.length),n.push(e.splice(t,1)[0]);return n.join("")}())}t.exports={get:function(){return r||s},characters:function(t){return c(t),r},seed:function(t){a.seed(t),o!==t&&(u(),o=t)},lookup:function(t){return f()[t]},shuffled:f}},480:(t,e,n)=>{"use strict";var r,o,i=n(8416);n(9829),t.exports=function(t){var e="",n=Math.floor(.001*(Date.now()-1567752802062));return n===o?r++:(r=0,o=n),e+=i(7),e+=i(t),r>0&&(e+=i(r)),e+i(n)}},8416:(t,e,n)=>{"use strict";var r=n(9829),o=n(3766),i=n(296);t.exports=function(t){for(var e,n=0,a="";!e;)a+=i(o,r.get(),1),e=t<Math.pow(16,n+1),n++;return a}},5607:(t,e,n)=>{"use strict";var r=n(9829),o=n(480),i=n(1082),a=n(5636)||0;function s(){return o(a)}t.exports=s,t.exports.generate=s,t.exports.seed=function(e){return r.seed(e),t.exports},t.exports.worker=function(e){return a=e,t.exports},t.exports.characters=function(t){return void 0!==t&&r.characters(t),r.shuffled()},t.exports.isValid=i},1082:(t,e,n)=>{"use strict";var r=n(9829);t.exports=function(t){return!(!t||"string"!=typeof t||t.length<6||new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t))}},3766:t=>{"use strict";var e,n="object"==typeof window&&(window.crypto||window.msCrypto);e=n&&n.getRandomValues?function(t){return n.getRandomValues(new Uint8Array(t))}:function(t){for(var e=[],n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e},t.exports=e},8946:t=>{"use strict";var e=1;t.exports={nextValue:function(){return(e=(9301*e+49297)%233280)/233280},seed:function(t){e=t}}},5636:t=>{"use strict";t.exports=0},296:t=>{t.exports=function(t,e,n){for(var r=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*r*n/e.length),i="";;)for(var a=t(o),s=o;s--;)if((i+=e[a[s]&r]||"").length===+n)return i}},2530:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>ft,$Size:()=>$,$all:()=>ot,$and:()=>rt,$elemMatch:()=>K,$eq:()=>Q,$exists:()=>X,$gt:()=>Y,$gte:()=>G,$in:()=>W,$lt:()=>H,$lte:()=>V,$mod:()=>Z,$ne:()=>q,$nin:()=>z,$nor:()=>B,$not:()=>et,$options:()=>at,$or:()=>D,$regex:()=>tt,$size:()=>it,$type:()=>nt,$where:()=>st,EqualsOperation:()=>w,createDefaultQueryOperation:()=>ct,createEqualsOperation:()=>_,createOperationTester:()=>C,createQueryOperation:()=>j,createQueryTester:()=>N});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(t){var e="[object "+t+"]";return function(t){return a(t)===e}},a=function(t){return Object.prototype.toString.call(t)},s=function(t){return t instanceof Date?t.getTime():u(t)?t.map(s):t&&"function"==typeof t.toJSON?t.toJSON():t},u=i("Array"),c=i("Object"),f=i("Function"),l=function(t,e){if(null==t&&t==e)return!0;if(t===e)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))return!1;if(u(t)){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(!l(t[n],e[n]))return!1;return!0}if(c(t)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(!l(t[o],e[o]))return!1;return!0}return!1},h=function(t,e,n,r,o,i){var a=e[r];if(u(t)&&isNaN(Number(a)))for(var s=0,c=t.length;s<c;s++)if(!h(t[s],e,n,r,s,t))return!1;return r===e.length||null==t?n(t,o,i):h(t[a],e,n,r+1,a,t)},p=function(){function t(t,e,n){this.params=t,this.owneryQuery=e,this.options=n,this.init()}return t.prototype.init=function(){},t.prototype.reset=function(){this.done=!1,this.keep=!1},t}(),d=function(t){function e(e,n,r,o){var i=t.call(this,e,n,r)||this;return i.name=o,i}return o(e,t),e}(p),y=function(t){function e(e,n,r,o){var i=t.call(this,e,n,r)||this;return i.children=o,i}return o(e,t),e.prototype.reset=function(){this.keep=!1,this.done=!1;for(var t=0,e=this.children.length;t<e;t++)this.children[t].reset()},e.prototype.childrenNext=function(t,e,n){for(var r=!0,o=!0,i=0,a=this.children.length;i<a;i++){var s=this.children[i];if(s.next(t,e,n),s.keep||(o=!1),s.done){if(!s.keep)break}else r=!1}this.done=r,this.keep=o},e}(p),v=function(t){function e(e,n,r,o,i){var a=t.call(this,e,n,r,o)||this;return a.name=i,a}return o(e,t),e}(y),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.next=function(t,e,n){this.childrenNext(t,e,n)},e}(y),g=function(t){function e(e,n,r,o,i){var a=t.call(this,n,r,o,i)||this;return a.keyPath=e,a._nextNestedValue=function(t,e,n){return a.childrenNext(t,e,n),!a.done},a}return o(e,t),e.prototype.next=function(t,e,n){h(t,this.keyPath,this._nextNestedValue,0,e,n)},e}(y),b=function(t,e){if(t instanceof Function)return t;if(t instanceof RegExp)return function(e){var n="string"==typeof e&&t.test(e);return t.lastIndex=0,n};var n=s(t);return function(t){return e(n,s(t))}},w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){this._test=b(this.params,this.options.compare)},e.prototype.next=function(t,e,n){Array.isArray(n)&&!n.hasOwnProperty(e)||this._test(t,e,n)&&(this.done=!0,this.keep=!0)},e}(p),_=function(t,e,n){return new w(t,e,n)},S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.next=function(){this.done=!0,this.keep=!1},e}(p),O=function(t){return e=function(e,n,r){var o=typeof s(e),i=t(e);return new w((function(t){return typeof s(t)===o&&i(t)}),n,r)},function(t,n,r,o){return null==t?new S(t,n,r):e(t,n,r)};var e},x=function(t,e,n,r){var o=r.operations[t];if(!o)throw new Error("Unsupported operation: "+t);return o(e,n,r,t)},k=function(t){for(var e in t)if("$"===e.charAt(0))return!0;return!1},A=function(t,e,n,r){if(k(e)){var o=E(e,r),i=o[0];if(o[1].length)throw new Error("Property queries must contain only operations, or exact objects.");return new g(t,e,n,r,i)}return new g(t,e,n,r,[new w(e,n,r)])},j=function(t,e,n){void 0===e&&(e=null);var r=void 0===n?{}:n,o=r.compare,i=r.operations,a={compare:o||l,operations:Object.assign({},i||{})},s=E(t,a),u=s[0],c=s[1],f=[];return u.length&&f.push(new g([],t,e,a,u)),f.push.apply(f,c),1===f.length?f[0]:new m(t,e,a,f)},E=function(t,e){var n,r=[],o=[];if(!(n=t)||n.constructor!==Object&&n.constructor!==Array&&"function Object() { [native code] }"!==n.constructor.toString()&&"function Array() { [native code] }"!==n.constructor.toString()||n.toJSON)return r.push(new w(t,t,e)),[r,o];for(var i in t)if("$"===i.charAt(0)){var a=x(i,t[i],t,e);null!=a&&r.push(a)}else o.push(A(i.split("."),t[i],t,e));return[r,o]},C=function(t){return function(e,n,r){return t.reset(),t.next(e,n,r),t.keep}},N=function(t,e){return void 0===e&&(e={}),C(j(t,null,e))},R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){this._test=b(this.params,this.options.compare)},e.prototype.reset=function(){t.prototype.reset.call(this),this.keep=!0},e.prototype.next=function(t){this._test(t)&&(this.done=!0,this.keep=!1)},e}(d),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){this._queryOperation=j(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){t.prototype.reset.call(this),this._queryOperation.reset()},e.prototype.next=function(t){if(u(t)){for(var e=0,n=t.length;e<n;e++)this._queryOperation.reset(),this._queryOperation.next(t[e],e,t),this.keep=this.keep||this._queryOperation.keep;this.done=!0}else this.done=!1,this.keep=!1},e}(d),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){this._queryOperation=j(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){this._queryOperation.reset()},e.prototype.next=function(t,e,n){this._queryOperation.next(t,e,n),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},e}(d),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){},e.prototype.next=function(t){u(t)&&t.length===this.params&&(this.done=!0,this.keep=!0)},e}(d),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=this;this._ops=this.params.map((function(e){return j(e,null,t.options)}))},e.prototype.reset=function(){this.done=!1,this.keep=!1;for(var t=0,e=this._ops.length;t<e;t++)this._ops[t].reset()},e.prototype.next=function(t,e,n){for(var r=!1,o=!1,i=0,a=this._ops.length;i<a;i++){var s=this._ops[i];if(s.next(t,e,n),s.keep){r=!0,o=s.keep;break}}this.keep=o,this.done=r},e}(d),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.next=function(e,n,r){t.prototype.next.call(this,e,n,r),this.keep=!this.keep},e}(F),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=this;this._testers=this.params.map((function(e){if(k(e))throw new Error("cannot nest $ under "+t.constructor.name.toLowerCase());return b(e,t.options.compare)}))},e.prototype.next=function(t,e,n){for(var r=!1,o=!1,i=0,a=this._testers.length;i<a;i++)if((0,this._testers[i])(t)){r=!0,o=!0;break}this.keep=o,this.done=r},e}(d),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.next=function(e,n,r){t.prototype.next.call(this,e,n,r),this.keep=!this.keep},e}(M),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.next=function(t,e,n){n.hasOwnProperty(e)===this.params&&(this.done=!0,this.keep=!0)},e}(d),J=function(t){function e(e,n,r,o){return t.call(this,e,n,r,e.map((function(t){return j(t,n,r)})),o)||this}return o(e,t),e.prototype.next=function(t,e,n){this.childrenNext(t,e,n)},e}(v),Q=function(t,e,n){return new w(t,e,n)},q=function(t,e,n,r){return new R(t,e,n,r)},D=function(t,e,n,r){return new F(t,e,n,r)},B=function(t,e,n,r){return new T(t,e,n,r)},K=function(t,e,n,r){return new P(t,e,n,r)},z=function(t,e,n,r){return new L(t,e,n,r)},W=function(t,e,n,r){return new M(t,e,n,r)},H=O((function(t){return function(e){return e<t}})),V=O((function(t){return function(e){return e<=t}})),Y=O((function(t){return function(e){return e>t}})),G=O((function(t){return function(e){return e>=t}})),Z=function(t,e,n){var r=t[0],o=t[1];return new w((function(t){return s(t)%r===o}),e,n)},X=function(t,e,n,r){return new U(t,e,n,r)},tt=function(t,e,n){return new w(new RegExp(t,e.$options),e,n)},et=function(t,e,n,r){return new I(t,e,n,r)},nt=function(t,e,n){return new w((function(e){return null!=e&&(e instanceof t||e.constructor===t)}),e,n)},rt=function(t,e,n,r){return new J(t,e,n,r)},ot=rt,it=function(t,e,n){return new $(t,e,n,"$size")},at=function(){return null},st=function(t,e,n){var r;if(f(t))r=t;else{if(process.env.CSP_ENABLED)throw new Error('In CSP mode, sift does not support strings in "$where" condition');r=new Function("obj","return "+t)}return new w((function(t){return r.bind(t)(t)}),e,n)},ut=Object.freeze({__proto__:null,$Size:$,$eq:Q,$ne:q,$or:D,$nor:B,$elemMatch:K,$nin:z,$in:W,$lt:H,$lte:V,$gt:Y,$gte:G,$mod:Z,$exists:X,$regex:tt,$not:et,$type:nt,$and:rt,$all:ot,$size:it,$options:at,$where:st}),ct=function(t,e,n){var r=void 0===n?{}:n,o=r.compare,i=r.operations;return j(t,e,{compare:o,operations:Object.assign({},ut,i||{})})};const ft=function(t,e){void 0===e&&(e={});var n=ct(t,null,e);return C(n)}},7167:t=>{t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift()||[],n=t.pop();if("function"!=typeof n)throw new Error("No callback provided to asyncMap");if(!e)return n(null,[]);Array.isArray(e)||(e=[e]);var r=t.length,o=[],i=null,a=e.length,s=a*r;if(!s)return n(null,[]);function u(c){c&&!i&&(i=c);for(var f=arguments.length,l=1;l<f;l++)void 0!==arguments[l]&&(o[l-1]=(o[l-1]||[]).concat(arguments[l]));if(e.length>a){var h=e.slice(a);s+=(e.length-a)*r,a=e.length,process.nextTick((function(){h.forEach((function(e){t.forEach((function(t){t(e,u)}))}))}))}0==--s&&n.apply(null,[i].concat(o))}e.forEach((function(e){t.forEach((function(t){t(e,u)}))}))}},6271:t=>{t.exports=function(){var t,e=Array.prototype.slice.call(arguments),n=null;return"object"==typeof e[0]?(n=e.shift(),"string"==typeof(t=e.shift())&&(t=n[t])):t=e.shift(),function(r){t.apply(n,e.concat(r))}}},5666:(t,e,n)=>{t.exports=o;var r=n(6271);function o(t,e){var n=[];!function i(a,s){return a>=s?e(null,n):(Array.isArray(t[a])&&(t[a]=r.apply(null,t[a].map((function(t){return t===o.first?n[0]:t===o.last?n[n.length-1]:t})))),t[a]?void t[a]((function(t,r){if(t)return e(t,n);void 0!==r&&(n=n.concat(r)),i(a+1,s)})):i(a+1,s))}(0,t.length)}o.first={},o.last={}},4518:(t,e,n)=>{n(7167),n(6271),e.chain=n(5666)},1614:(t,e,n)=>{"use strict";var r;n.r(e),n.d(e,{NIL:()=>N,parse:()=>v,stringify:()=>f,v1:()=>y,v3:()=>k,v4:()=>A,v5:()=>C,validate:()=>s,version:()=>R});var o=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(t){return"string"==typeof t&&a.test(t)};for(var u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));const f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};var l,h,p=0,d=0;const y=function(t,e,n){var r=e&&n||0,o=e||new Array(16),a=(t=t||{}).node||l,s=void 0!==t.clockseq?t.clockseq:h;if(null==a||null==s){var u=t.random||(t.rng||i)();null==a&&(a=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=h=16383&(u[6]<<8|u[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),y=void 0!==t.nsecs?t.nsecs:d+1,v=c-p+(y-d)/1e4;if(v<0&&void 0===t.clockseq&&(s=s+1&16383),(v<0||c>p)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,d=y,h=s;var m=(1e4*(268435455&(c+=122192928e5))+y)%4294967296;o[r++]=m>>>24&255,o[r++]=m>>>16&255,o[r++]=m>>>8&255,o[r++]=255&m;var g=c/4294967296*1e4&268435455;o[r++]=g>>>8&255,o[r++]=255&g,o[r++]=g>>>24&15|16,o[r++]=g>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var b=0;b<6;++b)o[r+b]=a[b];return e||f(o)},v=function(t){if(!s(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};function m(t,e,n){function r(t,r,o,i){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=v(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+t.length);if(a.set(r),a.set(t,r.length),(a=n(a))[6]=15&a[6]|e,a[8]=63&a[8]|128,o){i=i||0;for(var s=0;s<16;++s)o[i+s]=a[s];return o}return f(a)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function g(t){return 14+(t+64>>>9<<4)+1}function b(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function w(t,e,n,r,o,i){return b((a=b(b(e,t),b(r,i)))<<(s=o)|a>>>32-s,n);var a,s}function _(t,e,n,r,o,i,a){return w(e&n|~e&r,t,e,o,i,a)}function S(t,e,n,r,o,i,a){return w(e&r|n&~r,t,e,o,i,a)}function O(t,e,n,r,o,i,a){return w(e^n^r,t,e,o,i,a)}function x(t,e,n,r,o,i,a){return w(n^(e|~r),t,e,o,i,a)}const k=m("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r="0123456789abcdef",o=0;o<n;o+=8){var i=t[o>>5]>>>o%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);e.push(a)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[g(e)-1]=e;for(var n=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,u=r,c=o,f=i;n=_(n,r,o,i,t[a],7,-680876936),i=_(i,n,r,o,t[a+1],12,-389564586),o=_(o,i,n,r,t[a+2],17,606105819),r=_(r,o,i,n,t[a+3],22,-1044525330),n=_(n,r,o,i,t[a+4],7,-176418897),i=_(i,n,r,o,t[a+5],12,1200080426),o=_(o,i,n,r,t[a+6],17,-1473231341),r=_(r,o,i,n,t[a+7],22,-45705983),n=_(n,r,o,i,t[a+8],7,1770035416),i=_(i,n,r,o,t[a+9],12,-1958414417),o=_(o,i,n,r,t[a+10],17,-42063),r=_(r,o,i,n,t[a+11],22,-1990404162),n=_(n,r,o,i,t[a+12],7,1804603682),i=_(i,n,r,o,t[a+13],12,-40341101),o=_(o,i,n,r,t[a+14],17,-1502002290),n=S(n,r=_(r,o,i,n,t[a+15],22,1236535329),o,i,t[a+1],5,-165796510),i=S(i,n,r,o,t[a+6],9,-1069501632),o=S(o,i,n,r,t[a+11],14,643717713),r=S(r,o,i,n,t[a],20,-373897302),n=S(n,r,o,i,t[a+5],5,-701558691),i=S(i,n,r,o,t[a+10],9,38016083),o=S(o,i,n,r,t[a+15],14,-660478335),r=S(r,o,i,n,t[a+4],20,-405537848),n=S(n,r,o,i,t[a+9],5,568446438),i=S(i,n,r,o,t[a+14],9,-1019803690),o=S(o,i,n,r,t[a+3],14,-187363961),r=S(r,o,i,n,t[a+8],20,1163531501),n=S(n,r,o,i,t[a+13],5,-1444681467),i=S(i,n,r,o,t[a+2],9,-51403784),o=S(o,i,n,r,t[a+7],14,1735328473),n=O(n,r=S(r,o,i,n,t[a+12],20,-1926607734),o,i,t[a+5],4,-378558),i=O(i,n,r,o,t[a+8],11,-2022574463),o=O(o,i,n,r,t[a+11],16,1839030562),r=O(r,o,i,n,t[a+14],23,-35309556),n=O(n,r,o,i,t[a+1],4,-1530992060),i=O(i,n,r,o,t[a+4],11,1272893353),o=O(o,i,n,r,t[a+7],16,-155497632),r=O(r,o,i,n,t[a+10],23,-1094730640),n=O(n,r,o,i,t[a+13],4,681279174),i=O(i,n,r,o,t[a],11,-358537222),o=O(o,i,n,r,t[a+3],16,-722521979),r=O(r,o,i,n,t[a+6],23,76029189),n=O(n,r,o,i,t[a+9],4,-640364487),i=O(i,n,r,o,t[a+12],11,-421815835),o=O(o,i,n,r,t[a+15],16,530742520),n=x(n,r=O(r,o,i,n,t[a+2],23,-995338651),o,i,t[a],6,-198630844),i=x(i,n,r,o,t[a+7],10,1126891415),o=x(o,i,n,r,t[a+14],15,-1416354905),r=x(r,o,i,n,t[a+5],21,-57434055),n=x(n,r,o,i,t[a+12],6,1700485571),i=x(i,n,r,o,t[a+3],10,-1894986606),o=x(o,i,n,r,t[a+10],15,-1051523),r=x(r,o,i,n,t[a+1],21,-2054922799),n=x(n,r,o,i,t[a+8],6,1873313359),i=x(i,n,r,o,t[a+15],10,-30611744),o=x(o,i,n,r,t[a+6],15,-1560198380),r=x(r,o,i,n,t[a+13],21,1309151649),n=x(n,r,o,i,t[a+4],6,-145523070),i=x(i,n,r,o,t[a+11],10,-1120210379),o=x(o,i,n,r,t[a+2],15,718787259),r=x(r,o,i,n,t[a+9],21,-343485551),n=b(n,s),r=b(r,u),o=b(o,c),i=b(i,f)}return[n,r,o,i]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(g(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))})),A=function(t,e,n){var r=(t=t||{}).random||(t.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return f(r)};function j(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function E(t,e){return t<<e|t>>>32-e}const C=m("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var o=0;o<r.length;++o)t.push(r.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),s=new Array(a),u=0;u<a;++u){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=t[64*u+4*f]<<24|t[64*u+4*f+1]<<16|t[64*u+4*f+2]<<8|t[64*u+4*f+3];s[u]=c}s[a-1][14]=8*(t.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<a;++l){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=s[l][p];for(var d=16;d<80;++d)h[d]=E(h[d-3]^h[d-8]^h[d-14]^h[d-16],1);for(var y=n[0],v=n[1],m=n[2],g=n[3],b=n[4],w=0;w<80;++w){var _=Math.floor(w/20),S=E(y,5)+j(_,v,m,g)+b+e[_]+h[w]>>>0;b=g,g=m,m=E(v,30)>>>0,v=y,y=S}n[0]=n[0]+y>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+m>>>0,n[3]=n[3]+g>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),N="00000000-0000-0000-0000-000000000000",R=function(t){if(!s(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},902:(t,e,n)=>{"use strict";t.exports=function(t,e,n,i){n instanceof Function&&(i=n,n=null),n||(n={}),r.realpath(t,(function(s,c){!function(t,e,n,i){var s=u(t);return n.mode&&n.chown?c():r.stat(t,(function(t,e){return t||!e||((n=a({},n)).mode||(n.mode=e.mode),!n.chown&&process.getuid&&(n.chown={uid:e.uid,gid:e.gid})),c()}));function c(){o([[f,s,e,n.mode,n.encoding||"utf8"],n.chown&&[r,r.chown,s,n.chown.uid,n.chown.gid],n.mode&&[r,r.chmod,s,n.mode],[r,r.rename,s,t]],(function(t){t?r.unlink(s,(function(){i(t)})):i()}))}function f(t,e,o,i,a){r.open(t,"w",n.mode,(function(t,n){return t?a(t):Buffer.isBuffer(e)?r.write(n,e,0,e.length,0,o):null!=e?r.write(n,String(e),0,String(i),o):o();function o(t){if(t)return a(t);r.fsync(n,(function(t){if(t)return a(t);r.close(n,a)}))}}))}}(c||t,e,n,i)}))},t.exports.sync=function(t,e,n){n||(n={});try{t=r.realpathSync(t)}catch(t){}var o=u(t);try{if(!n.mode||!n.chown)try{var i=r.statSync(t);(n=a({},n)).mode||(n.mode=i.mode),!n.chown&&process.getuid&&(n.chown={uid:i.uid,gid:i.gid})}catch(t){}var s=r.openSync(o,"w",n.mode);Buffer.isBuffer(e)?r.writeSync(s,e,0,e.length,0):null!=e&&r.writeSync(s,String(e),0,String(n.encoding||"utf8")),r.fsyncSync(s),r.closeSync(s),n.chown&&r.chownSync(o,n.chown.uid,n.chown.gid),n.mode&&r.chmodSync(o,n.mode),r.renameSync(o,t)}catch(t){try{r.unlinkSync(o)}catch(t){}throw t}},t.exports._getTmpname=u;var r=n(77),o=n(4518).chain,i=n(4269),a=Object.assign||n(1758)._extend,s=0;function u(t){return t+"."+i("/index.js").hash(String(process.pid)).hash(String(++s)).result()}},7680:()=>{},8510:()=>{},2993:()=>{},1386:()=>{},791:()=>{},1758:()=>{}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(4613)})();