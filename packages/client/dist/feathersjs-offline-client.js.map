{"version":3,"sources":["webpack://feathersjsOfflineClient/../src/filter-query.ts","webpack://feathersjsOfflineClient/../src/index.ts","webpack://feathersjsOfflineClient/../src/service.ts","webpack://feathersjsOfflineClient/../src/sort.ts","webpack://feathersjsOfflineClient/../src/hooks.ts","webpack://feathersjsOfflineClient/../src/utils.ts","webpack://feathersjsOfflineClient/./node_modules/@feathersjs/errors/lib/index.js","webpack://feathersjsOfflineClient/./node_modules/debug/src/browser.js","webpack://feathersjsOfflineClient/./node_modules/debug/src/common.js","webpack://feathersjsOfflineClient/../src/common/cryptographic.js","webpack://feathersjsOfflineClient/../src/common/index.js","webpack://feathersjsOfflineClient/../src/common/misc.js","webpack://feathersjsOfflineClient/../src/common/options-proxy.js","webpack://feathersjsOfflineClient/../src/common/to.js","webpack://feathersjsOfflineClient/../src/index.js","webpack://feathersjsOfflineClient/../src/own-common/index.js","webpack://feathersjsOfflineClient/../src/own-common/own-class.js","webpack://feathersjsOfflineClient/../src/owndata/index.js","webpack://feathersjsOfflineClient/../src/ownnet/index.js","webpack://feathersjsOfflineClient/../src/snapshot/index.js","webpack://feathersjsOfflineClient/./node_modules/charenc/charenc.js","webpack://feathersjsOfflineClient/./node_modules/crypt/crypt.js","webpack://feathersjsOfflineClient/./node_modules/events/events.js","webpack://feathersjsOfflineClient/./node_modules/feathers-localstorage/lib/index.js","webpack://feathersjsOfflineClient/./node_modules/feathers-memory/lib/index.js","webpack://feathersjsOfflineClient/./node_modules/feathers-memory/node_modules/sift/src/index.js","webpack://feathersjsOfflineClient/./node_modules/graceful-fs/clone.js","webpack://feathersjsOfflineClient/./node_modules/graceful-fs/graceful-fs.js","webpack://feathersjsOfflineClient/./node_modules/graceful-fs/legacy-streams.js","webpack://feathersjsOfflineClient/./node_modules/graceful-fs/polyfills.js","webpack://feathersjsOfflineClient/./node_modules/imurmurhash/imurmurhash.js","webpack://feathersjsOfflineClient/./node_modules/is-buffer/index.js","webpack://feathersjsOfflineClient/./node_modules/md5/md5.js","webpack://feathersjsOfflineClient/./node_modules/ms/index.js","webpack://feathersjsOfflineClient/./node_modules/node-localstorage/LocalStorage.js","webpack://feathersjsOfflineClient/./node_modules/shortid/index.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/alphabet.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/build.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/generate.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/index.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/is-valid.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/random/random-byte-browser.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/random/random-from-seed.js","webpack://feathersjsOfflineClient/./node_modules/shortid/lib/util/cluster-worker-id-browser.js","webpack://feathersjsOfflineClient/./node_modules/shortid/node_modules/nanoid/format.browser.js","webpack://feathersjsOfflineClient/./node_modules/sift/es5m/index.js","webpack://feathersjsOfflineClient/./node_modules/slide/lib/async-map.js","webpack://feathersjsOfflineClient/./node_modules/slide/lib/bind-actor.js","webpack://feathersjsOfflineClient/./node_modules/slide/lib/chain.js","webpack://feathersjsOfflineClient/./node_modules/slide/lib/slide.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/index.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/md5.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/nil.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/parse.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/regex.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/rng.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/sha1.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/v1.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/v3.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/v35.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/v4.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/v5.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/validate.js","webpack://feathersjsOfflineClient/./node_modules/uuid/dist/esm-browser/version.js","webpack://feathersjsOfflineClient/./node_modules/write-file-atomic/index.js","webpack://feathersjsOfflineClient/ignored|assert","webpack://feathersjsOfflineClient/ignored|constants","webpack://feathersjsOfflineClient/ignored|fs","webpack://feathersjsOfflineClient/ignored|path","webpack://feathersjsOfflineClient/ignored|stream","webpack://feathersjsOfflineClient/ignored|util","webpack://feathersjsOfflineClient/webpack/bootstrap","webpack://feathersjsOfflineClient/webpack/runtime/define property getters","webpack://feathersjsOfflineClient/webpack/runtime/global","webpack://feathersjsOfflineClient/webpack/runtime/hasOwnProperty shorthand","webpack://feathersjsOfflineClient/webpack/runtime/make namespace object","webpack://feathersjsOfflineClient/webpack/startup"],"names":["debug","require","FeathersError","msg","name","code","className","data","errors","message","newData","Error","JSON","parse","stringify","type","captureStackTrace","stack","inheritsFrom","Child","Parent","prototype","Object","create","constructor","defineProperty","value","BadRequest","call","NotAuthenticated","PaymentError","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","Timeout","Conflict","Gone","LengthRequired","Unprocessable","TooManyRequests","GeneralError","NotImplemented","BadGateway","Unavailable","convert","error","result","assign","module","exports","formatArgs","save","load","useColors","localstorage","warned","console","warn","window","process","__nwjs","navigator","userAgent","toLowerCase","match","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","args","namespace","humanize","diff","c","color","splice","index","lastC","replace","log","namespaces","storage","setItem","removeItem","r","getItem","env","DEBUG","localStorage","formatters","j","v","setup","createDebug","coerce","disable","enable","enabled","destroy","keys","forEach","key","names","skips","selectColor","hash","i","length","charCodeAt","colors","Math","abs","prevTime","enableOverride","self","curr","Number","Date","ms","prev","unshift","format","formatter","val","logFn","apply","extend","enumerable","configurable","get","set","init","delimiter","newDebug","split","len","push","substr","map","toNamespace","join","test","regexp","toString","substring"],"mappings":"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A;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA,KAAK;;AAEL;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;AC/FD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;;AAEA;AACA,QAAQ,yBAAyB;AACjC;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;;;;;;;;;;;AC3dA,OAAO,UAAU,GAAG,mBAAO,CAAC,oEAAiB;;AAE7C;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,6BAA6B;AAC7B,6CAA6C,iBAAiB;AAC9D;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB;;;;;;;;;;;AC/FtB,eAAe,mBAAO,CAAC,0EAAoB;AAC3C,OAAO,IAAI,GAAG,mBAAO,CAAC,4EAAqB;AAC3C,OAAO,iCAAiC,GAAG,mBAAO,CAAC,4FAA6B;AAChF,aAAa,wGAAuB;;AAEpC;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,+BAA+B;AAC/B,WAAW,QAAQ;;AAEnB,sCAAsC;AACtC;AACA;AACA,KAAK;AACL;;AAEA,0BAA0B;AAC1B,WAAW,2BAA2B;AACtC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,6BAA6B;AAC7B;AACA,aAAa,QAAQ;AACrB;;AAEA;AACA;AACA;AACA;;AAEA,yDAAyD,GAAG;AAC5D;;AAEA;AACA,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA,+BAA+B,SAAS,gBAAgB;AACxD;;AAEA;AACA;;AAEA,sCAAsC;AACtC;AACA;AACA;;AAEA,kCAAkC;;AAElC,gCAAgC,SAAS,gBAAgB;;AAEzD;AACA;;AAEA,qCAAqC;AACrC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,mDAAmD;AACnD;;AAEA;AACA,gCAAgC;AAChC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB;;;;;;;;;;;;;;;;;;AC5ItB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA,KAAK;AACL,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,oCAAoC,sBAAsB;AAC1D;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH,oCAAoC,sBAAsB;AAC1D;AACA;AACA;AACA,GAAG;;AAEH,qCAAqC,sBAAsB;AAC3D;AACA;AACA;AACA,GAAG;;AAEH,oCAAoC,sBAAsB;AAC1D;AACA;AACA;AACA,GAAG;AACH,qCAAqC,sBAAsB;AAC3D;AACA;AACA;AACA,GAAG;;AAEH;AACA,WAAW,aAAa;AACxB;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,UAAU;AACzC;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV;;AAEA;AACA;;AAEA,0BAA0B,wBAAwB;AAClD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,WAAW,IAAI,UAAU;AACpC;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0BAA0B,wBAAwB;AAClD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,gBAAgB;AAC3E,0DAA0D,gBAAgB;AAC1E;AACA;;AAEA;AACA,SAAS,0BAA0B;AACnC;AACA;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEe;AACf,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;ACrsBY;;AAEZ;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;AClBA,SAAS,mBAAO,CAAC,iBAAI;AACrB,gBAAgB,mBAAO,CAAC,+DAAgB;AACxC,aAAa,mBAAO,CAAC,yEAAqB;AAC1C,YAAY,mBAAO,CAAC,uDAAY;;AAEhC,WAAW,mBAAO,CAAC,mBAAM;;AAEzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,qBAAM;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA,MAAM,gDAAuB;AAC7B,KAAK;AACL;AACA;;AAEA,KAAK,qBAAM;AACX,eAAe,qBAAM;AACrB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjWA,aAAa,iDAAwB;;AAErC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB;;AAEA;;AAEA;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;AACpB;;AAEA;;AAEA;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACrHA,gBAAgB,mBAAO,CAAC,wBAAW;;AAEnC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,yCAAyC;AACzC;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL,8CAA8C;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;ACrVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB,OAAO;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,QAAQ,IAA6B;AACrC;AACA,KAAK,MAAM,EAEN;AACL,CAAC;;;;;;;;;;;ACzID;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACpBA;AACA,cAAc,mBAAO,CAAC,4CAAO;AAC7B,aAAa,4EAAuB;AACpC,iBAAiB,mBAAO,CAAC,oDAAW;AACpC,YAAY,2EAAsB;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,cAAc;;AAEjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;AC/JD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACjKA;AACA;AACA;AACA,sCAAsC,0BAA0B,yDAAyD,EAAE,kBAAkB,0BAA0B,EAAE,mCAAmC,8BAA8B,oCAAoC,cAAc,EAAE;AAC9R,gBAAgB;;AAEhB,SAAS,mBAAO,CAAC,mBAAM;;AAEvB,OAAO,mBAAO,CAAC,iBAAI;;AAEnB,WAAW,mBAAO,CAAC,+CAAQ;;AAE3B,cAAc,8FAAiC;;AAE/C;;AAEA;AACA;AACA;AACA;AACA,iCAAiC,SAAS;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,EAAE,oBAAoB;;AAEtB,EAAE,mBAAmB;;AAErB,EAAE,0BAA0B;;AAE5B,CAAC;;;;;;;;;;;;AC/VY;AACb,8FAAuC;;;;;;;;;;;;ACD1B;;AAEb,qBAAqB,mBAAO,CAAC,wFAA2B;;AAExD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtGa;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,eAAe,mBAAO,CAAC,0DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC7Ca;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,aAAa,mBAAO,CAAC,sFAAsB;AAC3C,aAAa,mBAAO,CAAC,mFAAe;;AAEpC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACpBa;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,YAAY,mBAAO,CAAC,oDAAS;AAC7B,cAAc,mBAAO,CAAC,0DAAY;;AAElC;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,8FAA0B;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB,mBAAmB;AACnB,qBAAqB;AACrB,yBAAyB;AACzB,sBAAsB;;;;;;;;;;;;AC7DT;AACb,eAAe,mBAAO,CAAC,0DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;;AAEA;;;;;;;;;;;;ACda;;AAEb,8EAA8E;;AAE9E;;AAEA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACpBa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACxBa;;AAEb;;;;;;;;;;;ACFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+CAA+C,UAAU;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvCA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;;AAEA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,8CAA8C;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,gBAAgB;AACjF,gEAAgE,gBAAgB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI,oBAAoB;AACxB;AACA;AACA;AACA;AACA,QAAQ,iBAAiB;AACzB;AACA,+CAA+C,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,cAAc;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,cAAc;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4CAA4C;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qEAAqE,0DAA0D;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qEAAqE;AACrE;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,oBAAoB;AACrD,+BAA+B;AAC/B;AACA;AACA,oCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,EAAE;AACF;AACA,6BAA6B,cAAc;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oDAAoD,cAAc;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,wDAAwD,cAAc;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,4FAA4F,0DAA0D,EAAE;AACxJ;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,yDAAyD,oDAAoD;AAC7G,yDAAyD,oDAAoD;AAC7G,0DAA0D,qDAAqD;AAC/G,gEAAgE,2DAA2D;AAC3H,0DAA0D,qDAAqD;AAC/G,yDAAyD,oDAAoD;AAC7G,gDAAgD,sBAAsB,mBAAmB,GAAG,EAAE;AAC9F,iDAAiD,sBAAsB,oBAAoB,GAAG,EAAE;AAChG,gDAAgD,sBAAsB,mBAAmB,GAAG,EAAE;AAC9F,iDAAiD,sBAAsB,oBAAoB,GAAG,EAAE;AAChG;AACA;AACA,6CAA6C,4CAA4C,EAAE;AAC3F;AACA,6DAA6D,wDAAwD;AACrH;AACA;AACA;AACA,0DAA0D,qDAAqD;AAC/G;AACA,6CAA6C,4EAA4E,EAAE;AAC3H;AACA,yDAAyD,oDAAoD;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,oDAAoD,wDAAwD;AAC5G,4BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,wBAAwB,EAAE;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,+BAA+B;AAC/B;AACA;AACA,oCAAoC,qCAAqC;AACzE,KAAK;AACL;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;AACA;;AAEA,iEAAe,wBAAwB,EAAC;AACyP;AACjS;;;;;;;;;;;;AC1nBA;AACA;;AAEA;AACA,8CAA8C,6BAA6B;AAC3E;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,aAAa;AACpD,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa;AAC9C,GAAG;AACH;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;ACfA;AACA,gBAAgB,mBAAO,CAAC,+DAAiB;AACzC,gBAAgB,EAAE;AAClB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;;;;;;;;;;ACnBH,kGAAyC;AACzC,qGAA2C;AAC3C,uFAAkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFM;AACA;AACA;AACA;AACE;AACQ;AACE;AACE;;;;;;;;;;;;;;;;ACPtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,aAAa;AAC9B;AAC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;;;;;;AC/D2B;AACY;;AAEvC;AACA;AACA,+CAA+C,4CAAG,IAAI;;AAEtD;AACA,kCAAkC;;AAElC;AACA;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;;AAEA,SAAS,sDAAS;AAClB;;AAEA,iEAAe,EAAE,E;;;;;;;;;;;;;;;;;ACvBU;AACE;AAC7B,SAAS,gDAAG,aAAa,6CAAI;AAC7B,iEAAe,EAAE,E;;;;;;;;;;;;;;;;ACHc;;AAE/B;AACA,qCAAqC,mDAAU;AAC/C;;AAEA,iEAAe,QAAQ,E;;;;;;;;;;;;;;;;ACNc;;AAErC;AACA,OAAO,qDAAQ;AACf;AACA;;AAEA;AACA;;AAEA,iEAAe,OAAO,E;;;;;;;;;;;;ACVV;AACZ;AACA,mBAAmB;AACnB,0BAA0B;;AAE1B,SAAS,mBAAO,CAAC,8DAAa;AAC9B,YAAY,2EAAsB;AAClC,kBAAkB,mBAAO,CAAC,8DAAa;AACvC,8BAA8B,gDAAuB;;AAErD;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,gBAAgB;AAC5D;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,SAAS,yBAAyB;AAClC;AACA;AACA;;;;;;;;;;;AChIA,e;;;;;;;;;;ACAA,e;;;;;;;;;;ACAA,e;;;;;;;;;;ACAA,e;;;;;;;;;;ACAA,e;;;;;;;;;;ACAA,e;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA,CAAC,I;;;;;WCPD,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"feathersjs-offline-client.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OPERATORS = exports.FILTERS = void 0;\nconst commons_1 = require(\"@feathersjs/commons\");\nconst errors_1 = require(\"@feathersjs/errors\");\nfunction parse(number) {\n    if (typeof number !== 'undefined') {\n        return Math.abs(parseInt(number, 10));\n    }\n    return undefined;\n}\n// Returns the pagination limit and will take into account the\n// default and max pagination settings\nfunction getLimit(limit, paginate) {\n    if (paginate && paginate.default) {\n        const lower = typeof limit === 'number' && !isNaN(limit) ? limit : paginate.default;\n        const upper = typeof paginate.max === 'number' ? paginate.max : Number.MAX_VALUE;\n        return Math.min(lower, upper);\n    }\n    return limit;\n}\n// Makes sure that $sort order is always converted to an actual number\nfunction convertSort(sort) {\n    if (typeof sort !== 'object' || Array.isArray(sort)) {\n        return sort;\n    }\n    return Object.keys(sort).reduce((result, key) => {\n        result[key] = typeof sort[key] === 'object'\n            ? sort[key] : parseInt(sort[key], 10);\n        return result;\n    }, {});\n}\nfunction cleanQuery(query, operators, filters) {\n    if (Array.isArray(query)) {\n        return query.map(value => cleanQuery(value, operators, filters));\n    }\n    else if (commons_1._.isObject(query) && query.constructor === {}.constructor) {\n        const result = {};\n        commons_1._.each(query, (value, key) => {\n            if (key[0] === '$') {\n                if (filters[key] !== undefined) {\n                    return;\n                }\n                if (!operators.includes(key)) {\n                    throw new errors_1.BadRequest(`Invalid query parameter ${key}`, query);\n                }\n            }\n            result[key] = cleanQuery(value, operators, filters);\n        });\n        Object.getOwnPropertySymbols(query).forEach(symbol => {\n            // @ts-ignore\n            result[symbol] = query[symbol];\n        });\n        return result;\n    }\n    return query;\n}\nfunction assignFilters(object, query, filters, options) {\n    if (Array.isArray(filters)) {\n        commons_1._.each(filters, (key) => {\n            if (query[key] !== undefined) {\n                object[key] = query[key];\n            }\n        });\n    }\n    else {\n        commons_1._.each(filters, (converter, key) => {\n            const converted = converter(query[key], options);\n            if (converted !== undefined) {\n                object[key] = converted;\n            }\n        });\n    }\n    return object;\n}\nexports.FILTERS = {\n    $sort: (value) => convertSort(value),\n    $limit: (value, options) => getLimit(parse(value), options.paginate),\n    $skip: (value) => parse(value),\n    $select: (value) => value\n};\nexports.OPERATORS = ['$in', '$nin', '$lt', '$lte', '$gt', '$gte', '$ne', '$or'];\n// Converts Feathers special query parameters and pagination settings\n// and returns them separately a `filters` and the rest of the query\n// as `query`\nfunction filterQuery(query, options = {}) {\n    const { filters: additionalFilters = {}, operators: additionalOperators = [] } = options;\n    const result = {};\n    result.filters = assignFilters({}, query, exports.FILTERS, options);\n    result.filters = assignFilters(result.filters, query, additionalFilters, options);\n    result.query = cleanQuery(query, exports.OPERATORS.concat(additionalOperators), result.filters);\n    return result;\n}\nexports.default = filterQuery;\nif (typeof module !== 'undefined') {\n    module.exports = Object.assign(filterQuery, module.exports);\n}\n//# sourceMappingURL=filter-query.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hooks = void 0;\nconst hookUtils = __importStar(require(\"./hooks\"));\n__exportStar(require(\"./utils\"), exports);\nexports.hooks = hookUtils;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AdapterService = void 0;\nconst errors_1 = require(\"@feathersjs/errors\");\nconst filter_query_1 = __importDefault(require(\"./filter-query\"));\nconst callMethod = (self, name, ...args) => {\n    if (typeof self[name] !== 'function') {\n        return Promise.reject(new errors_1.NotImplemented(`Method ${name} not available`));\n    }\n    return self[name](...args);\n};\nconst alwaysMulti = {\n    find: true,\n    get: false,\n    update: false\n};\nclass AdapterService {\n    constructor(options) {\n        this.options = Object.assign({\n            id: 'id',\n            events: [],\n            paginate: {},\n            multi: false,\n            filters: [],\n            whitelist: []\n        }, options);\n    }\n    get id() {\n        return this.options.id;\n    }\n    get events() {\n        return this.options.events;\n    }\n    filterQuery(params = {}, opts = {}) {\n        const paginate = typeof params.paginate !== 'undefined'\n            ? params.paginate : this.options.paginate;\n        const { query = {} } = params;\n        const options = Object.assign({\n            operators: this.options.whitelist || [],\n            filters: this.options.filters,\n            paginate\n        }, opts);\n        const result = filter_query_1.default(query, options);\n        return Object.assign(result, { paginate });\n    }\n    allowsMulti(method) {\n        const always = alwaysMulti[method];\n        if (typeof always !== 'undefined') {\n            return always;\n        }\n        const option = this.options.multi;\n        if (option === true || option === false) {\n            return option;\n        }\n        else {\n            return option.includes(method);\n        }\n    }\n    find(params) {\n        return callMethod(this, '_find', params);\n    }\n    get(id, params) {\n        return callMethod(this, '_get', id, params);\n    }\n    create(data, params) {\n        if (Array.isArray(data) && !this.allowsMulti('create')) {\n            return Promise.reject(new errors_1.MethodNotAllowed(`Can not create multiple entries`));\n        }\n        return callMethod(this, '_create', data, params);\n    }\n    update(id, data, params) {\n        if (id === null || Array.isArray(data)) {\n            return Promise.reject(new errors_1.BadRequest(`You can not replace multiple instances. Did you mean 'patch'?`));\n        }\n        return callMethod(this, '_update', id, data, params);\n    }\n    patch(id, data, params) {\n        if (id === null && !this.allowsMulti('patch')) {\n            return Promise.reject(new errors_1.MethodNotAllowed(`Can not patch multiple entries`));\n        }\n        return callMethod(this, '_patch', id, data, params);\n    }\n    remove(id, params) {\n        if (id === null && !this.allowsMulti('remove')) {\n            return Promise.reject(new errors_1.MethodNotAllowed(`Can not remove multiple entries`));\n        }\n        return callMethod(this, '_remove', id, params);\n    }\n}\nexports.AdapterService = AdapterService;\n//# sourceMappingURL=service.js.map","\"use strict\";\n// Sorting algorithm taken from NeDB (https://github.com/louischatriot/nedb)\n// See https://github.com/louischatriot/nedb/blob/e3f0078499aa1005a59d0c2372e425ab789145c1/lib/model.js#L189\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sorter = exports.compare = exports.compareArrays = exports.compareNSB = void 0;\nfunction compareNSB(a, b) {\n    if (a < b) {\n        return -1;\n    }\n    if (a > b) {\n        return 1;\n    }\n    return 0;\n}\nexports.compareNSB = compareNSB;\nfunction compareArrays(a, b) {\n    let i;\n    let comp;\n    for (i = 0; i < Math.min(a.length, b.length); i += 1) {\n        comp = exports.compare(a[i], b[i]);\n        if (comp !== 0) {\n            return comp;\n        }\n    }\n    // Common section was identical, longest one wins\n    return exports.compareNSB(a.length, b.length);\n}\nexports.compareArrays = compareArrays;\nfunction compare(a, b, compareStrings = exports.compareNSB) {\n    const { compareNSB, compare, compareArrays } = exports;\n    // undefined\n    if (a === undefined) {\n        return b === undefined ? 0 : -1;\n    }\n    if (b === undefined) {\n        return a === undefined ? 0 : 1;\n    }\n    // null\n    if (a === null) {\n        return b === null ? 0 : -1;\n    }\n    if (b === null) {\n        return a === null ? 0 : 1;\n    }\n    // Numbers\n    if (typeof a === 'number') {\n        return typeof b === 'number' ? compareNSB(a, b) : -1;\n    }\n    if (typeof b === 'number') {\n        return typeof a === 'number' ? compareNSB(a, b) : 1;\n    }\n    // Strings\n    if (typeof a === 'string') {\n        return typeof b === 'string' ? compareStrings(a, b) : -1;\n    }\n    if (typeof b === 'string') {\n        return typeof a === 'string' ? compareStrings(a, b) : 1;\n    }\n    // Booleans\n    if (typeof a === 'boolean') {\n        return typeof b === 'boolean' ? compareNSB(a, b) : -1;\n    }\n    if (typeof b === 'boolean') {\n        return typeof a === 'boolean' ? compareNSB(a, b) : 1;\n    }\n    // Dates\n    if (a instanceof Date) {\n        return b instanceof Date ? compareNSB(a.getTime(), b.getTime()) : -1;\n    }\n    if (b instanceof Date) {\n        return a instanceof Date ? compareNSB(a.getTime(), b.getTime()) : 1;\n    }\n    // Arrays (first element is most significant and so on)\n    if (Array.isArray(a)) {\n        return Array.isArray(b) ? compareArrays(a, b) : -1;\n    }\n    if (Array.isArray(b)) {\n        return Array.isArray(a) ? compareArrays(a, b) : 1;\n    }\n    // Objects\n    const aKeys = Object.keys(a).sort();\n    const bKeys = Object.keys(b).sort();\n    let comp = 0;\n    for (let i = 0; i < Math.min(aKeys.length, bKeys.length); i += 1) {\n        comp = compare(a[aKeys[i]], b[bKeys[i]]);\n        if (comp !== 0) {\n            return comp;\n        }\n    }\n    return compareNSB(aKeys.length, bKeys.length);\n}\nexports.compare = compare;\n// An in-memory sorting function according to the\n// $sort special query parameter\nfunction sorter($sort) {\n    const criteria = Object.keys($sort).map(key => {\n        const direction = $sort[key];\n        return { key, direction };\n    });\n    return function (a, b) {\n        let compare;\n        for (const criterion of criteria) {\n            compare = criterion.direction * exports.compare(a[criterion.key], b[criterion.key]);\n            if (compare !== 0) {\n                return compare;\n            }\n        }\n        return 0;\n    };\n}\nexports.sorter = sorter;\n//# sourceMappingURL=sort.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.enableHooks = exports.processHooks = exports.getHooks = exports.isHookObject = exports.convertHookData = exports.makeArguments = exports.defaultMakeArguments = exports.createHookObject = exports.ACTIVATE_HOOKS = void 0;\nconst utils_1 = require(\"./utils\");\nconst { each, pick } = utils_1._;\nexports.ACTIVATE_HOOKS = utils_1.createSymbol('__feathersActivateHooks');\nfunction createHookObject(method, data = {}) {\n    const hook = {};\n    Object.defineProperty(hook, 'toJSON', {\n        value() {\n            return pick(this, 'type', 'method', 'path', 'params', 'id', 'data', 'result', 'error');\n        }\n    });\n    return Object.assign(hook, data, {\n        method,\n        // A dynamic getter that returns the path of the service\n        get path() {\n            const { app, service } = data;\n            if (!service || !app || !app.services) {\n                return null;\n            }\n            return Object.keys(app.services)\n                .find(path => app.services[path] === service);\n        }\n    });\n}\nexports.createHookObject = createHookObject;\n// Fallback used by `makeArguments` which usually won't be used\nfunction defaultMakeArguments(hook) {\n    const result = [];\n    if (typeof hook.id !== 'undefined') {\n        result.push(hook.id);\n    }\n    if (hook.data) {\n        result.push(hook.data);\n    }\n    result.push(hook.params || {});\n    return result;\n}\nexports.defaultMakeArguments = defaultMakeArguments;\n// Turns a hook object back into a list of arguments\n// to call a service method with\nfunction makeArguments(hook) {\n    switch (hook.method) {\n        case 'find':\n            return [hook.params];\n        case 'get':\n        case 'remove':\n            return [hook.id, hook.params];\n        case 'update':\n        case 'patch':\n            return [hook.id, hook.data, hook.params];\n        case 'create':\n            return [hook.data, hook.params];\n    }\n    return defaultMakeArguments(hook);\n}\nexports.makeArguments = makeArguments;\n// Converts different hook registration formats into the\n// same internal format\nfunction convertHookData(obj) {\n    let hook = {};\n    if (Array.isArray(obj)) {\n        hook = { all: obj };\n    }\n    else if (typeof obj !== 'object') {\n        hook = { all: [obj] };\n    }\n    else {\n        each(obj, function (value, key) {\n            hook[key] = !Array.isArray(value) ? [value] : value;\n        });\n    }\n    return hook;\n}\nexports.convertHookData = convertHookData;\n// Duck-checks a given object to be a hook object\n// A valid hook object has `type` and `method`\nfunction isHookObject(hookObject) {\n    return typeof hookObject === 'object' &&\n        typeof hookObject.method === 'string' &&\n        typeof hookObject.type === 'string';\n}\nexports.isHookObject = isHookObject;\n// Returns all service and application hooks combined\n// for a given method and type `appLast` sets if the hooks\n// from `app` should be added last (or first by default)\nfunction getHooks(app, service, type, method, appLast = false) {\n    const appHooks = app.__hooks[type][method] || [];\n    const serviceHooks = service.__hooks[type][method] || [];\n    if (appLast) {\n        // Run hooks in the order of service -> app -> finally\n        return serviceHooks.concat(appHooks);\n    }\n    return appHooks.concat(serviceHooks);\n}\nexports.getHooks = getHooks;\nfunction processHooks(hooks, initialHookObject) {\n    let hookObject = initialHookObject;\n    const updateCurrentHook = (current) => {\n        // Either use the returned hook object or the current\n        // hook object from the chain if the hook returned undefined\n        if (current) {\n            if (!isHookObject(current)) {\n                throw new Error(`${hookObject.type} hook for '${hookObject.method}' method returned invalid hook object`);\n            }\n            hookObject = current;\n        }\n        return hookObject;\n    };\n    // Go through all hooks and chain them into our promise\n    const promise = hooks.reduce((current, fn) => {\n        // @ts-ignore\n        const hook = fn.bind(this);\n        // Use the returned hook object or the old one\n        return current.then((currentHook) => hook(currentHook)).then(updateCurrentHook);\n    }, Promise.resolve(hookObject));\n    return promise.then(() => hookObject).catch(error => {\n        // Add the hook information to any errors\n        error.hook = hookObject;\n        throw error;\n    });\n}\nexports.processHooks = processHooks;\n// Add `.hooks` functionality to an object\nfunction enableHooks(obj, methods, types) {\n    if (typeof obj.hooks === 'function') {\n        return obj;\n    }\n    const hookData = {};\n    types.forEach(type => {\n        // Initialize properties where hook functions are stored\n        hookData[type] = {};\n    });\n    // Add non-enumerable `__hooks` property to the object\n    Object.defineProperty(obj, '__hooks', {\n        configurable: true,\n        value: hookData,\n        writable: true\n    });\n    return Object.assign(obj, {\n        hooks(allHooks) {\n            each(allHooks, (current, type) => {\n                // @ts-ignore\n                if (!this.__hooks[type]) {\n                    throw new Error(`'${type}' is not a valid hook type`);\n                }\n                const hooks = convertHookData(current);\n                each(hooks, (_value, method) => {\n                    if (method !== 'all' && methods.indexOf(method) === -1) {\n                        throw new Error(`'${method}' is not a valid hook method`);\n                    }\n                });\n                methods.forEach(method => {\n                    // @ts-ignore\n                    const myHooks = this.__hooks[type][method] || (this.__hooks[type][method] = []);\n                    if (hooks.all) {\n                        myHooks.push.apply(myHooks, hooks.all);\n                    }\n                    if (hooks[method]) {\n                        myHooks.push.apply(myHooks, hooks[method]);\n                    }\n                });\n            });\n            return this;\n        }\n    });\n}\nexports.enableHooks = enableHooks;\n//# sourceMappingURL=hooks.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createSymbol = exports.makeUrl = exports.isPromise = exports._ = exports.stripSlashes = void 0;\n// Removes all leading and trailing slashes from a path\nfunction stripSlashes(name) {\n    return name.replace(/^(\\/+)|(\\/+)$/g, '');\n}\nexports.stripSlashes = stripSlashes;\n// A set of lodash-y utility functions that use ES6\nexports._ = {\n    each(obj, callback) {\n        if (obj && typeof obj.forEach === 'function') {\n            obj.forEach(callback);\n        }\n        else if (exports._.isObject(obj)) {\n            Object.keys(obj).forEach(key => callback(obj[key], key));\n        }\n    },\n    some(value, callback) {\n        return Object.keys(value)\n            .map(key => [value[key], key])\n            .some(([val, key]) => callback(val, key));\n    },\n    every(value, callback) {\n        return Object.keys(value)\n            .map(key => [value[key], key])\n            .every(([val, key]) => callback(val, key));\n    },\n    keys(obj) {\n        return Object.keys(obj);\n    },\n    values(obj) {\n        return exports._.keys(obj).map(key => obj[key]);\n    },\n    isMatch(obj, item) {\n        return exports._.keys(item).every(key => obj[key] === item[key]);\n    },\n    isEmpty(obj) {\n        return exports._.keys(obj).length === 0;\n    },\n    isObject(item) {\n        return (typeof item === 'object' && !Array.isArray(item) && item !== null);\n    },\n    isObjectOrArray(value) {\n        return typeof value === 'object' && value !== null;\n    },\n    extend(first, ...rest) {\n        return Object.assign(first, ...rest);\n    },\n    omit(obj, ...keys) {\n        const result = exports._.extend({}, obj);\n        keys.forEach(key => delete result[key]);\n        return result;\n    },\n    pick(source, ...keys) {\n        return keys.reduce((result, key) => {\n            if (source[key] !== undefined) {\n                result[key] = source[key];\n            }\n            return result;\n        }, {});\n    },\n    // Recursively merge the source object into the target object\n    merge(target, source) {\n        if (exports._.isObject(target) && exports._.isObject(source)) {\n            Object.keys(source).forEach(key => {\n                if (exports._.isObject(source[key])) {\n                    if (!target[key]) {\n                        Object.assign(target, { [key]: {} });\n                    }\n                    exports._.merge(target[key], source[key]);\n                }\n                else {\n                    Object.assign(target, { [key]: source[key] });\n                }\n            });\n        }\n        return target;\n    }\n};\n// Duck-checks if an object looks like a promise\nfunction isPromise(result) {\n    return exports._.isObject(result) &&\n        typeof result.then === 'function';\n}\nexports.isPromise = isPromise;\nfunction makeUrl(path, app = {}) {\n    const get = typeof app.get === 'function' ? app.get.bind(app) : () => { };\n    const env = get('env') || process.env.NODE_ENV;\n    const host = get('host') || process.env.HOST_NAME || 'localhost';\n    const protocol = (env === 'development' || env === 'test' || (env === undefined)) ? 'http' : 'https';\n    const PORT = get('port') || process.env.PORT || 3030;\n    const port = (env === 'development' || env === 'test' || (env === undefined)) ? `:${PORT}` : '';\n    path = path || '';\n    return `${protocol}://${host}${port}/${exports.stripSlashes(path)}`;\n}\nexports.makeUrl = makeUrl;\nfunction createSymbol(name) {\n    return typeof Symbol !== 'undefined' ? Symbol(name) : name;\n}\nexports.createSymbol = createSymbol;\n//# sourceMappingURL=utils.js.map","const debug = require('debug')('@feathersjs/errors');\n\nfunction FeathersError (msg, name, code, className, data) {\n  msg = msg || 'Error';\n\n  let errors;\n  let message;\n  let newData;\n\n  if (msg instanceof Error) {\n    message = msg.message || 'Error';\n\n    // NOTE (EK): This is typically to handle validation errors\n    if (msg.errors) {\n      errors = msg.errors;\n    }\n  } else if (typeof msg === 'object') { // Support plain old objects\n    message = msg.message || 'Error';\n    data = msg;\n  } else { // message is just a string\n    message = msg;\n  }\n\n  if (data) {\n    // NOTE(EK): To make sure that we are not messing\n    // with immutable data, just make a copy.\n    // https://github.com/feathersjs/errors/issues/19\n    newData = JSON.parse(JSON.stringify(data));\n\n    if (newData.errors) {\n      errors = newData.errors;\n      delete newData.errors;\n    } else if (data.errors) {\n      // The errors property from data could be\n      // stripped away while cloning resulting newData not to have it\n      // For example: when cloning arrays this property\n      errors = JSON.parse(JSON.stringify(data.errors));\n    }\n  }\n\n  // NOTE (EK): Babel doesn't support this so\n  // we have to pass in the class name manually.\n  // this.name = this.constructor.name;\n  this.type = 'FeathersError';\n  this.name = name;\n  this.message = message;\n  this.code = code;\n  this.className = className;\n  this.data = newData;\n  this.errors = errors || {};\n\n  debug(`${this.name}(${this.code}): ${this.message}`);\n  debug(this.errors);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, FeathersError);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n}\n\nfunction inheritsFrom (Child, Parent) {\n  Child.prototype = Object.create(Parent.prototype);\n  Child.prototype.constructor = Child;\n}\n\ninheritsFrom(FeathersError, Error);\n\n// NOTE (EK): A little hack to get around `message` not\n// being included in the default toJSON call.\nObject.defineProperty(FeathersError.prototype, 'toJSON', {\n  value: function () {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      className: this.className,\n      data: this.data,\n      errors: this.errors\n    };\n  }\n});\n\n// 400 - Bad Request\nfunction BadRequest (message, data) {\n  FeathersError.call(this, message, 'BadRequest', 400, 'bad-request', data);\n}\n\ninheritsFrom(BadRequest, FeathersError);\n\n// 401 - Not Authenticated\nfunction NotAuthenticated (message, data) {\n  FeathersError.call(this, message, 'NotAuthenticated', 401, 'not-authenticated', data);\n}\n\ninheritsFrom(NotAuthenticated, FeathersError);\n\n// 402 - Payment Error\nfunction PaymentError (message, data) {\n  FeathersError.call(this, message, 'PaymentError', 402, 'payment-error', data);\n}\n\ninheritsFrom(PaymentError, FeathersError);\n\n// 403 - Forbidden\nfunction Forbidden (message, data) {\n  FeathersError.call(this, message, 'Forbidden', 403, 'forbidden', data);\n}\n\ninheritsFrom(Forbidden, FeathersError);\n\n// 404 - Not Found\nfunction NotFound (message, data) {\n  FeathersError.call(this, message, 'NotFound', 404, 'not-found', data);\n}\n\ninheritsFrom(NotFound, FeathersError);\n\n// 405 - Method Not Allowed\nfunction MethodNotAllowed (message, data) {\n  FeathersError.call(this, message, 'MethodNotAllowed', 405, 'method-not-allowed', data);\n}\n\ninheritsFrom(MethodNotAllowed, FeathersError);\n\n// 406 - Not Acceptable\nfunction NotAcceptable (message, data) {\n  FeathersError.call(this, message, 'NotAcceptable', 406, 'not-acceptable', data);\n}\n\ninheritsFrom(NotAcceptable, FeathersError);\n\n// 408 - Timeout\nfunction Timeout (message, data) {\n  FeathersError.call(this, message, 'Timeout', 408, 'timeout', data);\n}\n\ninheritsFrom(Timeout, FeathersError);\n\n// 409 - Conflict\nfunction Conflict (message, data) {\n  FeathersError.call(this, message, 'Conflict', 409, 'conflict', data);\n}\n\ninheritsFrom(Conflict, FeathersError);\n\n// 410 - Gone\nfunction Gone (message, data) {\n  FeathersError(this, message, 'Gone', 410, 'gone', data);\n}\n\ninheritsFrom(Gone, FeathersError);\n\n// 411 - Length Required\nfunction LengthRequired (message, data) {\n  FeathersError.call(this, message, 'LengthRequired', 411, 'length-required', data);\n}\n\ninheritsFrom(LengthRequired, FeathersError);\n\n// 422 Unprocessable\nfunction Unprocessable (message, data) {\n  FeathersError.call(this, message, 'Unprocessable', 422, 'unprocessable', data);\n}\n\ninheritsFrom(Unprocessable, FeathersError);\n\n// 429 Too Many Requests\nfunction TooManyRequests (message, data) {\n  FeathersError.call(this, message, 'TooManyRequests', 429, 'too-many-requests', data);\n}\n\ninheritsFrom(TooManyRequests, FeathersError);\n\n// 500 - General Error\nfunction GeneralError (message, data) {\n  FeathersError.call(this, message, 'GeneralError', 500, 'general-error', data);\n}\n\ninheritsFrom(GeneralError, FeathersError);\n\n// 501 - Not Implemented\nfunction NotImplemented (message, data) {\n  FeathersError.call(this, message, 'NotImplemented', 501, 'not-implemented', data);\n}\n\ninheritsFrom(NotImplemented, FeathersError);\n\n// 502 - Bad Gateway\nfunction BadGateway (message, data) {\n  FeathersError.call(this, message, 'BadGateway', 502, 'bad-gateway', data);\n}\n\ninheritsFrom(BadGateway, FeathersError);\n\n// 503 - Unavailable\nfunction Unavailable (message, data) {\n  FeathersError.call(this, message, 'Unavailable', 503, 'unavailable', data);\n}\n\ninheritsFrom(Unavailable, FeathersError);\n\nconst errors = {\n  FeathersError,\n  BadRequest,\n  NotAuthenticated,\n  PaymentError,\n  Forbidden,\n  NotFound,\n  MethodNotAllowed,\n  NotAcceptable,\n  Timeout,\n  Conflict,\n  Gone,\n  LengthRequired,\n  Unprocessable,\n  TooManyRequests,\n  GeneralError,\n  NotImplemented,\n  BadGateway,\n  Unavailable,\n  400: BadRequest,\n  401: NotAuthenticated,\n  402: PaymentError,\n  403: Forbidden,\n  404: NotFound,\n  405: MethodNotAllowed,\n  406: NotAcceptable,\n  408: Timeout,\n  409: Conflict,\n  410: Gone,\n  411: LengthRequired,\n  422: Unprocessable,\n  429: TooManyRequests,\n  500: GeneralError,\n  501: NotImplemented,\n  502: BadGateway,\n  503: Unavailable\n};\n\nfunction convert (error) {\n  if (!error) {\n    return error;\n  }\n\n  const FeathersError = errors[error.name];\n  const result = FeathersError\n    ? new FeathersError(error.message, error.data)\n    : new Error(error.message || error);\n\n  if (typeof error === 'object') {\n    Object.assign(result, error);\n  }\n\n  return result;\n}\n\nmodule.exports = Object.assign({ convert }, errors);\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","// Simply \"stolen\" from feathers-offline-xxx\nconst md5 = require('md5');\nconst { v4: uuidV4 } = require('uuid');\nconst shortid = require('shortid');\nconst { stripProps } = require('./misc');\n// Integrity of short unique identifiers: https://github.com/dylang/shortid/issues/81#issuecomment-259812835\nfunction genUuid(ifShortUuid) {\n    return ifShortUuid ? shortid.generate() : uuidV4();\n}\nfunction hash(value) {\n    value = typeof value === 'string' ? value : JSON.stringify(value);\n    return md5(value);\n}\nfunction hashOfRecord(record) {\n    return hash(stripProps(record, ['id', '_id']));\n}\nmodule.exports = {\n    genUuid,\n    hash,\n    hashOfRecord\n};\n//# sourceMappingURL=cryptographic.js.map","const to = require('./to');\nconst cryptographic = require('./cryptographic');\nconst misc = require('./misc');\nconst OptionsProxy = require('./options-proxy');\nmodule.exports = Object.assign(Object.assign(Object.assign({ to }, cryptographic), misc), { OptionsProxy });\n//# sourceMappingURL=index.js.map","function isObject(value) {\n    return typeof value === 'object' && !Array.isArray(value) && value !== null;\n}\nfunction stripProps(obj, blacklist) {\n    blacklist = Array.isArray(blacklist) ? blacklist : (blacklist || []);\n    const res = {};\n    Object.keys(obj).forEach(prop => {\n        if (blacklist.indexOf(prop) === -1) {\n            const value = obj[prop];\n            res[prop] = isObject(value) ? stripProps(value, blacklist) : value;\n        }\n    });\n    return res;\n}\nmodule.exports = {\n    isObject,\n    stripProps\n};\n//# sourceMappingURL=misc.js.map","let depends = {};\nlet watchingFn = [];\nlet ix = 0;\nmodule.exports = class OptionsProxy {\n    constructor(name) {\n        if (name === undefined) {\n            throw new Error(`OptionsProxy: Sorry, you must supply a name to proxy.`);\n        }\n        // if (depends[name]) {\n        //   throw new Error(`OptionsProxy: Sorry, you have already proxied '${name}'.`);\n        // }\n        this.name = name /*+ ++ix*/;\n        depends[this.name] = [];\n        watchingFn[this.name] = null;\n    }\n    /**\n     * Package the data to be observed in a proxy that updates according to\n     * relevant recipes registered with watcher().\n     * @param {object} data The data object to observe\n     */\n    observe(data) {\n        let self = this;\n        return new Proxy(data, {\n            get(obj, key) {\n                if (watchingFn[self.name]) {\n                    if (!depends[self.name][key])\n                        depends[self.name][key] = [];\n                    depends[self.name][key].push(watchingFn[self.name]);\n                }\n                return obj[key];\n            },\n            set(obj, key, val) {\n                obj[key] = val;\n                if (depends[self.name][key])\n                    depends[self.name][key].forEach(cb => cb());\n                return true;\n            }\n        });\n    }\n    /**\n     * Register a handler for the observer proxy\n     * @param {function} target The handler function\n     */\n    watcher(target) {\n        watchingFn[this.name] = target;\n        target();\n        watchingFn[this.name] = null;\n    }\n};\n//# sourceMappingURL=options-proxy.js.map","/**\n * Transforms a promise for \"await\" to return both error and result so you don't\n * have to wrap promises in try catch\n * @example ```\n * let [ error, result ] = await to(promise)\n * ```\n * @author Jon Paul Miles\n */\nconst to = function (promise) {\n    return promise.then(result => [null, result]).catch(err => [err, null]);\n};\nmodule.exports = to;\n//# sourceMappingURL=to.js.map","// Main module for client\nconst { to, isObject, stripProps, genUuid, hash, hashOfRecord } = require('./common');\nconst { Owndata, owndataWrapper } = require('./owndata');\nconst { Ownnet, ownnetWrapper } = require('./ownnet');\nmodule.exports = {\n    to, isObject, stripProps, genUuid, hash, hashOfRecord,\n    Owndata, owndataWrapper,\n    Ownnet, ownnetWrapper\n};\n//# sourceMappingURL=index.js.map","const OwnClass = require('./own-class');\nmodule.exports = OwnClass;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sift_1 = __importDefault(require(\"sift\"));\nconst adapter_commons_1 = require(\"@feathersjs/adapter-commons\");\nconst errors_1 = __importDefault(require(\"@feathersjs/errors\"));\nconst feathers_localstorage_1 = __importDefault(require(\"feathers-localstorage\"));\nconst common_1 = require(\"../common\");\nconst snapshot_1 = __importDefault(require(\"../snapshot\"));\nconst debug = require('debug')('@feathersjs-offline:ownclass:service-base');\nif (typeof localStorage === 'undefined') {\n    debug('Simulating localStorage...');\n    let LocalStorage = require('node-localstorage').LocalStorage;\n    global.localStorage = new LocalStorage('./.scratch');\n}\nelse {\n    debug('Utilizing built-in localStorage');\n}\nconst defaultOptions = {\n    'id': 'id',\n    'store': null,\n    'storage': null,\n    'useShortUuid': true,\n    'throttle': null,\n    'timedSync': 24 * 60 * 60 * 1000,\n    'adapterTest': false,\n    // 'multi': false,\n    // 'paginate': false,\n    'matcher': sift_1.default,\n    sorter: adapter_commons_1.sorter,\n    'fixedName': ''\n};\nconst BOT = new Date(0);\nconst _adapterTestStrip = ['uuid', 'updatedAt', 'onServerAt', 'deletedAt'];\nlet nameIx = 0;\nconst attrStrip = (...attr) => {\n    return (res) => {\n        let result;\n        if (Array.isArray(res)) {\n            result = [];\n            res.map((v, i, arr) => {\n                let obj = clone(arr[i]);\n                attr.forEach(a => delete obj[a]);\n                result.push(obj);\n            });\n        }\n        else {\n            result = clone(res);\n            attr.forEach(a => delete result[a]);\n        }\n        return result;\n    };\n};\nclass OwnClass extends adapter_commons_1.AdapterService {\n    constructor(opts) {\n        let newOpts = Object.assign({}, defaultOptions, opts);\n        debug(`Constructor started, newOpts = ${JSON.stringify(newOpts)}`);\n        super(newOpts);\n        this.wrapperOptions = Object.assign({}, newOpts, this.options);\n        debug(`Constructor ended, options = ${JSON.stringify(this.options)}`);\n        this.type = 'own-class';\n        debug('  Done.');\n        return this;\n    }\n    _setup(app, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`_SetUp('${path}') started`);\n            return this.setup(app, path);\n        });\n    }\n    setup(app, path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`SetUp('${path}') started`);\n            if (this._setupPerformed) { // Assure we only run setup once\n                return;\n            }\n            this._setupPerformed = true;\n            this.options = this.wrapperOptions;\n            let self = this;\n            this.thisName = this.options.fixedName !== '' ? this.options.fixedName : `${this.type}_offline_${nameIx++}_${path}`;\n            // Now we are ready to define the path with its underlying service (the remoteService)\n            let old = app.services[path];\n            this.remoteService = old || app.service(path); // We want to get the default service (redirects to server or points to a local service)\n            app.services[path] = self; // Install this service instance\n            // Get the service name and standard settings\n            this.name = path;\n            // Construct the two helper services\n            this.localServiceName = this.thisName + '_local';\n            this.localServiceQueue = this.thisName + '_queue';\n            this.storage = this.options.storage ? this.options.storage : localStorage;\n            this.localSpecOptions = { name: this.localServiceName, storage: this.storage, store: this.options.store, reuseKeys: this.options.fixedName !== '' };\n            let localOptions = Object.assign({}, this.options, this.localSpecOptions);\n            let queueOptions = { id: 'id', name: this.localServiceQueue, storage: this.storage, paginate: null, multi: true, reuseKeys: this.options.fixedName !== '' };\n            debug(`  Setting up services '${this.localServiceName}' and '${this.localServiceQueue}'...`);\n            app.use(this.localServiceName, feathers_localstorage_1.default(localOptions));\n            app.use(this.localServiceQueue, feathers_localstorage_1.default(queueOptions));\n            this.localService = app.service(this.localServiceName);\n            this.localQueue = app.service(this.localServiceQueue);\n            // We need to make sure that localService is properly initiated - make a dummy search\n            //    (one of the quirks of feathers-localstorage)\n            yield this.localService.ready();\n            // The initialization/setup of the localService adapter screws-up our options object\n            this.options = this.wrapperOptions;\n            // Are we running adapterTests?\n            if (this.options.adapterTest) {\n                // Make sure the '_adapterTestStrip' attributes are stripped from results\n                // However, we need to allow for having uuid as key\n                let stripValues = Object.assign([], _adapterTestStrip);\n                let idIx = stripValues.findIndex(v => { return v === self.id; });\n                if (idIx > -1)\n                    stripValues.splice(idIx, 1);\n                this._strip = attrStrip(...stripValues);\n            }\n            else {\n                this._strip = v => { return v; };\n            }\n            // Make sure we always select the key (id) in our results\n            this._select = (params, ...others) => (res) => { return adapter_commons_1.select(params, ...others, self.id)(res); };\n            // Initialize the service wrapper\n            this.listening = false;\n            this.aIP = 0; // Our semaphore for internal processing\n            this.pQActive = false; // Our flag for avoiding more than one processing of queued operations at a time\n            // Determine latest registered sync timestamp\n            this.syncedAt = new Date(this.storage.getItem(this.thisName + '_syncedAt') || 0).toISOString();\n            this.storage.setItem(this.thisName + '_syncedAt', new Date(this.syncedAt).toISOString());\n            // This is necessary if we get updates to options (e.g. .options.multi = ['patch'])\n            if (!(this.remoteService instanceof adapter_commons_1.AdapterService)) {\n                this._listenOptions();\n            }\n            // Should we perform a sync every timedSync?\n            if (this.options.timedSync && Number.isInteger(this.options.timedSync) && this.options.timedSync > 0) {\n                this._timedSyncHandle = setInterval(() => self.sync(), self.options.timedSync);\n            }\n            debug('  Done.');\n            return true;\n        });\n    }\n    _listenOptions() {\n        // This is necessary if we get updates to options (e.g. .options.multi = ['patch'])\n        let self = this;\n        let optProxy = new common_1.OptionsProxy(self.thisName);\n        this.options = optProxy.observe(Object.assign({}, self.remoteService.options ? self.remoteService.options : {}, self.options));\n        optProxy.watcher(() => {\n            // Update all changes to 'this.options' in both localService and remoteService\n            self.remoteService.options = Object.assign({}, self.remoteService.options, self.options);\n            self.localService.options = Object.assign({}, self.options, self.localSpecOptions);\n        });\n    }\n    getEntries(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling getEntries(${JSON.stringify(params)}})`);\n            let res = [];\n            yield this.localService.getEntries(params)\n                .then(entries => {\n                res = entries;\n            });\n            return Promise.resolve(res)\n                .then(this._strip)\n                .then(this._select(params));\n        });\n    }\n    get(id, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling get(${JSON.stringify(id)}, ${JSON.stringify(params)}})`);\n            return this._get(id, params);\n        });\n    }\n    _get(id, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling _get(${JSON.stringify(id)}, ${JSON.stringify(params)}})`);\n            return yield this.localService.get(id, params)\n                .then(this._strip)\n                .then(this._select(params))\n                .catch(err => { throw err; });\n        });\n    }\n    find(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling find(${JSON.stringify(params)}})`);\n            debug(`  rows=${JSON.stringify(yield this.getEntries())}`);\n            return this._find(params);\n        });\n    }\n    _find(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling _find(${JSON.stringify(params)}})`);\n            return this.localService.find(params)\n                .then(this._strip)\n                .then(this._select(params));\n        });\n    }\n    ;\n    create(data, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling create(${JSON.stringify(data)}, ${JSON.stringify(params)})`);\n            if (Array.isArray(data) && !this.allowsMulti('create')) {\n                return Promise.reject(new errors_1.default.MethodNotAllowed('Creating multiple without option \\'multi\\' set'));\n            }\n            return this._create(data, params);\n        });\n    }\n    _create(data, params, ts = 0) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling _create(${JSON.stringify(data)}, ${JSON.stringify(params)}, ${ts})`);\n            let self = this;\n            if (Array.isArray(data)) {\n                const multi = this.allowsMulti('create');\n                if (!multi) {\n                    return Promise.reject(new errors_1.default.MethodNotAllowed('Creating multiple without option \\'multi\\' set'));\n                }\n                let timestamp = new Date();\n                // In future version we will user Promise.allSettled() instead...\n                return Promise.all(data.map(current => self._create(current, params, timestamp)));\n            }\n            ts = ts || new Date();\n            let newData = clone(data);\n            // As we do not know if the server is connected we have to make sure the important\n            // values are set with reasonable values\n            if (!('uuid' in newData)) {\n                newData.uuid = common_1.genUuid(this.options.useShortUuid);\n            }\n            if (!('updatedAt' in newData)) {\n                newData.updatedAt = ts;\n            }\n            // We do not allow the client to set the onServerAt attribute to other than default '0'\n            newData.onServerAt = BOT;\n            // Is uuid unique?\n            let [err, res] = yield common_1.to(this.localService.find({ query: { 'uuid': newData.uuid } }));\n            if (res && res.length) {\n                throw new errors_1.default.BadRequest(`Optimistic create requires unique uuid. (${this.type}) res=${JSON.stringify(res)}`);\n            }\n            // We apply optimistic mutation\n            let newParams = clone(params);\n            this.disallowInternalProcessing('_create');\n            let queueId = yield this._addQueuedEvent('create', newData, clone(newData), cleanUpParams(params));\n            // Start actual mutation on remote service\n            [err, res] = yield common_1.to(this.localService.create(newData, clone(params)));\n            if (res) {\n                this.remoteService.create(res, clone(params))\n                    .then((rres) => __awaiter(this, void 0, void 0, function* () {\n                    yield common_1.to(self._removeQueuedEvent('_create0', queueId, newData, newData.updatedAt));\n                    yield self._patchIfNotRemoved(rres[self.id], rres);\n                    // Ok, we have connection - empty queue if we have any items queued\n                    self.allowInternalProcessing('_create0');\n                    yield common_1.to(self._processQueuedEvents());\n                }))\n                    .catch((rerr) => __awaiter(this, void 0, void 0, function* () {\n                    if (rerr.name !== 'Timeout') {\n                        // Let's silently ignore missing connection to server -\n                        // we'll catch-up next time we get a connection\n                        // In all other cases do the following:\n                        yield common_1.to(self._removeQueuedEvent('_create1', queueId, rerr.message /*newData*/, newData.updatedAt));\n                        yield common_1.to(self.localService.remove(res[self.id], params));\n                    }\n                    self.allowInternalProcessing('_create1');\n                }));\n            }\n            else {\n                yield common_1.to(this._removeQueuedEvent('_create2', queueId, newData, newData.updatedAt));\n                this.allowInternalProcessing('_create2');\n                throw err;\n            }\n            return Promise.resolve(res)\n                .then(this._strip)\n                .then(this._select(params));\n        });\n    }\n    update(id, data, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling update(${id}, ${JSON.stringify(data)}, ${JSON.stringify(params)}})`);\n            if (id === null || Array.isArray(data)) {\n                return Promise.reject(new errors_1.default.BadRequest(`You can not replace multiple instances. Did you mean 'patch'?`));\n            }\n            return this._update(id, data, params);\n        });\n    }\n    _update(id, data, params = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling _update(${id}, ${JSON.stringify(data)}, ${JSON.stringify(params)}})`);\n            let self = this;\n            if (id === null || Array.isArray(data)) {\n                return Promise.reject(new errors_1.default.BadRequest(`You can not replace multiple instances. Did you mean 'patch'?`));\n            }\n            let [err, res] = yield common_1.to(this.localService._get(id));\n            if (!(res && res !== {})) {\n                throw new errors_1.default.NotFound(`Trying to update non-existing ${this.id}=${id}. (${this.type}) err=${JSON.stringify(err.name)}`);\n            }\n            // We don't want our uuid to change type if it can be coerced\n            const beforeRecord = clone(res);\n            const beforeUuid = beforeRecord.uuid;\n            let newData = clone(data);\n            newData.uuid = beforeUuid; // eslint-disable-line\n            newData.updatedAt = new Date();\n            newData.onServerAt = BOT;\n            // Optimistic mutation\n            this.disallowInternalProcessing('_update');\n            let queueId = yield this._addQueuedEvent('update', newData, id, clone(newData), cleanUpParams(params));\n            // Start actual mutation on remote service\n            [err, res] = yield common_1.to(this.localService.update(id, newData, clone(params)));\n            if (!err) {\n                this.remoteService.update(id, res, clone(params))\n                    .then((rres) => __awaiter(this, void 0, void 0, function* () {\n                    yield common_1.to(self._removeQueuedEvent('_update0', queueId, newData, res.updatedAt));\n                    yield self._patchIfNotRemoved(rres[self.id], rres);\n                    self.allowInternalProcessing('_update0');\n                    yield common_1.to(self._processQueuedEvents());\n                }))\n                    .catch((rerr) => __awaiter(this, void 0, void 0, function* () {\n                    if (rerr.name === 'Timeout') {\n                        debug(`_update TIMEOUT: ${rerr.name}, ${rerr.message}`);\n                        // Let's silently ignore missing connection to server\n                        // We'll catch-up next time we get a connection\n                    }\n                    else {\n                        debug(`_update ERROR: ${rerr.name}, ${rerr.message}`);\n                        yield common_1.to(self._removeQueuedEvent('_update1', queueId, newData, res.updatedAt));\n                        yield common_1.to(self.localService.patch(id, beforeRecord));\n                    }\n                    self.allowInternalProcessing('_update1');\n                }));\n            }\n            else {\n                yield common_1.to(this._removeQueuedEvent('_update2', queueId, newData, newData.updatedAt));\n                this.allowInternalProcessing('_update2');\n                throw err;\n            }\n            return Promise.resolve(newData)\n                .then(this._strip)\n                .then(this._select(params));\n        });\n    }\n    patch(id, data, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling patch(${id}, ${JSON.stringify(data)}, ${JSON.stringify(params)}})`);\n            if (id === null && !this.allowsMulti('patch')) {\n                return Promise.reject(new errors_1.default.MethodNotAllowed(`Can not patch multiple entries`));\n            }\n            return this._patch(id, data, params);\n        });\n    }\n    _patch(id, data, params = {}, ts = 0) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling _patch(${id}, ${JSON.stringify(data)}, ${JSON.stringify(params)}})`);\n            let self = this;\n            if (id === null) {\n                const multi = this.allowsMulti('patch');\n                if (!multi) {\n                    throw new errors_1.default.MethodNotAllowed('Patching multiple without option \\'multi\\' set');\n                }\n                return this.find(params).then(page => {\n                    const res = page.data ? page.data : page;\n                    if (!Array.isArray(res)) {\n                        res = [res];\n                    }\n                    let timestamp = new Date().toISOString();\n                    return Promise.all(res.map(current => self._patch(current[this.id], data, params, timestamp)));\n                });\n            }\n            ts = ts || new Date();\n            let [err, res] = yield common_1.to(this.localService._get(id));\n            if (!(res && res !== {})) {\n                throw err;\n            }\n            // Optimistic mutation\n            const beforeRecord = clone(res);\n            const newData = Object.assign({}, beforeRecord, data);\n            newData.onServerAt = BOT;\n            newData.updatedAt = ts;\n            this.disallowInternalProcessing('_patch');\n            const queueId = yield this._addQueuedEvent('patch', newData, id, clone(newData), cleanUpParams(params));\n            // Start actual mutation on remote service\n            [err, res] = yield common_1.to(this.localService.patch(id, newData, clone(params)));\n            if (res) {\n                this.remoteService.patch(id, res, clone(params))\n                    .then((rres) => __awaiter(this, void 0, void 0, function* () {\n                    yield common_1.to(self._removeQueuedEvent('_patch0', queueId, rres, res.updatedAt));\n                    yield self._patchIfNotRemoved(rres[self.id], rres);\n                    self.allowInternalProcessing('_patch0');\n                    yield common_1.to(self._processQueuedEvents());\n                }))\n                    .catch((rerr) => __awaiter(this, void 0, void 0, function* () {\n                    if (rerr.name === 'Timeout') {\n                        debug(`_patch TIMEOUT: ${rerr.name}, ${rerr.message}`);\n                        // Let's silently ignore missing connection to server\n                        // We'll catch-up next time we get a connection\n                    }\n                    else {\n                        debug(`_patch ERROR: ${rerr.name}, ${rerr.message}`);\n                        yield common_1.to(self._removeQueuedEvent('_patch1', queueId, newData, res.updatedAt));\n                        yield common_1.to(self.localService.patch(id, beforeRecord));\n                    }\n                    self.allowInternalProcessing('_patch1');\n                }));\n            }\n            else {\n                yield common_1.to(this._removeQueuedEvent('_patch2', queueId, newData, newData.updatedAt));\n                this.allowInternalProcessing('_patch2');\n                throw err;\n            }\n            return Promise.resolve(newData)\n                .then(this._strip)\n                .then(this._select(params));\n        });\n    }\n    /**\n     * An internal method to patch a localService record if and only if\n     * we have not been overtaken by a remove request.\n     *\n     * @param {any} id\n     * @param {any} data\n     */\n    _patchIfNotRemoved(id, data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.localService.patch(id, data)\n                .catch(_ => Promise.resolve(true));\n        });\n    }\n    remove(id, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling remove(${id}, ${JSON.stringify(params)}})`);\n            if (id === null && !this.allowsMulti('remove')) {\n                return Promise.reject(new errors_1.default.MethodNotAllowed(`Can not remove multiple entries`));\n            }\n            return this._remove(id, params);\n        });\n    }\n    _remove(id, params = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`Calling _remove(${id}, ${JSON.stringify(params)}})`);\n            let self = this;\n            if (id === null) {\n                const multi = this.allowsMulti('remove');\n                if (!multi) {\n                    throw new errors_1.default.MethodNotAllowed('Removing multiple without option \\'multi\\' set');\n                }\n                return this.find(params).then(page => {\n                    const res = page.data ? page.data : page;\n                    if (!Array.isArray(res)) {\n                        res = [res];\n                    }\n                    return Promise.all(res.map(current => self._remove(current[this.id], params)));\n                });\n            }\n            let [err, res] = yield common_1.to(this.localService._get(id));\n            if (!(res && res !== {})) {\n                throw new errors_1.default.BadRequest(`Trying to remove non-existing ${this.id}=${id}. (${this.type}) err=${JSON.stringify(err)}, res=${JSON.stringify(res)}`);\n            }\n            // Optimistic mutation\n            const beforeRecord = clone(res);\n            this.disallowInternalProcessing('_remove');\n            const queueId = yield this._addQueuedEvent('remove', beforeRecord, id, cleanUpParams(params));\n            // Start actual mutation on remote service\n            [err, res] = yield common_1.to(this.localService.remove(id, clone(params)));\n            if (!err) {\n                this.remoteService.remove(id, clone(params))\n                    .then((rres) => __awaiter(this, void 0, void 0, function* () {\n                    yield common_1.to(self._removeQueuedEvent('_remove0', queueId, beforeRecord, null));\n                    self.allowInternalProcessing('_remove0');\n                    yield common_1.to(self._processQueuedEvents());\n                }))\n                    .catch((rerr) => __awaiter(this, void 0, void 0, function* () {\n                    if (rerr.name === 'Timeout') {\n                        debug(`_remove TIMEOUT: ${rerr.name}, ${rerr.message}`);\n                    }\n                    else {\n                        debug(`_remove ERROR: ${rerr.name}, ${rerr.message}\\nbeforeRecord = ${JSON.stringify(beforeRecord)}`);\n                        // if (beforeRecord.onServerAt === BOT) {\n                        // In all likelihood the document/item was never on the server\n                        // so we choose to silently ignore this situation\n                        // } else {\n                        // We have to restore the record to  the local DB\n                        yield common_1.to(self._removeQueuedEvent('_remove1', queueId, beforeRecord, null));\n                        yield common_1.to(self.localService.create(beforeRecord, null));\n                        // }\n                    }\n                    self.allowInternalProcessing('_remove1');\n                }));\n            }\n            else {\n                yield common_1.to(this._removeQueuedEvent('_remove2', queueId, beforeRecord, null));\n                this.allowInternalProcessing('_remove2');\n                throw err;\n            }\n            return Promise.resolve(beforeRecord)\n                .then(this._strip)\n                .then(this._select(params));\n        });\n    }\n    // Allow access to our internal services (for application hooks and the demo). Use with care!\n    get remote() {\n        return this.remoteService;\n    }\n    set remote(value) {\n        throw new errors_1.default.Forbidden(`You cannot change value of remote!`);\n    }\n    get local() {\n        return this.localService;\n    }\n    set local(value) {\n        throw new errors_1.default.Forbidden(`You cannot change value of local!`);\n    }\n    get queue() {\n        return this.localQueue;\n    }\n    set queue(value) {\n        throw new errors_1.default.Forbidden(`You cannot change value of queue!`);\n    }\n    /* Queue handling */\n    /**\n     * Allow queue processing (allowed when semaphore this.aIP === 0)\n     */\n    allowInternalProcessing(from) {\n        debug(`allowInternalProcessing: ${from} ${this.thisName} ${this.aIP - 1}`);\n        this.aIP--;\n    }\n    /**\n     * Disallow queue processing (when semaphore this.aIP !== 0)\n     */\n    disallowInternalProcessing(from) {\n        debug(`disallowInternalProcessing: ${from} ${this.thisName} ${this.aIP + 1}`);\n        this.aIP++;\n    }\n    /**\n     * Is queue processing allowed?\n     */\n    internalProcessingAllowed() {\n        return this.aIP === 0;\n    }\n    _addQueuedEvent(eventName, localRecord, arg1, arg2, arg3) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug('addQueuedEvent entered');\n            let [err, res] = yield common_1.to(this.localQueue.create({ eventName, record: localRecord, arg1, arg2, arg3 }));\n            debug(`addQueuedEvent added: ${JSON.stringify(res)}`);\n            return Promise.resolve(res.id);\n        });\n    }\n    _removeQueuedEvent(eventName, id, localRecord, updatedAt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug('removeQueuedEvent entered');\n            const [err, res] = yield common_1.to(this.localQueue.remove(id));\n            return Promise.resolve(res);\n        });\n    }\n    /**\n     * This method must be implemented in own-data and own-net classes extending this class\n     */\n    _processQueuedEvents() {\n        return __awaiter(this, void 0, void 0, function* () {\n            throw new errors_1.default.NotImplemented(`_processQueuedEvents must be implemented!!!`);\n        });\n    }\n    /* Event listening */\n    /* Synchronization */\n    /**\n     * Synchronize the relevant documents/items from the remote db with the local db.\n     *\n     * @param {boolean} bAll If true, we try to sync for the beginning of time.\n     * @returns {boolean} True if the process was completed, false otherwise.\n     */\n    sync(bAll = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            while (!this.internalProcessingAllowed()) {\n                // console.log(`sync: await internalProcessing (aIP=${this.aIP})`);\n                yield new Promise(resolve => {\n                    setTimeout(() => {\n                        resolve(true);\n                    }, 200);\n                });\n            }\n            const syncOptions = yield this._getSyncOptions(bAll);\n            debug(`${this.type}.sync(${JSON.stringify(syncOptions)}) started...`);\n            let self = this;\n            let result = true;\n            let [err, snap] = yield common_1.to(snapshot_1.default(this.remoteService, syncOptions));\n            if (err) { // we silently ignore any errors\n                if (err.className === 'timeout') {\n                    debug(`  TIMEOUT: ${JSON.stringify(err)}`);\n                }\n                else {\n                    debug(`  ERROR: ${JSON.stringify(err)}`);\n                }\n                // Ok, tell anyone interested about the result\n                this.localService.emit('synced', false);\n                return false;\n            }\n            /*\n             * For each row returned by snapshot we perform the following:\n             *  - if it already exists locally\n             *    - if it is marked as deleted\n             *      - remove the row\n             *    - otherwise\n             *      - patch the row\n             *  - otherwise\n             *    - if it is not marked as deleted\n             *      - create the row\n             * Moreover we track the `onServerAt` to determine latest sync timestamp\n             */\n            debug(`  Applying received snapshot data... (${snap.length} items)`);\n            let syncTS = new Date(0).toISOString();\n            yield Promise.all(snap.map((v) => __awaiter(this, void 0, void 0, function* () {\n                let [err, res] = yield common_1.to(self.localService.get(v[self.id]));\n                if (res) {\n                    syncTS = syncTS < v.onServerAt ? v.onServerAt : syncTS;\n                    if (v.deletedAt) {\n                        [err, res] = yield common_1.to(self.localService.remove(v[self.id]));\n                    }\n                    else {\n                        [err, res] = yield common_1.to(self.localService.patch(v[self.id], v));\n                    }\n                    if (err) {\n                        result = false;\n                    }\n                }\n                else {\n                    if (!v.deletedAt) {\n                        syncTS = syncTS < v.onServerAt ? v.onServerAt : syncTS;\n                        [err, res] = yield common_1.to(self.localService.create(v));\n                        if (err) {\n                            result = false;\n                        }\n                    }\n                }\n            })));\n            // Save last sync timestamp\n            this.storage.setItem(this.thisName + '_syncedAt', new Date(syncTS).toISOString());\n            if (result) // Wait until internal Processing is ok\n                while (!(yield this._processQueuedEvents())) {\n                    yield new Promise(resolve => {\n                        setTimeout(() => {\n                            resolve(true);\n                        }, 200);\n                    });\n                }\n            ;\n            // Ok, tell anyone interested about the result\n            this.localService.emit('synced', result);\n            return result;\n        });\n    }\n    /**\n     * Determine the relevant options necessary for synchronizing this service.\n     *\n     * @param {boolean} bAll If true, we try to sync for the beginning of time.\n     * @returns {object} The relevant options for snapshot().\n     */\n    _getSyncOptions(bAll) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let query = Object.assign({}, { offline: { _forceAll: true }, $sort: { onServerAt: 1 } });\n            let ts = bAll ? new Date(0).toISOString() : this.syncedAt;\n            let syncTS = ts < this.syncedAt ? ts : this.syncedAt;\n            if (syncTS !== new Date(ts)) {\n                query.offline.onServerAt = new Date(syncTS);\n            }\n            return query;\n        });\n    }\n}\n;\nmodule.exports = OwnClass;\n// --- Helper functions\n/**\n * Make a full clone of any given object\n * @param {object} obj\n * @returns {object} The copy object\n */\nfunction clone(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\n/**\n * Remove any test attributes in queries\n */\nfunction cleanUpParams(parameters) {\n    let p = JSON.parse(JSON.stringify(parameters));\n    // if (p && p.query && p.query._fail) {\n    //   delete p.query._fail;\n    // }\n    return p;\n}\n//# sourceMappingURL=own-class.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst commons_1 = require(\"@feathersjs/commons\");\nconst errors_1 = __importDefault(require(\"@feathersjs/errors\"));\nconst common_1 = require(\"../common\");\nconst own_common_1 = __importDefault(require(\"../own-common\"));\nconst debug = require('debug')('@feathersjs-offline:owndata:service-wrapper');\nconst BOT = new Date(0).toISOString();\nclass OwndataClass extends own_common_1.default {\n    constructor(opts) {\n        debug(`Constructor started, opts = ${JSON.stringify(opts)}`);\n        super(opts);\n        this.type = 'own-data';\n        this.__forTestingOnly = super._processQueuedEvents;\n        debug('  Done.');\n        return this;\n    }\n    _processQueuedEvents() {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`processQueuedEvents (${this.type}) entered`);\n            if (!this.internalProcessingAllowed() || this.pQActive) {\n                // console.log(`processingQueuedEvents: internalProcessing (aIP=${this.aIP}), pQActive=${this.pQActive}`);\n                return false;\n            }\n            this.pQActive = true;\n            let [err, store] = yield common_1.to(this.localQueue.getEntries({ query: { $sort: { [this.id]: 1 } } }));\n            if (!store || store === []) {\n                this.pQActive = false;\n                return true;\n            }\n            debug(`  processing ${store.length} queued entries...`);\n            let self = this;\n            let stop = false;\n            while (store.length && !stop) {\n                let el = store.shift();\n                let { eventName, record, arg1, arg2, arg3 = null, id } = el;\n                ({ eventName, el, arg1, arg2, arg3, id } = _accEvent(this.id, eventName, record, arg1, arg2, arg3, id));\n                debug(`    processing: event=${eventName}, arg1=${JSON.stringify(arg1)}, arg2=${JSON.stringify(arg2)}, arg3=${JSON.stringify(arg3)}`);\n                yield self.remoteService[eventName](arg1, arg2, arg3)\n                    .then((res) => __awaiter(this, void 0, void 0, function* () {\n                    yield common_1.to(self.localQueue.remove(id));\n                    if (eventName !== 'remove') {\n                        // Let any updates to the document/item on server reflect on the local DB\n                        yield common_1.to(self.localService.patch(res[self.id], res));\n                    }\n                }))\n                    .catch((err) => __awaiter(this, void 0, void 0, function* () {\n                    debug(`catch: record=${JSON.stringify(record)}, BOT=${JSON.stringify(BOT)}, event=${eventName}, id=${id}`);\n                    if (record.onServerAt === BOT && eventName === 'remove') {\n                        // This record has probably never been on server (=remoteService), so we silently ignore the error\n                        yield common_1.to(self.localQueue.remove(id));\n                    }\n                    else {\n                        // The connection to the server has probably been cut - let's continue at another time\n                        stop = true;\n                    }\n                }));\n            }\n            debug(`  processing ended, stop=${stop}`);\n            this.pQActive = false;\n            return !stop;\n        });\n    }\n}\n;\nfunction init(options) {\n    return new OwndataClass(options);\n}\nlet Owndata = init;\n/**\n * A owndataWrapper is a CLIENT adapter wrapping for FeathersJS services extending them to\n * implement the offline own-data principle (**LINK-TO-DOC**).\n *\n * @example ```\n * import feathers from '(at)feathersjs/feathers';\n * import memory from 'feathers-memory';\n * import { owndataWrapper } from '(at)feathersjs-offline/client';\n * const app = feathers();\n * app.use('/testpath', memory({id: 'uuid'}));\n * owndataWrapper(app, '/testpath');\n * app.service('testpath').create({givenName: 'James', familyName: 'Bond'})\n * // ...\n * ```\n *\n * It works in co-existence with it's SERVER counterpart, RealtimeServiceWrapper.\n *\n * @param {object} app  The application handle\n * @param {object} path The service path (as used in ```app.use(path, serviceAdapter)```)\n * @param {object} options The options for the serviceAdaptor AND the OwndataWrapper\n *\n */\nfunction owndataWrapper(app, path, options = {}) {\n    debug(`owndataWrapper started on path '${path}'`);\n    if (!(app && app.version && app.service && app.services)) {\n        throw new errors_1.default.Unavailable(`The FeathersJS app must be supplied as first argument`);\n    }\n    let location = commons_1.stripSlashes(path);\n    let old = app.services[location];\n    if (typeof old === 'undefined') {\n        throw new errors_1.default.Unavailable(`No prior service registered on path '${location}'`);\n    }\n    let opts = Object.assign({}, old.options, options);\n    app.use(location, Owndata(opts));\n    app.services[location].options = opts;\n    app.services[location]._listenOptions();\n    return app.services[location];\n}\nmodule.exports = { init, Owndata, owndataWrapper };\ninit.Service = OwndataClass;\n// Helper\nfunction _accEvent(idName, eventName, el, arg1, arg2, arg3, id) {\n    let elId = el[idName];\n    switch (eventName) {\n        case 'create':\n            return { eventName, el, arg1: el, arg2: arg2, arg3: {}, id };\n        case 'update':\n            return { eventName, el, arg1, arg2, arg3: arg3, id };\n        case 'patch':\n            return { eventName, el, arg1: elId, arg2: el, arg3: arg3, id };\n        case 'remove':\n            return { eventName, el, arg1: elId, arg2: {}, arg3: arg3, id };\n    }\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst commons_1 = require(\"@feathersjs/commons\");\nconst errors_1 = __importDefault(require(\"@feathersjs/errors\"));\nconst common_1 = require(\"../common\");\nconst own_common_1 = __importDefault(require(\"../own-common\"));\nconst debug = require('debug')('@feathersjs-offline:ownnet:service-wrapper');\nclass OwnnetClass extends own_common_1.default {\n    constructor(options) {\n        debug(`Constructor started, opts = ${JSON.stringify(options)}`);\n        super(options);\n        this.type = 'own-net';\n        this.__forTestingOnly = super._processQueuedEvents;\n        debug('  Done.');\n    }\n    _processQueuedEvents() {\n        return __awaiter(this, void 0, void 0, function* () {\n            debug(`processQueuedEvents (${this.type}) entered (IPallowed=${this.internalProcessingAllowed()}, pQActive=${this.pQActive})`);\n            if (!this.internalProcessingAllowed() || this.pQActive) {\n                debug(`processingQueuedEvents: leaving  internalProcessing (aIP=${this.aIP}), pQActive=${this.pQActive}`);\n                return false;\n            }\n            this.pQActive = true;\n            let [err, store] = yield common_1.to(this.localQueue.getEntries({ query: { $sort: { uuid: 1, updatedAt: 1 } } }));\n            if (!store || store === [] || store.length === 0) {\n                this.pQActive = false;\n                return true;\n            }\n            this.disallowInternalProcessing();\n            debug(`  processing ${store.length} queued entries...`);\n            let self = this;\n            let i = 0; // Current event\n            let j = 0; // Current first event\n            let ids = []; // The ids of the entries in localQueue currently accumulated\n            let netOps = [];\n            let ev = [];\n            let stop = false;\n            // For own-net we only send one accumulated record to the server - let's accumulate!\n            // Remember, we already have the accumulated record on file in localService, so all we\n            // need to do, is to look out for create and remove - the rest we remoteService.patch!\n            let eventName;\n            let record;\n            let arg1;\n            let arg2;\n            let arg3;\n            do {\n                while (i < store.length && store[i].record.uuid === store[j].record.uuid) {\n                    ({ eventName, record, arg1, arg2, arg3 } = store[i]);\n                    ids.push(store[i].id);\n                    ev.push(eventName);\n                    if (eventName === 'remove') {\n                        netOps.push(_accEvent(this.id, eventName, record, arg1, arg2, arg3, ids));\n                        ev = [];\n                        ids = [];\n                        j = i + 1; // New start at next record\n                    }\n                    i++; // get next possible record\n                }\n                if (ids.length) {\n                    let res;\n                    let err;\n                    if (store[j].eventName !== 'create')\n                        [err, res] = yield common_1.to(self.localService.get(store[j].record[this.id]));\n                    else\n                        res = store[j].record;\n                    let action = ev.includes('create') ? 'create' : 'update';\n                    netOps.push(_accEvent(this.id, action, res, arg1, arg2, arg3, ids));\n                    if (i < store.length) {\n                        ev = [store[i].eventName];\n                        ids = [store[i].id];\n                    }\n                    j = i++; // New start at i and move to next record\n                }\n            } while (i < store.length);\n            debug(`netOps = ${JSON.stringify(netOps)}`);\n            // Now, send all necessary updates to the remote service (server)\n            stop = false;\n            // In future version we will user Promise.allSettled() instead...\n            let result = yield Promise.all(netOps.map((op) => __awaiter(this, void 0, void 0, function* () {\n                let { eventName, el, arg1, arg2, arg3, ids } = op;\n                let mdebug = `  remoteService['${eventName}'](${JSON.stringify(arg1)}, ${JSON.stringify(arg2)}, ${JSON.stringify(arg3)})`;\n                debug(mdebug);\n                return yield self.remoteService[eventName](arg1, arg2, arg3)\n                    .then((res) => __awaiter(this, void 0, void 0, function* () {\n                    return yield self.localQueue.remove(null, { query: { id: { $in: clone(ids) } } })\n                        .then((qres) => __awaiter(this, void 0, void 0, function* () {\n                        if (eventName !== 'remove') {\n                            return yield self.localService.patch(res[self.id], res)\n                                .catch(err => {\n                                debug(mdebug + ` (copy)\\n  localService.patch(${JSON.stringify(res[self.id])}, ${JSON.stringify(res)})`);\n                                return true;\n                            })\n                                .then(() => { return false; });\n                        }\n                        return false;\n                    }))\n                        .catch(err => {\n                        debug(`err2=${err.name}, ${err.message}`);\n                        return false;\n                    });\n                }));\n                //        .catch(err => {\n                // if (err.name === 'Timeout' && err.type === 'FeathersError') {\n                //   // We silently accept - we probably lost connection\n                // }\n                // else {\n                //   if (eventName === 'remove' && el.onServerAt === 0) {\n                //     // This record has probably never been on server (=remoteService), so we silently ignore the error\n                //   }\n                //   else {\n                //          if (err.name !== 'Timeout' /* && eventName !== 'remove' && el.onServerAt !== 0 */) {\n                //            return false;\n                //          }\n                // }\n                //          return false;\n                //        });\n            })));\n            // stop = result.reduce((pv, cv, ci, arr) => stop || arr[ci]);\n            this.allowInternalProcessing();\n            this.pQActive = false;\n            return true;\n        });\n    }\n}\nfunction init(options) {\n    return new OwnnetClass(options);\n}\nlet Ownnet = init;\n/**\n * A ownnetWrapper is a CLIENT adapter wrapping for FeathersJS services extending them to\n * implement the offline own-net principle (**LINK-TO-DOC**).\n *\n * @example ```\n * import feathers from '(at)feathersjs/feathers';\n * import memory from 'feathers-memory';\n * import { ownnetWrapper } from '(at)feathersjs-offline/client';\n * const app = feathers();\n * app.use('/testpath', memory({id: 'uuid'}));\n * ownnetWrapper(app, '/testpath');\n * app.service('testpath').create({givenName: 'James', familyName: 'Bond'})\n * // ...\n * ```\n *\n * It works in co-existence with it's SERVER counterpart, RealtimeServiceWrapper.\n *\n * @param {object} app  The application handle\n * @param {object} path The service path (as used in ```app.use(path, serviceAdapter)```)\n * @param {object} options The options for the serviceAdaptor AND the OwnnetWrapper\n *\n */\nfunction ownnetWrapper(app, path, options = {}) {\n    debug(`ownnetWrapper started on path '${path}'`);\n    if (!(app && app.version && app.service && app.services))\n        throw new errors_1.default.Unavailable(`The FeathersJS app must be supplied as first argument`);\n    let location = commons_1.stripSlashes(path);\n    let old = app.services[location];\n    if (typeof old === 'undefined') {\n        throw new errors_1.default.Unavailable(`No prior service registered on path '${location}'`);\n    }\n    let opts = Object.assign({}, old.options, options);\n    app.use(location, Ownnet(opts));\n    app.services[location].options = opts;\n    app.services[location]._listenOptions();\n    return app.services[location];\n}\nmodule.exports = { init, Ownnet, ownnetWrapper };\ninit.Service = OwnnetClass;\n// Helpers\nfunction clone(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\nfunction _accEvent(idName, eventName, el, arg1, arg2, arg3, ids) {\n    let elId = el[idName];\n    switch (eventName) {\n        case 'create':\n            return { eventName, el, arg1: el, arg2: arg2, arg3: {}, ids };\n        case 'update':\n            return { eventName, el, arg1, arg2, arg3: arg3, ids };\n        case 'patch':\n            return { eventName, el, arg1: elId, arg2: el, arg3: arg3, ids };\n        case 'remove':\n            return { eventName, el, arg1: elId, arg2: {}, arg3: arg3, ids };\n    }\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//\n// Most of this code has been copied from 'https://github.com/feathers-plus/feathers-offline-snapshot/blob/master/src/index.js'\n//\nconst debug_1 = __importDefault(require(\"debug\"));\nconst debug = debug_1.default('@feathersjs-offline:snapshot');\nfunction snapshot(service, baseQuery) {\n    debug(`snapshot start: ${JSON.stringify(baseQuery)}`);\n    const query = Object.assign({}, { $skip: 0, $limit: 200 }, baseQuery); // use max recs configured\n    let fileDatas;\n    return service.find({ query })\n        .then(result => {\n        debug(`snapshot query = ${JSON.stringify(query)}, read ${(result.data || result).length} records\\n\n             snapshot   read ${JSON.stringify(result.data || result)}`);\n        if (!result.data) {\n            return result;\n        }\n        const { total, limit, skip, data } = result;\n        fileDatas = data;\n        return (skip + data.length < total) ? readRemainingPages(skip + limit) : fileDatas;\n    });\n    function readRemainingPages(skip) {\n        query.$skip = skip;\n        return service.find({ query })\n            .then(({ total, limit, skip, data }) => {\n            debug(`read ${data.length} records`);\n            fileDatas = fileDatas.concat(data);\n            return (skip + data.length < total) ? readRemainingPages(skip + limit) : fileDatas;\n        });\n    }\n}\nmodule.exports = snapshot;\n//# sourceMappingURL=index.js.map","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","const { Service } = require('feathers-memory');\n\nconst usedKeys = [];\n\nclass LocalStorage extends Service {\n  constructor (options = {}) {\n    super(options);\n    this._storageKey = options.name || 'feathers';\n    this._storage = options.storage || (typeof window !== 'undefined' && window.localStorage);\n    this._throttle = options.throttle || 200;\n    this._reuseKeys = options.reuseKeys || false;\n    this.store = null;\n\n    if (!this._storage) {\n      throw new Error('The `storage` option needs to be provided');\n    }\n\n    if (usedKeys.indexOf(this._storageKey) === -1) {\n      usedKeys.push(this._storageKey);\n    } else {\n      if (!this._reuseKeys) { // Allow reuse if options.reuseKeys set to true\n        throw new Error(`The storage name '${this._storageKey}' is already in use by another instance.`);\n      }\n    }\n\n    this.ready();\n  }\n\n  ready () {\n    if (!this.store) {\n      return Promise.resolve(this._storage.getItem(this._storageKey))\n        .then(str => JSON.parse(str || '{}'))\n        .then(store => {\n          const keys = Object.keys(store);\n          const last = store[keys[keys.length - 1]];\n\n          // Current id is the id of the last item\n          this._uId = (keys.length && typeof last[this.id] !== 'undefined') ? last[this.id] + 1 : this._uId;\n\n          return (this.store = store);\n        });\n    }\n\n    return Promise.resolve(this.store);\n  }\n\n  flush (data) {\n    if (!this._timeout) {\n      this._timeout = setTimeout(() => {\n        this._storage.setItem(this._storageKey, JSON.stringify(this.store));\n        delete this._timeout;\n      }, this._throttle);\n    }\n\n    return data;\n  }\n\n  execute (method, ...args) {\n    return this.ready()\n      .then(() => super[method](...args));\n  }\n\n  find (...args) {\n    return this.execute('find', ...args);\n  }\n\n  get (...args) {\n    return this.execute('get', ...args);\n  }\n\n  create (...args) {\n    return this.execute('create', ...args)\n      .then(data => this.flush(data));\n  }\n\n  patch (...args) {\n    return this.execute('patch', ...args)\n      .then(data => this.flush(data));\n  }\n\n  update (...args) {\n    return this.execute('update', ...args)\n      .then(data => this.flush(data));\n  }\n\n  remove (...args) {\n    return this.execute('remove', ...args)\n      .then(data => this.flush(data));\n  }\n}\n\nmodule.exports = function init (options) {\n  return new LocalStorage(options);\n};\n\nmodule.exports.Service = Service;\n","const errors = require('@feathersjs/errors');\nconst { _ } = require('@feathersjs/commons');\nconst { sorter, select, AdapterService } = require('@feathersjs/adapter-commons');\nconst sift = require('sift').default;\n\nconst _select = (data, ...args) => {\n  const base = select(...args);\n\n  return base(JSON.parse(JSON.stringify(data)));\n};\n\nclass Service extends AdapterService {\n  constructor (options = {}) {\n    super(_.extend({\n      id: 'id',\n      matcher: sift,\n      sorter\n    }, options));\n    this._uId = options.startId || 0;\n    this.store = options.store || {};\n  }\n\n  async getEntries (params = {}) {\n    const { query } = this.filterQuery(params);\n\n    return this._find(Object.assign({}, params, {\n      paginate: false,\n      query\n    }));\n  }\n\n  async _find (params = {}) {\n    const { query, filters, paginate } = this.filterQuery(params);\n    let values = _.values(this.store).filter(this.options.matcher(query));\n    const total = values.length;\n\n    if (filters.$sort !== undefined) {\n      values.sort(this.options.sorter(filters.$sort));\n    }\n\n    if (filters.$skip !== undefined) {\n      values = values.slice(filters.$skip);\n    }\n\n    if (filters.$limit !== undefined) {\n      values = values.slice(0, filters.$limit);\n    }\n\n    const result = {\n      total,\n      limit: filters.$limit,\n      skip: filters.$skip || 0,\n      data: values.map(value => _select(value, params))\n    };\n\n    if (!(paginate && paginate.default)) {\n      return result.data;\n    }\n\n    return result;\n  }\n\n  async _get (id, params = {}) {\n    if (id in this.store) {\n      const { query } = this.filterQuery(params);\n      const value = this.store[id];\n\n      if (this.options.matcher(query)(value)) {\n        return _select(value, params, this.id);\n      }\n    }\n\n    throw new errors.NotFound(`No record found for id '${id}'`);\n  }\n\n  // Create without hooks and mixins that can be used internally\n  async _create (data, params = {}) {\n    if (Array.isArray(data)) {\n      return Promise.all(data.map(current => this._create(current, params)));\n    }\n\n    const id = data[this.id] || this._uId++;\n    const current = _.extend({}, data, { [this.id]: id });\n    const result = (this.store[id] = current);\n\n    return _select(result, params, this.id);\n  }\n\n  async _update (id, data, params = {}) {\n    const oldEntry = await this._get(id);\n    // We don't want our id to change type if it can be coerced\n    const oldId = oldEntry[this.id];\n\n    id = oldId == id ? oldId : id; // eslint-disable-line\n\n    this.store[id] = _.extend({}, data, { [this.id]: id });\n\n    return this._get(id, params);\n  }\n\n  async _patch (id, data, params = {}) {\n    const patchEntry = entry => {\n      const currentId = entry[this.id];\n\n      this.store[currentId] = _.extend(this.store[currentId], _.omit(data, this.id));\n\n      return _select(this.store[currentId], params, this.id);\n    };\n\n    if (id === null) {\n      const entries = await this.getEntries(params);\n\n      return entries.map(patchEntry);\n    }\n\n    return patchEntry(await this._get(id, params)); // Will throw an error if not found\n  }\n\n  // Remove without hooks and mixins that can be used internally\n  async _remove (id, params = {}) {\n    if (id === null) {\n      const entries = await this.getEntries(params);\n\n      return Promise.all(entries.map(\n        current => this._remove(current[this.id], params))\n      );\n    }\n\n    const entry = await this._get(id, params);\n\n    delete this.store[id];\n\n    return entry;\n  }\n}\n\nmodule.exports = options => {\n  return new Service(options);\n};\n\nmodule.exports.Service = Service;\n","/*\n *\n * Copryright 2018, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\nfunction typeChecker(type) {\n  var typeString = \"[object \" + type + \"]\";\n  return function(value) {\n    return Object.prototype.toString.call(value) === typeString;\n  };\n}\n\n/**\n */\n\nvar isArray = typeChecker(\"Array\");\nvar isObject = typeChecker(\"Object\");\nvar isFunction = typeChecker(\"Function\");\n\nfunction get(obj, key) {\n  return isFunction(obj.get) ? obj.get(key) : obj[key];\n}\n\n\nconst nestable = (validator) => (validateOptions, value, key, valueOwner, nestedResults) => {\n  if (nestedResults) {\n    return Boolean(nestedResults.find(([value, key, valueOwner]) => validator(validateOptions, key, valueOwner)));\n  }\n\n  return validator(validateOptions, value, key, valueOwner);\n};\n\n/**\n */\n\nconst or = nestable((validator) => {\n  return function(validateOptions, value, key, valueOwner, nestedResults) {\n    if (!isArray(value) || !value.length) {\n      return validator(validateOptions, value);\n    }\n    for (var i = 0, n = value.length; i < n; i++) {\n      if (validator(validateOptions, get(value, i))) return true;\n    }\n    return false;\n  };\n});\n\n/**\n */\n\nfunction and(validator) {\n  return function(validateOptions, value, key, valueOwner) {\n    if (!isArray(value) || !value.length) {\n      return validator(validateOptions, value, key, valueOwner);\n    }\n    for (var i = 0, n = value.length; i < n; i++) {\n      if (!validator(validateOptions, get(value, i), value, valueOwner)) return false;\n    }\n    return true;\n  };\n}\n\nfunction validate(validator, value, key, valueOwner, nestedResults) {\n  return validator.validate(validator.options, value, key, valueOwner, nestedResults);\n}\n\nvar defaultExpressions = {\n  /**\n   */\n\n  $eq: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $ne: and(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $gt: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $gte: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $lt: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $lte: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $mod: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $in(test, value) {\n    return test(value);\n  },\n\n  /**\n   */\n\n  $nin: function(test, value) {\n    return test(value);\n  },\n\n  /**\n   */\n\n  $not: function(test, value, key, valueOwner) {\n    return test(value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $type: function(testType, value) {\n    return testType(value);\n  },\n\n  /**\n   */\n\n  $all: function(allOptions, value, key, valueOwner, nestedResults) {\n    return defaultExpressions.$and(allOptions, value, key, valueOwner, nestedResults);\n  },\n\n  /**\n   */\n\n  $size: function(sizeMatch, value) {\n    return value ? sizeMatch === value.length : false;\n  },\n\n  /**\n   */\n\n  $or: function(orOptions, value, key, valueOwner) {\n    for (var i = 0, n = orOptions.length; i < n; i++) {\n      if (validate(get(orOptions, i), value, key, valueOwner)) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\n   */\n\n  $nor: function(validateOptions, value, key, valueOwner) {\n    return !defaultExpressions.$or(validateOptions, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $and: function(validateOptions, value, key, valueOwner, nestedResults) {\n\n    if (nestedResults) {\n      for (var i = 0, n = validateOptions.length; i < n; i++) {\n        if (!validate(get(validateOptions, i), value, key, valueOwner, nestedResults)) {\n          return false;\n        }\n      }\n    } else {\n      for (var i = 0, n = validateOptions.length; i < n; i++) {\n        if (!validate(get(validateOptions, i), value, key, valueOwner, nestedResults)) {\n          return false;\n        }\n      }\n    }\n    return true;\n  },\n\n  /**\n   */\n\n  $regex: or(function(validateOptions, value) {\n    return typeof value === \"string\" && validateOptions.test(value);\n  }),\n\n  /**\n   */\n\n  $where: function(validateOptions, value, key, valueOwner) {\n    return validateOptions.call(value, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $elemMatch: function(validateOptions, value, key, valueOwner) {\n    if (isArray(value)) {\n      return !!~search(value, validateOptions);\n    }\n    return validate(validateOptions, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $exists: function(validateOptions, value, key, valueOwner) {\n    return valueOwner.hasOwnProperty(key) === validateOptions;\n  }\n};\n\n/**\n */\n\nvar prepare = {\n  /**\n   */\n\n  $eq: function(query, queryOwner, { comparable, compare }) {\n    if (query instanceof RegExp) {\n      return or(function(value) {\n        return typeof value === \"string\" && query.test(value);\n      });\n    } else if (query instanceof Function) {\n      return or(query);\n    } else if (isArray(query) && !query.length) {\n      // Special case of a == []\n      return or(function(value) {\n        return isArray(value) && !value.length;\n      });\n    } else if (query === null) {\n      return or(function(value) {\n        //will match both null and undefined\n        return value == null;\n      });\n    }\n    return or(function(value) {\n      return compare(comparable(value), comparable(query)) === 0;\n    });\n  },\n\n  $gt: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) > 0;\n    };\n  },\n\n  $gte: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) >= 0;\n    };\n  },\n\n  $lt: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) < 0;\n    };\n  },\n  $lte: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) <= 0;\n    };\n  },\n\n  $in: function(query, queryOwner, options) {\n    const { comparable } = options;\n    return function(value) {\n      if (value instanceof Array) {\n        for (var i = value.length; i--; ) {\n          if (~query.indexOf(comparable(get(value, i)))) {\n            return true;\n          }\n        }\n      } else {\n        var comparableValue = comparable(value);\n        if (comparableValue === value && typeof value === \"object\") {\n          for (var i = query.length; i--; ) {\n            if (\n              String(query[i]) === String(value) &&\n              String(value) !== \"[object Object]\"\n            ) {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles documents that are undefined, whilst also\n          having a 'null' element in the parameters to $in.\n        */\n        if (typeof comparableValue == \"undefined\") {\n          for (var i = query.length; i--; ) {\n            if (query[i] == null) {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles the case of {'field': {$in: [/regexp1/, /regexp2/, ...]}}\n        */\n        for (var i = query.length; i--; ) {\n          var validator = createRootValidator(get(query, i), options);\n          var result = validate(validator, comparableValue, i, query);\n          if (\n            result &&\n            String(result) !== \"[object Object]\" &&\n            String(comparableValue) !== \"[object Object]\"\n          ) {\n            return true;\n          }\n        }\n\n        return !!~query.indexOf(comparableValue);\n      }\n\n      return false;\n    };\n  },\n\n  $nin: function(query, queryOwner, options) {\n    const eq = prepare.$in(query, queryOwner, options);\n    return function(validateOptions, value, key, valueOwner) {\n      return !eq(validateOptions, value, key, valueOwner);\n    };\n  },\n\n  $mod: function(query) {\n    return function(value) {\n      return value % query[0] == query[1];\n    };\n  },\n\n  /**\n   */\n\n  $ne: function(query, queryOwner, options) {\n    const eq = prepare.$eq(query, queryOwner, options);\n    return and(function(validateOptions, value, key, valueOwner) {\n      return !eq(validateOptions, value, key, valueOwner);\n    });\n  },\n\n  /**\n   */\n\n  $and: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $all: function(query, queryOwner, options) {\n    return prepare.$and(query, queryOwner, options);\n  },\n\n  /**\n   */\n\n  $or: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $nor: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $not: function(query, queryOwner, options) {\n    const validateOptions = parse(options)(query);\n    return function(value, key, valueOwner) {\n      return !validate(validateOptions, value, key, valueOwner);\n    };\n  },\n\n  $type: function(query) {\n    return function(value, key, valueOwner) {\n      return value != void 0\n        ? value instanceof query || value.constructor == query\n        : false;\n    };\n  },\n\n  /**\n   */\n\n  $regex: function(query, queryOwner) {\n    return new RegExp(query, queryOwner.$options);\n  },\n\n  /**\n   */\n\n  $where: function(query) {\n    return typeof query === \"string\"\n      ? new Function(\"obj\", \"return \" + query)\n      : query;\n  },\n\n  /**\n   */\n\n  $elemMatch: function(query, queryOwner, options) {\n    return parse(options)(query);\n  },\n\n  /**\n   */\n\n  $exists: function(query) {\n    return !!query;\n  }\n};\n\n/**\n */\n\nfunction search(array, validator) {\n  for (var i = 0; i < array.length; i++) {\n    var result = get(array, i);\n    if (validate(validator, get(array, i))) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n */\n\nfunction createValidator(options, validate) {\n  return { options, validate };\n}\n\n/**\n */\n\nfunction validatedNested({ keyPath, child, query }, value) {\n  const results = [];\n  findValues(value, keyPath, 0, value, results);\n  \n  if (results.length === 1) {\n    const [value, key, valueOwner] = results[0];\n    return validate(child, value, key, valueOwner);\n  }\n\n  // If the query contains $ne, need to test all elements ANDed together\n  var inclusive = query && typeof query.$ne !== \"undefined\";\n  var allValid = inclusive;\n  const allValues = results.map(([value]) => value);\n\n  return validate(child, undefined, undefined, undefined, results);\n  // for (var i = 0; i < results.length; i++) {\n  //   const [value, key, valueOwner] = results[i];\n  //   var isValid = validate(child, value, key, valueOwner);\n  //   console.log(isValid, value);\n  //   if (inclusive) {\n  //     allValid &= isValid;\n  //   } else {\n  //     allValid |= isValid;\n  //   }\n  // }\n  // return allValid;\n}\n\n/**\n */\n\nfunction findValues(current, keypath, index, object, values) {\n  if (index === keypath.length || current == void 0) {\n    values.push([current, keypath[index - 1], object]);\n    return;\n  }\n\n  var k = get(keypath, index);\n\n  // ensure that if current is an array, that the current key\n  // is NOT an array index. This sort of thing needs to work:\n  // sift({'foo.0':42}, [{foo: [42]}]);\n  if (isArray(current) && isNaN(Number(k))) {\n    for (var i = 0, n = current.length; i < n; i++) {\n      findValues(get(current, i), keypath, index, current, values);\n    }\n  } else {\n    findValues(get(current, k), keypath, index + 1, current, values);\n  }\n}\n\n/**\n */\n\nfunction createNestedValidator(keyPath, child, query) {\n  return createValidator({ keyPath, child, query }, validatedNested);\n}\n\n/**\n * flatten the query\n */\n\nfunction isVanillaObject(value) {\n  return (\n    value &&\n    (value.constructor === Object ||\n      value.constructor === Array ||\n      value.constructor.toString() === \"function Object() { [native code] }\" ||\n      value.constructor.toString() === \"function Array() { [native code] }\")\n  );\n}\n\nfunction parse(options) {\n  const { comparable, expressions } = options;\n  var wrapQuery = function(query) {\n    if (!query || !isVanillaObject(query)) {\n      query = { $eq: query };\n    }\n    return query;\n  };\n\n  var parseQuery = function(query) {\n    query = comparable(query);\n\n    var validators = [];\n\n    for (var key in query) {\n      var queryValue = query[key];\n\n      if (key === \"$options\") {\n        continue;\n      }\n\n      var expression =\n        defaultExpressions[key] || (options && expressions && expressions[key]);\n\n      if (expression) {\n        if (prepare[key]) {\n          queryValue = prepare[key](queryValue, query, options);\n        }\n        validators.push(createValidator(comparable(queryValue), expression));\n      } else {\n        if (key.charCodeAt(0) === 36) {\n          throw new Error(\"Unknown operation \" + key);\n        }\n\n        var keyParts = key.split(\".\");\n\n        validators.push(\n          createNestedValidator(keyParts, parseNested(queryValue), queryValue)\n        );\n      }\n    }\n\n    return validators.length === 1\n      ? validators[0]\n      : createValidator(validators, defaultExpressions.$and);\n  };\n\n  var parseNested = function(query) {\n    query = wrapQuery(query);\n    if (isExactObject(query)) {\n      return createValidator(query, isEqual);\n    }\n    return parseQuery(query);\n  };\n\n  var parseRoot = function(query) {\n    return parseQuery(wrapQuery(query));\n  };\n\n  return parseRoot;\n}\n\nfunction isEqual(a, b) {\n  if (Object.prototype.toString.call(a) !== Object.prototype.toString.call(b)) {\n    return false;\n  }\n\n  if (isObject(a)) {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n      return false;\n    }\n\n    for (var key in a) {\n      if (!isEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  } else if (isArray(a)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (var i = 0, n = a.length; i < n; i++) {\n      if (!isEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  } else {\n    return a === b;\n  }\n}\n\nfunction getAllKeys(value, keys) {\n  if (!isObject(value)) {\n    return keys;\n  }\n  for (var key in value) {\n    keys.push(key);\n    getAllKeys(value[key], keys);\n  }\n  return keys;\n}\n\nfunction isExactObject(value) {\n  const allKeysHash = getAllKeys(value, []).join(\",\");\n  return allKeysHash.search(/[$.]/) === -1;\n}\n\n/**\n */\n\nfunction createRootValidator(query, options) {\n  var validator = parse(options)(query);\n  if (options && options.select) {\n    validator = {\n      options: validator,\n      validate: function(validateOptions, value, key, valueOwner) {\n        return validate(\n          validateOptions,\n          value && options.select(value),\n          key,\n          valueOwner\n        );\n      }\n    };\n  }\n  return validator;\n}\n\n/**\n */\n\nexport default function sift(query, options) {\n  options = Object.assign({ compare, comparable }, options);\n  var validator = createRootValidator(query, options);\n  return function(value, key, valueOwner) {\n    return validate(validator, value, key, valueOwner);\n  };\n}\n\n/**\n */\n\nexport function compare(a, b) {\n  if (isEqual(a, b)) return 0;\n  if (typeof a === typeof b) {\n    if (a > b) {\n      return 1;\n    }\n    if (a < b) {\n      return -1;\n    }\n  }\n}\n\n/**\n */\n\nexport function comparable(value) {\n  if (value instanceof Date) {\n    return value.getTime();\n  } else if (isArray(value)) {\n    return value.map(comparable);\n  } else if (value && typeof value.toJSON === \"function\") {\n    return value.toJSON();\n  } else {\n    return value;\n  }\n}\n","'use strict'\n\nmodule.exports = clone\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: obj.__proto__ }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n","var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          retry()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      retry()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  function readdir (path, options, cb) {\n    var args = [path]\n    if (typeof options !== 'function') {\n      args.push(options)\n    } else {\n      cb = options\n    }\n    args.push(go$readdir$cb)\n\n    return go$readdir(args)\n\n    function go$readdir$cb (err, files) {\n      if (files && files.sort)\n        files.sort()\n\n      if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n        enqueue([go$readdir, [args]])\n\n      else {\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n        retry()\n      }\n    }\n  }\n\n  function go$readdir (args) {\n    return fs$readdir.apply(fs, args)\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb]])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n          retry()\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n}\n\nfunction retry () {\n  var elem = fs[gracefulQueue].shift()\n  if (elem) {\n    debug('RETRY', elem[0].name, elem[1])\n    elem[0].apply(null, elem[1])\n  }\n}\n","var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n","var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\nvar chdir = process.chdir\nprocess.chdir = function(d) {\n  cwd = null\n  chdir.call(process, d)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (!fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (!fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = (function (fs$rename) { return function (from, to, cb) {\n      var start = Date.now()\n      var backoff = 0;\n      fs$rename(from, to, function CB (er) {\n        if (er\n            && (er.code === \"EACCES\" || er.code === \"EPERM\")\n            && Date.now() - start < 60000) {\n          setTimeout(function() {\n            fs.stat(to, function (stater, st) {\n              if (stater && stater.code === \"ENOENT\")\n                fs$rename(from, to, CB);\n              else\n                cb(er)\n            })\n          }, backoff)\n          if (backoff < 100)\n            backoff += 10;\n          return;\n        }\n        if (cb) cb(er)\n      })\n    }})(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    read.__proto__ = fs$read\n    return read\n  })(fs.read)\n\n  fs.readSync = (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\")) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats.uid < 0) stats.uid += 0x100000000\n      if (stats.gid < 0) stats.gid += 0x100000000\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n","/**\n * @preserve\n * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)\n *\n * @author <a href=\"mailto:jensyt@gmail.com\">Jens Taylor</a>\n * @see http://github.com/homebrewing/brauhaus-diff\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/murmurhash-js\n * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n * @see http://sites.google.com/site/murmurhash/\n */\n(function(){\n    var cache;\n\n    // Call this function without `new` to use the cached object (good for\n    // single-threaded environments), or with `new` to create a new object.\n    //\n    // @param {string} key A UTF-16 or ASCII string\n    // @param {number} seed An optional positive integer\n    // @return {object} A MurmurHash3 object for incremental hashing\n    function MurmurHash3(key, seed) {\n        var m = this instanceof MurmurHash3 ? this : cache;\n        m.reset(seed)\n        if (typeof key === 'string' && key.length > 0) {\n            m.hash(key);\n        }\n\n        if (m !== this) {\n            return m;\n        }\n    };\n\n    // Incrementally add a string to this hash\n    //\n    // @param {string} key A UTF-16 or ASCII string\n    // @return {object} this\n    MurmurHash3.prototype.hash = function(key) {\n        var h1, k1, i, top, len;\n\n        len = key.length;\n        this.len += len;\n\n        k1 = this.k1;\n        i = 0;\n        switch (this.rem) {\n            case 0: k1 ^= len > i ? (key.charCodeAt(i++) & 0xffff) : 0;\n            case 1: k1 ^= len > i ? (key.charCodeAt(i++) & 0xffff) << 8 : 0;\n            case 2: k1 ^= len > i ? (key.charCodeAt(i++) & 0xffff) << 16 : 0;\n            case 3:\n                k1 ^= len > i ? (key.charCodeAt(i) & 0xff) << 24 : 0;\n                k1 ^= len > i ? (key.charCodeAt(i++) & 0xff00) >> 8 : 0;\n        }\n\n        this.rem = (len + this.rem) & 3; // & 3 is same as % 4\n        len -= this.rem;\n        if (len > 0) {\n            h1 = this.h1;\n            while (1) {\n                k1 = (k1 * 0x2d51 + (k1 & 0xffff) * 0xcc9e0000) & 0xffffffff;\n                k1 = (k1 << 15) | (k1 >>> 17);\n                k1 = (k1 * 0x3593 + (k1 & 0xffff) * 0x1b870000) & 0xffffffff;\n\n                h1 ^= k1;\n                h1 = (h1 << 13) | (h1 >>> 19);\n                h1 = (h1 * 5 + 0xe6546b64) & 0xffffffff;\n\n                if (i >= len) {\n                    break;\n                }\n\n                k1 = ((key.charCodeAt(i++) & 0xffff)) ^\n                     ((key.charCodeAt(i++) & 0xffff) << 8) ^\n                     ((key.charCodeAt(i++) & 0xffff) << 16);\n                top = key.charCodeAt(i++);\n                k1 ^= ((top & 0xff) << 24) ^\n                      ((top & 0xff00) >> 8);\n            }\n\n            k1 = 0;\n            switch (this.rem) {\n                case 3: k1 ^= (key.charCodeAt(i + 2) & 0xffff) << 16;\n                case 2: k1 ^= (key.charCodeAt(i + 1) & 0xffff) << 8;\n                case 1: k1 ^= (key.charCodeAt(i) & 0xffff);\n            }\n\n            this.h1 = h1;\n        }\n\n        this.k1 = k1;\n        return this;\n    };\n\n    // Get the result of this hash\n    //\n    // @return {number} The 32-bit hash\n    MurmurHash3.prototype.result = function() {\n        var k1, h1;\n        \n        k1 = this.k1;\n        h1 = this.h1;\n\n        if (k1 > 0) {\n            k1 = (k1 * 0x2d51 + (k1 & 0xffff) * 0xcc9e0000) & 0xffffffff;\n            k1 = (k1 << 15) | (k1 >>> 17);\n            k1 = (k1 * 0x3593 + (k1 & 0xffff) * 0x1b870000) & 0xffffffff;\n            h1 ^= k1;\n        }\n\n        h1 ^= this.len;\n\n        h1 ^= h1 >>> 16;\n        h1 = (h1 * 0xca6b + (h1 & 0xffff) * 0x85eb0000) & 0xffffffff;\n        h1 ^= h1 >>> 13;\n        h1 = (h1 * 0xae35 + (h1 & 0xffff) * 0xc2b20000) & 0xffffffff;\n        h1 ^= h1 >>> 16;\n\n        return h1 >>> 0;\n    };\n\n    // Reset the hash object for reuse\n    //\n    // @param {number} seed An optional positive integer\n    MurmurHash3.prototype.reset = function(seed) {\n        this.h1 = typeof seed === 'number' ? seed : 0;\n        this.rem = this.k1 = this.len = 0;\n        return this;\n    };\n\n    // A cached object to use. This can be safely used if you're in a single-\n    // threaded environment, otherwise you need to create new hashes to use.\n    cache = new MurmurHash3();\n\n    if (typeof(module) != 'undefined') {\n        module.exports = MurmurHash3;\n    } else {\n        this.MurmurHash3 = MurmurHash3;\n    }\n}());\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message) && message.constructor !== Uint8Array)\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var JSONStorage, KEY_FOR_EMPTY_STRING, LocalStorage, MetaKey, QUOTA_EXCEEDED_ERR, StorageEvent, _emptyDirectory, _escapeKey, _rm, createMap, events, fs, path, writeSync,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  path = require('path');\n\n  fs = require('fs');\n\n  events = require('events');\n\n  writeSync = require('write-file-atomic').sync;\n\n  KEY_FOR_EMPTY_STRING = '---.EMPTY_STRING.---';\n\n  _emptyDirectory = function(target) {\n    var i, len, p, ref, results;\n    ref = fs.readdirSync(target);\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      p = ref[i];\n      results.push(_rm(path.join(target, p)));\n    }\n    return results;\n  };\n\n  _rm = function(target) {\n    if (fs.statSync(target).isDirectory()) {\n      _emptyDirectory(target);\n      return fs.rmdirSync(target);\n    } else {\n      return fs.unlinkSync(target);\n    }\n  };\n\n  _escapeKey = function(key) {\n    var newKey;\n    if (key === '') {\n      newKey = KEY_FOR_EMPTY_STRING;\n    } else {\n      newKey = key.toString();\n    }\n    return newKey;\n  };\n\n  QUOTA_EXCEEDED_ERR = (function(superClass) {\n    extend(QUOTA_EXCEEDED_ERR, superClass);\n\n    function QUOTA_EXCEEDED_ERR(message) {\n      this.message = message != null ? message : 'Unknown error.';\n      QUOTA_EXCEEDED_ERR.__super__.constructor.call(this);\n      if (Error.captureStackTrace != null) {\n        Error.captureStackTrace(this, this.constructor);\n      }\n      this.name = this.constructor.name;\n    }\n\n    QUOTA_EXCEEDED_ERR.prototype.toString = function() {\n      return this.name + \": \" + this.message;\n    };\n\n    return QUOTA_EXCEEDED_ERR;\n\n  })(Error);\n\n  StorageEvent = (function() {\n    function StorageEvent(key1, oldValue1, newValue1, url, storageArea) {\n      this.key = key1;\n      this.oldValue = oldValue1;\n      this.newValue = newValue1;\n      this.url = url;\n      this.storageArea = storageArea != null ? storageArea : 'localStorage';\n    }\n\n    return StorageEvent;\n\n  })();\n\n  MetaKey = (function() {\n    function MetaKey(key1, index1) {\n      this.key = key1;\n      this.index = index1;\n      if (!(this instanceof MetaKey)) {\n        return new MetaKey(this.key, this.index);\n      }\n    }\n\n    return MetaKey;\n\n  })();\n\n  createMap = function() {\n    var Map;\n    Map = function() {};\n    Map.prototype = Object.create(null);\n    return new Map();\n  };\n\n  LocalStorage = (function(superClass) {\n    var instanceMap;\n\n    extend(LocalStorage, superClass);\n\n    instanceMap = {};\n\n    function LocalStorage(_location, quota) {\n      var handler;\n      this._location = _location;\n      this.quota = quota != null ? quota : 5 * 1024 * 1024;\n      LocalStorage.__super__.constructor.call(this);\n      if (!(this instanceof LocalStorage)) {\n        return new LocalStorage(this._location, this.quota);\n      }\n      this._location = path.resolve(this._location);\n      if (instanceMap[this._location] != null) {\n        return instanceMap[this._location];\n      }\n      this.length = 0;\n      this._bytesInUse = 0;\n      this._keys = [];\n      this._metaKeyMap = createMap();\n      this._eventUrl = \"pid:\" + process.pid;\n      this._init();\n      this._QUOTA_EXCEEDED_ERR = QUOTA_EXCEEDED_ERR;\n      if (typeof Proxy !== \"undefined\" && Proxy !== null) {\n        handler = {\n          set: (function(_this) {\n            return function(receiver, key, value) {\n              if (_this[key] != null) {\n                return _this[key] = value;\n              } else {\n                return _this.setItem(key, value);\n              }\n            };\n          })(this),\n          get: (function(_this) {\n            return function(receiver, key) {\n              if (_this[key] != null) {\n                return _this[key];\n              } else {\n                return _this.getItem(key);\n              }\n            };\n          })(this)\n        };\n        instanceMap[this._location] = new Proxy(this, handler);\n        return instanceMap[this._location];\n      }\n      instanceMap[this._location] = this;\n      return instanceMap[this._location];\n    }\n\n    LocalStorage.prototype._init = function() {\n      var _MetaKey, _decodedKey, _keys, e, i, index, k, len, stat;\n      try {\n        stat = fs.statSync(this._location);\n        if ((stat != null) && !stat.isDirectory()) {\n          throw new Error(\"A file exists at the location '\" + this._location + \"' when trying to create/open localStorage\");\n        }\n        this._bytesInUse = 0;\n        this.length = 0;\n        _keys = fs.readdirSync(this._location);\n        for (index = i = 0, len = _keys.length; i < len; index = ++i) {\n          k = _keys[index];\n          _decodedKey = decodeURIComponent(k);\n          this._keys.push(_decodedKey);\n          _MetaKey = new MetaKey(k, index);\n          this._metaKeyMap[_decodedKey] = _MetaKey;\n          stat = this._getStat(k);\n          if ((stat != null ? stat.size : void 0) != null) {\n            _MetaKey.size = stat.size;\n            this._bytesInUse += stat.size;\n          }\n        }\n        this.length = _keys.length;\n      } catch (error) {\n        e = error;\n        if (e.code !== \"ENOENT\") {\n          throw e;\n        }\n        try {\n          fs.mkdirSync(this._location, {\n            recursive: true\n          });\n        } catch (error) {\n          e = error;\n          if (e.code !== \"EEXIST\") {\n            throw e;\n          }\n        }\n      }\n    };\n\n    LocalStorage.prototype.setItem = function(key, value) {\n      var encodedKey, evnt, existsBeforeSet, filename, hasListeners, metaKey, oldLength, oldValue, valueString, valueStringLength;\n      hasListeners = events.EventEmitter.listenerCount(this, 'storage');\n      oldValue = null;\n      if (hasListeners) {\n        oldValue = this.getItem(key);\n      }\n      key = _escapeKey(key);\n      encodedKey = encodeURIComponent(key);\n      filename = path.join(this._location, encodedKey);\n      valueString = value.toString();\n      valueStringLength = valueString.length;\n      metaKey = this._metaKeyMap[key];\n      existsBeforeSet = !!metaKey;\n      if (existsBeforeSet) {\n        oldLength = metaKey.size;\n      } else {\n        oldLength = 0;\n      }\n      if (this._bytesInUse - oldLength + valueStringLength > this.quota) {\n        throw new QUOTA_EXCEEDED_ERR();\n      }\n      writeSync(filename, valueString, 'utf8');\n      if (!existsBeforeSet) {\n        metaKey = new MetaKey(encodedKey, (this._keys.push(key)) - 1);\n        metaKey.size = valueStringLength;\n        this._metaKeyMap[key] = metaKey;\n        this.length += 1;\n        this._bytesInUse += valueStringLength;\n      }\n      if (hasListeners) {\n        evnt = new StorageEvent(key, oldValue, value, this._eventUrl);\n        return this.emit('storage', evnt);\n      }\n    };\n\n    LocalStorage.prototype.getItem = function(key) {\n      var filename, metaKey;\n      key = _escapeKey(key);\n      metaKey = this._metaKeyMap[key];\n      if (!!metaKey) {\n        filename = path.join(this._location, metaKey.key);\n        return fs.readFileSync(filename, 'utf8');\n      } else {\n        return null;\n      }\n    };\n\n    LocalStorage.prototype._getStat = function(key) {\n      var filename;\n      key = _escapeKey(key);\n      filename = path.join(this._location, encodeURIComponent(key));\n      try {\n        return fs.statSync(filename);\n      } catch (error) {\n        return null;\n      }\n    };\n\n    LocalStorage.prototype.removeItem = function(key) {\n      var evnt, filename, hasListeners, k, meta, metaKey, oldValue, ref, v;\n      key = _escapeKey(key);\n      metaKey = this._metaKeyMap[key];\n      if (!!metaKey) {\n        hasListeners = events.EventEmitter.listenerCount(this, 'storage');\n        oldValue = null;\n        if (hasListeners) {\n          oldValue = this.getItem(key);\n        }\n        delete this._metaKeyMap[key];\n        this.length -= 1;\n        this._bytesInUse -= metaKey.size;\n        filename = path.join(this._location, metaKey.key);\n        this._keys.splice(metaKey.index, 1);\n        ref = this._metaKeyMap;\n        for (k in ref) {\n          v = ref[k];\n          meta = this._metaKeyMap[k];\n          if (meta.index > metaKey.index) {\n            meta.index -= 1;\n          }\n        }\n        _rm(filename);\n        if (hasListeners) {\n          evnt = new StorageEvent(key, oldValue, null, this._eventUrl);\n          return this.emit('storage', evnt);\n        }\n      }\n    };\n\n    LocalStorage.prototype.key = function(n) {\n      var rawKey;\n      rawKey = this._keys[n];\n      if (rawKey === KEY_FOR_EMPTY_STRING) {\n        return '';\n      } else {\n        return rawKey;\n      }\n    };\n\n    LocalStorage.prototype.clear = function() {\n      var evnt;\n      _emptyDirectory(this._location);\n      this._metaKeyMap = createMap();\n      this._keys = [];\n      this.length = 0;\n      this._bytesInUse = 0;\n      if (events.EventEmitter.listenerCount(this, 'storage')) {\n        evnt = new StorageEvent(null, null, null, this._eventUrl);\n        return this.emit('storage', evnt);\n      }\n    };\n\n    LocalStorage.prototype._getBytesInUse = function() {\n      return this._bytesInUse;\n    };\n\n    LocalStorage.prototype._deleteLocation = function() {\n      delete instanceMap[this._location];\n      _rm(this._location);\n      this._metaKeyMap = {};\n      this._keys = [];\n      this.length = 0;\n      return this._bytesInUse = 0;\n    };\n\n    return LocalStorage;\n\n  })(events.EventEmitter);\n\n  JSONStorage = (function(superClass) {\n    extend(JSONStorage, superClass);\n\n    function JSONStorage() {\n      return JSONStorage.__super__.constructor.apply(this, arguments);\n    }\n\n    JSONStorage.prototype.setItem = function(key, value) {\n      var newValue;\n      newValue = JSON.stringify(value);\n      return JSONStorage.__super__.setItem.call(this, key, newValue);\n    };\n\n    JSONStorage.prototype.getItem = function(key) {\n      return JSON.parse(JSONStorage.__super__.getItem.call(this, key));\n    };\n\n    return JSONStorage;\n\n  })(LocalStorage);\n\n  exports.LocalStorage = LocalStorage;\n\n  exports.JSONStorage = JSONStorage;\n\n  exports.QUOTA_EXCEEDED_ERR = QUOTA_EXCEEDED_ERR;\n\n}).call(this);\n","'use strict';\nmodule.exports = require('./lib/index');\n","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nfunction get () {\n  return alphabet || ORIGINAL;\n}\n\nmodule.exports = {\n    get: get,\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n","'use strict';\n\nvar generate = require('./generate');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1567752802062;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 7;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + generate(version);\n    str = str + generate(clusterWorkerId);\n    if (counter > 0) {\n        str = str + generate(counter);\n    }\n    str = str + generate(seconds);\n    return str;\n}\n\nmodule.exports = build;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar random = require('./random/random-byte');\nvar format = require('nanoid/format');\n\nfunction generate(number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + format(random, alphabet.get(), 1);\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = generate;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.isValid = isValid;\n","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var nonAlphabetic = new RegExp('[^' +\n      alphabet.get().replace(/[|\\\\{}()[\\]^$+*?.-]/g, '\\\\$&') +\n    ']');\n    return !nonAlphabetic.test(id);\n}\n\nmodule.exports = isShortId;\n","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nvar randomByte;\n\nif (!crypto || !crypto.getRandomValues) {\n    randomByte = function(size) {\n        var bytes = [];\n        for (var i = 0; i < size; i++) {\n            bytes.push(Math.floor(Math.random() * 256));\n        }\n        return bytes;\n    };\n} else {\n    randomByte = function(size) {\n        return crypto.getRandomValues(new Uint8Array(size));\n    };\n}\n\nmodule.exports = randomByte;\n","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n","'use strict';\n\nmodule.exports = 0;\n","// This file replaces `format.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nmodule.exports = function (random, alphabet, size) {\n  // We cant use bytes bigger than the alphabet. To make bytes values closer\n  // to the alphabet, we apply bitmask on them. We look for the closest\n  // `2 ** x - 1` number, which will be bigger than alphabet size. If we have\n  // 30 symbols in the alphabet, we will take 31 (00011111).\n  // We do not use faster Math.clz32, because it is not available in browsers.\n  var mask = (2 << Math.log(alphabet.length - 1) / Math.LN2) - 1\n  // Bitmask is not a perfect solution (in our example it will pass 31 bytes,\n  // which is bigger than the alphabet). As a result, we will need more bytes,\n  // than ID size, because we will refuse bytes bigger than the alphabet.\n\n  // Every hardware random generator call is costly,\n  // because we need to wait for entropy collection. This is why often it will\n  // be faster to ask for few extra bytes in advance, to avoid additional calls.\n\n  // Here we calculate how many random bytes should we call in advance.\n  // It depends on ID length, mask / alphabet size and magic number 1.6\n  // (which was selected according benchmarks).\n\n  // -~f => Math.ceil(f) if n is float number\n  // -~i => i + 1 if n is integer number\n  var step = -~(1.6 * mask * size / alphabet.length)\n  var id = ''\n\n  while (true) {\n    var bytes = random(step)\n    // Compact alternative for `for (var i = 0; i < step; i++)`\n    var i = step\n    while (i--) {\n      // If random byte is bigger than alphabet even after bitmask,\n      // we refuse it by `|| ''`.\n      id += alphabet[bytes[i] & mask] || ''\n      // More compact than `id.length + 1 === size`\n      if (id.length === +size) return id\n    }\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nvar typeChecker = function (type) {\n    var typeString = \"[object \" + type + \"]\";\n    return function (value) {\n        return getClassName(value) === typeString;\n    };\n};\nvar getClassName = function (value) { return Object.prototype.toString.call(value); };\nvar comparable = function (value) {\n    if (value instanceof Date) {\n        return value.getTime();\n    }\n    else if (isArray(value)) {\n        return value.map(comparable);\n    }\n    else if (value && typeof value.toJSON === \"function\") {\n        return value.toJSON();\n    }\n    return value;\n};\nvar isArray = typeChecker(\"Array\");\nvar isObject = typeChecker(\"Object\");\nvar isFunction = typeChecker(\"Function\");\nvar isVanillaObject = function (value) {\n    return (value &&\n        (value.constructor === Object ||\n            value.constructor === Array ||\n            value.constructor.toString() === \"function Object() { [native code] }\" ||\n            value.constructor.toString() === \"function Array() { [native code] }\") &&\n        !value.toJSON);\n};\nvar equals = function (a, b) {\n    if (a == null && a == b) {\n        return true;\n    }\n    if (a === b) {\n        return true;\n    }\n    if (Object.prototype.toString.call(a) !== Object.prototype.toString.call(b)) {\n        return false;\n    }\n    if (isArray(a)) {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (var i = 0, length_1 = a.length; i < length_1; i++) {\n            if (!equals(a[i], b[i]))\n                return false;\n        }\n        return true;\n    }\n    else if (isObject(a)) {\n        if (Object.keys(a).length !== Object.keys(b).length) {\n            return false;\n        }\n        for (var key in a) {\n            if (!equals(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    return false;\n};\n\n/**\n * Walks through each value given the context - used for nested operations. E.g:\n * { \"person.address\": { $eq: \"blarg\" }}\n */\nvar walkKeyPathValues = function (item, keyPath, next, depth, key, owner) {\n    var currentKey = keyPath[depth];\n    // if array, then try matching. Might fall through for cases like:\n    // { $eq: [1, 2, 3] }, [ 1, 2, 3 ].\n    if (isArray(item) && isNaN(Number(currentKey))) {\n        for (var i = 0, length_1 = item.length; i < length_1; i++) {\n            // if FALSE is returned, then terminate walker. For operations, this simply\n            // means that the search critera was met.\n            if (!walkKeyPathValues(item[i], keyPath, next, depth, i, item)) {\n                return false;\n            }\n        }\n    }\n    if (depth === keyPath.length || item == null) {\n        return next(item, key, owner);\n    }\n    return walkKeyPathValues(item[currentKey], keyPath, next, depth + 1, currentKey, item);\n};\nvar BaseOperation = /** @class */ (function () {\n    function BaseOperation(params, owneryQuery, options) {\n        this.params = params;\n        this.owneryQuery = owneryQuery;\n        this.options = options;\n        this.init();\n    }\n    BaseOperation.prototype.init = function () { };\n    BaseOperation.prototype.reset = function () {\n        this.done = false;\n        this.success = false;\n    };\n    return BaseOperation;\n}());\nvar NamedBaseOperation = /** @class */ (function (_super) {\n    __extends(NamedBaseOperation, _super);\n    function NamedBaseOperation(params, owneryQuery, options, name) {\n        var _this = _super.call(this, params, owneryQuery, options) || this;\n        _this.name = name;\n        return _this;\n    }\n    return NamedBaseOperation;\n}(BaseOperation));\nvar GroupOperation = /** @class */ (function (_super) {\n    __extends(GroupOperation, _super);\n    function GroupOperation(params, owneryQuery, options, children) {\n        var _this = _super.call(this, params, owneryQuery, options) || this;\n        _this.children = children;\n        return _this;\n    }\n    /**\n     */\n    GroupOperation.prototype.reset = function () {\n        this.success = false;\n        this.done = false;\n        for (var i = 0, length_2 = this.children.length; i < length_2; i++) {\n            this.children[i].reset();\n        }\n    };\n    /**\n     */\n    GroupOperation.prototype.childrenNext = function (item, key, owner) {\n        var done = true;\n        var success = true;\n        for (var i = 0, length_3 = this.children.length; i < length_3; i++) {\n            var childOperation = this.children[i];\n            childOperation.next(item, key, owner);\n            if (!childOperation.success) {\n                success = false;\n            }\n            if (childOperation.done) {\n                if (!childOperation.success) {\n                    break;\n                }\n            }\n            else {\n                done = false;\n            }\n        }\n        // console.log(\"DONE\", this.params, done, success);\n        this.done = done;\n        this.success = success;\n    };\n    return GroupOperation;\n}(BaseOperation));\nvar NamedGroupOperation = /** @class */ (function (_super) {\n    __extends(NamedGroupOperation, _super);\n    function NamedGroupOperation(params, owneryQuery, options, children, name) {\n        var _this = _super.call(this, params, owneryQuery, options, children) || this;\n        _this.name = name;\n        return _this;\n    }\n    return NamedGroupOperation;\n}(GroupOperation));\nvar QueryOperation = /** @class */ (function (_super) {\n    __extends(QueryOperation, _super);\n    function QueryOperation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     */\n    QueryOperation.prototype.next = function (item, key, parent) {\n        this.childrenNext(item, key, parent);\n    };\n    return QueryOperation;\n}(GroupOperation));\nvar NestedOperation = /** @class */ (function (_super) {\n    __extends(NestedOperation, _super);\n    function NestedOperation(keyPath, params, owneryQuery, options, children) {\n        var _this = _super.call(this, params, owneryQuery, options, children) || this;\n        _this.keyPath = keyPath;\n        /**\n         */\n        _this._nextNestedValue = function (value, key, owner) {\n            _this.childrenNext(value, key, owner);\n            return !_this.done;\n        };\n        return _this;\n    }\n    /**\n     */\n    NestedOperation.prototype.next = function (item, key, parent) {\n        walkKeyPathValues(item, this.keyPath, this._nextNestedValue, 0, key, parent);\n    };\n    return NestedOperation;\n}(GroupOperation));\nvar createTester = function (a, compare) {\n    if (a instanceof Function) {\n        return a;\n    }\n    if (a instanceof RegExp) {\n        return function (b) {\n            var result = typeof b === \"string\" && a.test(b);\n            a.lastIndex = 0;\n            return result;\n        };\n    }\n    var comparableA = comparable(a);\n    return function (b) { return compare(comparableA, comparable(b)); };\n};\nvar EqualsOperation = /** @class */ (function (_super) {\n    __extends(EqualsOperation, _super);\n    function EqualsOperation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EqualsOperation.prototype.init = function () {\n        this._test = createTester(this.params, this.options.compare);\n    };\n    EqualsOperation.prototype.next = function (item, key, parent) {\n        if (!Array.isArray(parent) || parent.hasOwnProperty(key)) {\n            if (this._test(item, key, parent)) {\n                this.done = true;\n                this.success = true;\n            }\n        }\n    };\n    return EqualsOperation;\n}(BaseOperation));\nvar createEqualsOperation = function (params, owneryQuery, options) { return new EqualsOperation(params, owneryQuery, options); };\nvar NopeOperation = /** @class */ (function (_super) {\n    __extends(NopeOperation, _super);\n    function NopeOperation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NopeOperation.prototype.next = function () {\n        this.done = true;\n        this.success = false;\n    };\n    return NopeOperation;\n}(BaseOperation));\nvar numericalOperationCreator = function (createNumericalOperation) { return function (params, owneryQuery, options, name) {\n    if (params == null) {\n        return new NopeOperation(params, owneryQuery, options);\n    }\n    return createNumericalOperation(params, owneryQuery, options, name);\n}; };\nvar numericalOperation = function (createTester) {\n    return numericalOperationCreator(function (params, owneryQuery, options) {\n        var typeofParams = typeof comparable(params);\n        var test = createTester(params);\n        return new EqualsOperation(function (b) {\n            return typeof comparable(b) === typeofParams && test(b);\n        }, owneryQuery, options);\n    });\n};\nvar createNamedOperation = function (name, params, parentQuery, options) {\n    var operationCreator = options.operations[name];\n    if (!operationCreator) {\n        throw new Error(\"Unsupported operation: \" + name);\n    }\n    return operationCreator(params, parentQuery, options, name);\n};\nvar containsOperation = function (query) {\n    for (var key in query) {\n        if (key.charAt(0) === \"$\")\n            return true;\n    }\n    return false;\n};\nvar createNestedOperation = function (keyPath, nestedQuery, owneryQuery, options) {\n    if (containsOperation(nestedQuery)) {\n        var _a = createQueryOperations(nestedQuery, options), selfOperations = _a[0], nestedOperations = _a[1];\n        if (nestedOperations.length) {\n            throw new Error(\"Property queries must contain only operations, or exact objects.\");\n        }\n        return new NestedOperation(keyPath, nestedQuery, owneryQuery, options, selfOperations);\n    }\n    return new NestedOperation(keyPath, nestedQuery, owneryQuery, options, [\n        new EqualsOperation(nestedQuery, owneryQuery, options)\n    ]);\n};\nvar createQueryOperation = function (query, owneryQuery, _a) {\n    if (owneryQuery === void 0) { owneryQuery = null; }\n    var _b = _a === void 0 ? {} : _a, compare = _b.compare, operations = _b.operations;\n    var options = {\n        compare: compare || equals,\n        operations: Object.assign({}, operations || {})\n    };\n    var _c = createQueryOperations(query, options), selfOperations = _c[0], nestedOperations = _c[1];\n    var ops = [];\n    if (selfOperations.length) {\n        ops.push(new NestedOperation([], query, owneryQuery, options, selfOperations));\n    }\n    ops.push.apply(ops, nestedOperations);\n    if (ops.length === 1) {\n        return ops[0];\n    }\n    return new QueryOperation(query, owneryQuery, options, ops);\n};\nvar createQueryOperations = function (query, options) {\n    var selfOperations = [];\n    var nestedOperations = [];\n    if (!isVanillaObject(query)) {\n        selfOperations.push(new EqualsOperation(query, query, options));\n        return [selfOperations, nestedOperations];\n    }\n    for (var key in query) {\n        if (key.charAt(0) === \"$\") {\n            var op = createNamedOperation(key, query[key], query, options);\n            // probably just a flag for another operation (like $options)\n            if (op != null) {\n                selfOperations.push(op);\n            }\n        }\n        else {\n            nestedOperations.push(createNestedOperation(key.split(\".\"), query[key], query, options));\n        }\n    }\n    return [selfOperations, nestedOperations];\n};\nvar createOperationTester = function (operation) { return function (item, key, owner) {\n    operation.reset();\n    operation.next(item, key, owner);\n    return operation.success;\n}; };\nvar createQueryTester = function (query, options) {\n    if (options === void 0) { options = {}; }\n    return createOperationTester(createQueryOperation(query, null, options));\n};\n\nvar $Ne = /** @class */ (function (_super) {\n    __extends($Ne, _super);\n    function $Ne() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Ne.prototype.init = function () {\n        this._test = createTester(this.params, this.options.compare);\n    };\n    $Ne.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.success = true;\n    };\n    $Ne.prototype.next = function (item) {\n        if (this._test(item)) {\n            this.done = true;\n            this.success = false;\n        }\n    };\n    return $Ne;\n}(NamedBaseOperation));\n// https://docs.mongodb.com/manual/reference/operator/query/elemMatch/\nvar $ElemMatch = /** @class */ (function (_super) {\n    __extends($ElemMatch, _super);\n    function $ElemMatch() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $ElemMatch.prototype.init = function () {\n        this._queryOperation = createQueryOperation(this.params, this.owneryQuery, this.options);\n    };\n    $ElemMatch.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this._queryOperation.reset();\n    };\n    $ElemMatch.prototype.next = function (item, key, owner) {\n        this._queryOperation.reset();\n        if (isArray(owner)) {\n            this._queryOperation.next(item, key, owner);\n            this.done =\n                this.done || this._queryOperation.done || key === owner.length - 1;\n            this.success = this.success || this._queryOperation.success;\n        }\n        else {\n            this.done = true;\n            this.success = false;\n        }\n    };\n    return $ElemMatch;\n}(NamedBaseOperation));\nvar $Not = /** @class */ (function (_super) {\n    __extends($Not, _super);\n    function $Not() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Not.prototype.init = function () {\n        this._queryOperation = createQueryOperation(this.params, this.owneryQuery, this.options);\n    };\n    $Not.prototype.reset = function () {\n        this._queryOperation.reset();\n    };\n    $Not.prototype.next = function (item, key, owner) {\n        this._queryOperation.next(item, key, owner);\n        this.done = this._queryOperation.done;\n        this.success = !this._queryOperation.success;\n    };\n    return $Not;\n}(NamedBaseOperation));\nvar $Size = /** @class */ (function (_super) {\n    __extends($Size, _super);\n    function $Size() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Size.prototype.init = function () { };\n    $Size.prototype.next = function (item, key, parent) {\n        if (parent && parent.length === this.params) {\n            this.done = true;\n            this.success = true;\n        }\n    };\n    return $Size;\n}(NamedBaseOperation));\nvar $Or = /** @class */ (function (_super) {\n    __extends($Or, _super);\n    function $Or() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Or.prototype.init = function () {\n        var _this = this;\n        this._ops = this.params.map(function (op) {\n            return createQueryOperation(op, null, _this.options);\n        });\n    };\n    $Or.prototype.reset = function () {\n        this.done = false;\n        this.success = false;\n        for (var i = 0, length_1 = this._ops.length; i < length_1; i++) {\n            this._ops[i].reset();\n        }\n    };\n    $Or.prototype.next = function (item, key, owner) {\n        var done = false;\n        var success = false;\n        for (var i = 0, length_2 = this._ops.length; i < length_2; i++) {\n            var op = this._ops[i];\n            op.next(item, key, owner);\n            if (op.success) {\n                done = true;\n                success = op.success;\n                break;\n            }\n        }\n        this.success = success;\n        this.done = done;\n    };\n    return $Or;\n}(NamedBaseOperation));\nvar $Nor = /** @class */ (function (_super) {\n    __extends($Nor, _super);\n    function $Nor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Nor.prototype.next = function (item, key, owner) {\n        _super.prototype.next.call(this, item, key, owner);\n        this.success = !this.success;\n    };\n    return $Nor;\n}($Or));\nvar $In = /** @class */ (function (_super) {\n    __extends($In, _super);\n    function $In() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $In.prototype.init = function () {\n        var _this = this;\n        this._testers = this.params.map(function (value) {\n            if (containsOperation(value)) {\n                throw new Error(\"cannot nest $ under \" + _this.constructor.name.toLowerCase());\n            }\n            return createTester(value, _this.options.compare);\n        });\n    };\n    $In.prototype.next = function (item, key, owner) {\n        var done = false;\n        var success = false;\n        for (var i = 0, length_3 = this._testers.length; i < length_3; i++) {\n            var test = this._testers[i];\n            if (test(item)) {\n                done = true;\n                success = true;\n                break;\n            }\n        }\n        this.success = success;\n        this.done = done;\n    };\n    return $In;\n}(NamedBaseOperation));\nvar $Nin = /** @class */ (function (_super) {\n    __extends($Nin, _super);\n    function $Nin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Nin.prototype.next = function (item, key, owner) {\n        _super.prototype.next.call(this, item, key, owner);\n        this.success = !this.success;\n    };\n    return $Nin;\n}($In));\nvar $Exists = /** @class */ (function (_super) {\n    __extends($Exists, _super);\n    function $Exists() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Exists.prototype.next = function (item, key, owner) {\n        if (owner.hasOwnProperty(key) === this.params) {\n            this.done = true;\n            this.success = true;\n        }\n    };\n    return $Exists;\n}(NamedBaseOperation));\nvar $And = /** @class */ (function (_super) {\n    __extends($And, _super);\n    function $And(params, owneryQuery, options, name) {\n        return _super.call(this, params, owneryQuery, options, params.map(function (query) { return createQueryOperation(query, owneryQuery, options); }), name) || this;\n    }\n    $And.prototype.next = function (item, key, owner) {\n        this.childrenNext(item, key, owner);\n    };\n    return $And;\n}(NamedGroupOperation));\nvar $eq = function (params, owneryQuery, options) {\n    return new EqualsOperation(params, owneryQuery, options);\n};\nvar $ne = function (params, owneryQuery, options, name) { return new $Ne(params, owneryQuery, options, name); };\nvar $or = function (params, owneryQuery, options, name) { return new $Or(params, owneryQuery, options, name); };\nvar $nor = function (params, owneryQuery, options, name) { return new $Nor(params, owneryQuery, options, name); };\nvar $elemMatch = function (params, owneryQuery, options, name) { return new $ElemMatch(params, owneryQuery, options, name); };\nvar $nin = function (params, owneryQuery, options, name) { return new $Nin(params, owneryQuery, options, name); };\nvar $in = function (params, owneryQuery, options, name) { return new $In(params, owneryQuery, options, name); };\nvar $lt = numericalOperation(function (params) { return function (b) { return b < params; }; });\nvar $lte = numericalOperation(function (params) { return function (b) { return b <= params; }; });\nvar $gt = numericalOperation(function (params) { return function (b) { return b > params; }; });\nvar $gte = numericalOperation(function (params) { return function (b) { return b >= params; }; });\nvar $mod = function (_a, owneryQuery, options) {\n    var mod = _a[0], equalsValue = _a[1];\n    return new EqualsOperation(function (b) { return comparable(b) % mod === equalsValue; }, owneryQuery, options);\n};\nvar $exists = function (params, owneryQuery, options, name) { return new $Exists(params, owneryQuery, options, name); };\nvar $regex = function (pattern, owneryQuery, options) {\n    return new EqualsOperation(new RegExp(pattern, owneryQuery.$options), owneryQuery, options);\n};\nvar $not = function (params, owneryQuery, options, name) { return new $Not(params, owneryQuery, options, name); };\nvar $type = function (clazz, owneryQuery, options) {\n    return new EqualsOperation(function (b) { return (b != null ? b instanceof clazz || b.constructor === clazz : false); }, owneryQuery, options);\n};\nvar $and = function (params, ownerQuery, options, name) { return new $And(params, ownerQuery, options, name); };\nvar $all = $and;\n// export const $size = (\n//   params: number,\n//   ownerQuery: Query<any>,\n//   options: Options\n// ) => new EqualsOperation(b => {\n//   return b && b.length === params;\n// }, ownerQuery, options);\nvar $size = function (params, ownerQuery, options) { return new $Size(params, ownerQuery, options, \"$size\"); };\nvar $options = function () { return null; };\nvar $where = function (params, ownerQuery, options) {\n    var test;\n    if (isFunction(params)) {\n        test = params;\n    }\n    else if (!process.env.CSP_ENABLED) {\n        test = new Function(\"obj\", \"return \" + params);\n    }\n    else {\n        throw new Error(\"In CSP mode, sift does not support strings in \\\"$where\\\" condition\");\n    }\n    return new EqualsOperation(function (b) { return test.bind(b)(b); }, ownerQuery, options);\n};\n\nvar defaultOperations = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    $Size: $Size,\n    $eq: $eq,\n    $ne: $ne,\n    $or: $or,\n    $nor: $nor,\n    $elemMatch: $elemMatch,\n    $nin: $nin,\n    $in: $in,\n    $lt: $lt,\n    $lte: $lte,\n    $gt: $gt,\n    $gte: $gte,\n    $mod: $mod,\n    $exists: $exists,\n    $regex: $regex,\n    $not: $not,\n    $type: $type,\n    $and: $and,\n    $all: $all,\n    $size: $size,\n    $options: $options,\n    $where: $where\n});\n\nvar createDefaultQueryOperation = function (query, ownerQuery, _a) {\n    var _b = _a === void 0 ? {} : _a, compare = _b.compare, operations = _b.operations;\n    return createQueryOperation(query, ownerQuery, {\n        compare: compare,\n        operations: Object.assign({}, defaultOperations, operations || {})\n    });\n};\nvar createDefaultQueryTester = function (query, options) {\n    if (options === void 0) { options = {}; }\n    var op = createDefaultQueryOperation(query, null, options);\n    return createOperationTester(op);\n};\n\nexport default createDefaultQueryTester;\nexport { $Size, $all, $and, $elemMatch, $eq, $exists, $gt, $gte, $in, $lt, $lte, $mod, $ne, $nin, $nor, $not, $options, $or, $regex, $size, $type, $where, EqualsOperation, createDefaultQueryOperation, createEqualsOperation, createOperationTester, createQueryOperation, createQueryTester };\n//# sourceMappingURL=index.js.map\n","\n/*\nusage:\n\n// do something to a list of things\nasyncMap(myListOfStuff, function (thing, cb) { doSomething(thing.foo, cb) }, cb)\n// do more than one thing to each item\nasyncMap(list, fooFn, barFn, cb)\n\n*/\n\nmodule.exports = asyncMap\n\nfunction asyncMap () {\n  var steps = Array.prototype.slice.call(arguments)\n    , list = steps.shift() || []\n    , cb_ = steps.pop()\n  if (typeof cb_ !== \"function\") throw new Error(\n    \"No callback provided to asyncMap\")\n  if (!list) return cb_(null, [])\n  if (!Array.isArray(list)) list = [list]\n  var n = steps.length\n    , data = [] // 2d array\n    , errState = null\n    , l = list.length\n    , a = l * n\n  if (!a) return cb_(null, [])\n  function cb (er) {\n    if (er && !errState) errState = er\n\n    var argLen = arguments.length\n    for (var i = 1; i < argLen; i ++) if (arguments[i] !== undefined) {\n      data[i - 1] = (data[i - 1] || []).concat(arguments[i])\n    }\n    // see if any new things have been added.\n    if (list.length > l) {\n      var newList = list.slice(l)\n      a += (list.length - l) * n\n      l = list.length\n      process.nextTick(function () {\n        newList.forEach(function (ar) {\n          steps.forEach(function (fn) { fn(ar, cb) })\n        })\n      })\n    }\n\n    if (--a === 0) cb_.apply(null, [errState].concat(data))\n  }\n  // expect the supplied cb function to be called\n  // \"n\" times for each thing in the array.\n  list.forEach(function (ar) {\n    steps.forEach(function (fn) { fn(ar, cb) })\n  })\n}\n","module.exports = bindActor\nfunction bindActor () {\n  var args = \n        Array.prototype.slice.call\n        (arguments) // jswtf.\n    , obj = null\n    , fn\n  if (typeof args[0] === \"object\") {\n    obj = args.shift()\n    fn = args.shift()\n    if (typeof fn === \"string\")\n      fn = obj[ fn ]\n  } else fn = args.shift()\n  return function (cb) {\n    fn.apply(obj, args.concat(cb)) }\n}\n","module.exports = chain\nvar bindActor = require(\"./bind-actor.js\")\nchain.first = {} ; chain.last = {}\nfunction chain (things, cb) {\n  var res = []\n  ;(function LOOP (i, len) {\n    if (i >= len) return cb(null,res)\n    if (Array.isArray(things[i]))\n      things[i] = bindActor.apply(null,\n        things[i].map(function(i){\n          return (i===chain.first) ? res[0]\n           : (i===chain.last)\n             ? res[res.length - 1] : i }))\n    if (!things[i]) return LOOP(i + 1, len)\n    things[i](function (er, data) {\n      if (er) return cb(er, res)\n      if (data !== undefined) res = res.concat(data)\n      LOOP(i + 1, len)\n    })\n  })(0, things.length) }\n","exports.asyncMap = require(\"./async-map\")\nexports.bindActor = require(\"./bind-actor\")\nexports.chain = require(\"./chain\")\n","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","'use strict'\nmodule.exports = writeFile\nmodule.exports.sync = writeFileSync\nmodule.exports._getTmpname = getTmpname // for testing\n\nvar fs = require('graceful-fs')\nvar chain = require('slide').chain\nvar MurmurHash3 = require('imurmurhash')\nvar extend = Object.assign || require('util')._extend\n\nvar invocations = 0\nfunction getTmpname (filename) {\n  return filename + '.' +\n    MurmurHash3(__filename)\n      .hash(String(process.pid))\n      .hash(String(++invocations))\n      .result()\n}\n\nfunction writeFile (filename, data, options, callback) {\n  if (options instanceof Function) {\n    callback = options\n    options = null\n  }\n  if (!options) options = {}\n  fs.realpath(filename, function (_, realname) {\n    _writeFile(realname || filename, data, options, callback)\n  })\n}\nfunction _writeFile (filename, data, options, callback) {\n  var tmpfile = getTmpname(filename)\n\n  if (options.mode && options.chown) {\n    return thenWriteFile()\n  } else {\n    // Either mode or chown is not explicitly set\n    // Default behavior is to copy it from original file\n    return fs.stat(filename, function (err, stats) {\n      if (err || !stats) return thenWriteFile()\n\n      options = extend({}, options)\n      if (!options.mode) {\n        options.mode = stats.mode\n      }\n      if (!options.chown && process.getuid) {\n        options.chown = { uid: stats.uid, gid: stats.gid }\n      }\n      return thenWriteFile()\n    })\n  }\n\n  function thenWriteFile () {\n    chain([\n      [writeFileAsync, tmpfile, data, options.mode, options.encoding || 'utf8'],\n      options.chown && [fs, fs.chown, tmpfile, options.chown.uid, options.chown.gid],\n      options.mode && [fs, fs.chmod, tmpfile, options.mode],\n      [fs, fs.rename, tmpfile, filename]\n    ], function (err) {\n      err ? fs.unlink(tmpfile, function () { callback(err) })\n        : callback()\n    })\n  }\n\n  // doing this instead of `fs.writeFile` in order to get the ability to\n  // call `fsync`.\n  function writeFileAsync (file, data, mode, encoding, cb) {\n    fs.open(file, 'w', options.mode, function (err, fd) {\n      if (err) return cb(err)\n      if (Buffer.isBuffer(data)) {\n        return fs.write(fd, data, 0, data.length, 0, syncAndClose)\n      } else if (data != null) {\n        return fs.write(fd, String(data), 0, String(encoding), syncAndClose)\n      } else {\n        return syncAndClose()\n      }\n      function syncAndClose (err) {\n        if (err) return cb(err)\n        fs.fsync(fd, function (err) {\n          if (err) return cb(err)\n          fs.close(fd, cb)\n        })\n      }\n    })\n  }\n}\n\nfunction writeFileSync (filename, data, options) {\n  if (!options) options = {}\n  try {\n    filename = fs.realpathSync(filename)\n  } catch (ex) {\n    // it's ok, it'll happen on a not yet existing file\n  }\n  var tmpfile = getTmpname(filename)\n\n  try {\n    if (!options.mode || !options.chown) {\n      // Either mode or chown is not explicitly set\n      // Default behavior is to copy it from original file\n      try {\n        var stats = fs.statSync(filename)\n        options = extend({}, options)\n        if (!options.mode) {\n          options.mode = stats.mode\n        }\n        if (!options.chown && process.getuid) {\n          options.chown = { uid: stats.uid, gid: stats.gid }\n        }\n      } catch (ex) {\n        // ignore stat errors\n      }\n    }\n\n    var fd = fs.openSync(tmpfile, 'w', options.mode)\n    if (Buffer.isBuffer(data)) {\n      fs.writeSync(fd, data, 0, data.length, 0)\n    } else if (data != null) {\n      fs.writeSync(fd, String(data), 0, String(options.encoding || 'utf8'))\n    }\n    fs.fsyncSync(fd)\n    fs.closeSync(fd)\n    if (options.chown) fs.chownSync(tmpfile, options.chown.uid, options.chown.gid)\n    if (options.mode) fs.chmodSync(tmpfile, options.mode)\n    fs.renameSync(tmpfile, filename)\n  } catch (err) {\n    try { fs.unlinkSync(tmpfile) } catch (e) {}\n    throw err\n  }\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./packages/client/lib/index.js\");\n"],"sourceRoot":""}